function e(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r}"function"==typeof SuppressedError&&SuppressedError;const t=window,o=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),a=new WeakMap;class n{constructor(e,t,o){if(this._$cssResult$=!0,o!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(o&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=a.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&a.set(t,e))}return e}toString(){return this.cssText}}const r=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new n(o,e,i)},l=o?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new n("string"==typeof e?e:e+"",void 0,i))(t)})(e):e;var s;const d=window,c=d.trustedTypes,u=c?c.emptyScript:"",p=d.reactiveElementPolyfillSupport,h={toAttribute(e,t){switch(t){case Boolean:e=e?u:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},v=(e,t)=>t!==e&&(t==t||e==e),_={attribute:!0,type:String,converter:h,reflect:!1,hasChanged:v},m="finalized";class f extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,o)=>{const i=this._$Ep(o,t);void 0!==i&&(this._$Ev.set(i,o),e.push(i))})),e}static createProperty(e,t=_){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const o="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const a=this[e];this[t]=i,this.requestUpdate(e,a,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||_}static finalize(){if(this.hasOwnProperty(m))return!1;this[m]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const o of t)this.createProperty(o,e[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Ep(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,o;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(o=e.hostConnected)||void 0===o||o.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const i=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,i)=>{o?e.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((o=>{const i=document.createElement("style"),a=t.litNonce;void 0!==a&&i.setAttribute("nonce",a),i.textContent=o.cssText,e.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EO(e,t,o=_){var i;const a=this.constructor._$Ep(e,o);if(void 0!==a&&!0===o.reflect){const n=(void 0!==(null===(i=o.converter)||void 0===i?void 0:i.toAttribute)?o.converter:h).toAttribute(t,o.type);this._$El=e,null==n?this.removeAttribute(a):this.setAttribute(a,n),this._$El=null}}_$AK(e,t){var o;const i=this.constructor,a=i._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=i.getPropertyOptions(a),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(o=e.converter)||void 0===o?void 0:o.fromAttribute)?e.converter:h;this._$El=a,this[a]=n.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,o){let i=!0;void 0!==e&&(((o=o||this.constructor.getPropertyOptions(e)).hasChanged||v)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,o))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const o=this._$AL;try{t=this.shouldUpdate(o),t?(this.willUpdate(o),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(o)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(o)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var y;f[m]=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==p||p({ReactiveElement:f}),(null!==(s=d.reactiveElementVersions)&&void 0!==s?s:d.reactiveElementVersions=[]).push("1.6.3");const g=window,b=g.trustedTypes,w=b?b.createPolicy("lit-html",{createHTML:e=>e}):void 0,x="$lit$",k=`lit$${(Math.random()+"").slice(9)}$`,S="?"+k,$=`<${S}>`,C=document,E=()=>C.createComment(""),A=e=>null===e||"object"!=typeof e&&"function"!=typeof e,M=Array.isArray,z=e=>M(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),P="[ \t\n\f\r]",D=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,O=/>/g,N=RegExp(`>|${P}(?:([^\\s"'>=/]+)(${P}*=${P}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),j=/'/g,B=/"/g,L=/^(?:script|style|textarea|title)$/i,I=e=>(t,...o)=>({_$litType$:e,strings:t,values:o}),H=I(1),R=I(2),F=Symbol.for("lit-noChange"),G=Symbol.for("lit-nothing"),U=new WeakMap,V=C.createTreeWalker(C,129,null,!1);function W(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==w?w.createHTML(t):t}const Z=(e,t)=>{const o=e.length-1,i=[];let a,n=2===t?"<svg>":"",r=D;for(let t=0;t<o;t++){const o=e[t];let l,s,d=-1,c=0;for(;c<o.length&&(r.lastIndex=c,s=r.exec(o),null!==s);)c=r.lastIndex,r===D?"!--"===s[1]?r=T:void 0!==s[1]?r=O:void 0!==s[2]?(L.test(s[2])&&(a=RegExp("</"+s[2],"g")),r=N):void 0!==s[3]&&(r=N):r===N?">"===s[0]?(r=null!=a?a:D,d=-1):void 0===s[1]?d=-2:(d=r.lastIndex-s[2].length,l=s[1],r=void 0===s[3]?N:'"'===s[3]?B:j):r===B||r===j?r=N:r===T||r===O?r=D:(r=N,a=void 0);const u=r===N&&e[t+1].startsWith("/>")?" ":"";n+=r===D?o+$:d>=0?(i.push(l),o.slice(0,d)+x+o.slice(d)+k+u):o+k+(-2===d?(i.push(void 0),t):u)}return[W(e,n+(e[o]||"<?>")+(2===t?"</svg>":"")),i]};class K{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let a=0,n=0;const r=e.length-1,l=this.parts,[s,d]=Z(e,t);if(this.el=K.createElement(s,o),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=V.nextNode())&&l.length<r;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(x)||t.startsWith(k)){const o=d[n++];if(e.push(t),void 0!==o){const e=i.getAttribute(o.toLowerCase()+x).split(k),t=/([.?@])?(.*)/.exec(o);l.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?Q:"?"===t[1]?te:"@"===t[1]?oe:J})}else l.push({type:6,index:a})}for(const t of e)i.removeAttribute(t)}if(L.test(i.tagName)){const e=i.textContent.split(k),t=e.length-1;if(t>0){i.textContent=b?b.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],E()),V.nextNode(),l.push({type:2,index:++a});i.append(e[t],E())}}}else if(8===i.nodeType)if(i.data===S)l.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(k,e+1));)l.push({type:7,index:a}),e+=k.length-1}a++}}static createElement(e,t){const o=C.createElement("template");return o.innerHTML=e,o}}function Y(e,t,o=e,i){var a,n,r,l;if(t===F)return t;let s=void 0!==i?null===(a=o._$Co)||void 0===a?void 0:a[i]:o._$Cl;const d=A(t)?void 0:t._$litDirective$;return(null==s?void 0:s.constructor)!==d&&(null===(n=null==s?void 0:s._$AO)||void 0===n||n.call(s,!1),void 0===d?s=void 0:(s=new d(e),s._$AT(e,o,i)),void 0!==i?(null!==(r=(l=o)._$Co)&&void 0!==r?r:l._$Co=[])[i]=s:o._$Cl=s),void 0!==s&&(t=Y(e,s._$AS(e,t.values),s,i)),t}class q{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:o},parts:i}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:C).importNode(o,!0);V.currentNode=a;let n=V.nextNode(),r=0,l=0,s=i[0];for(;void 0!==s;){if(r===s.index){let t;2===s.type?t=new X(n,n.nextSibling,this,e):1===s.type?t=new s.ctor(n,s.name,s.strings,this,e):6===s.type&&(t=new ie(n,this,e)),this._$AV.push(t),s=i[++l]}r!==(null==s?void 0:s.index)&&(n=V.nextNode(),r++)}return V.currentNode=C,a}v(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class X{constructor(e,t,o,i){var a;this.type=2,this._$AH=G,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cp=null===(a=null==i?void 0:i.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),A(e)?e===G||null==e||""===e?(this._$AH!==G&&this._$AR(),this._$AH=G):e!==this._$AH&&e!==F&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):z(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==G&&A(this._$AH)?this._$AA.nextSibling.data=e:this.$(C.createTextNode(e)),this._$AH=e}g(e){var t;const{values:o,_$litType$:i}=e,a="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=K.createElement(W(i.h,i.h[0]),this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.v(o);else{const e=new q(a,this),t=e.u(this.options);e.v(o),this.$(t),this._$AH=e}}_$AC(e){let t=U.get(e.strings);return void 0===t&&U.set(e.strings,t=new K(e)),t}T(e){M(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const a of e)i===t.length?t.push(o=new X(this.k(E()),this.k(E()),this,this.options)):o=t[i],o._$AI(a),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class J{constructor(e,t,o,i,a){this.type=1,this._$AH=G,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=G}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,o,i){const a=this.strings;let n=!1;if(void 0===a)e=Y(this,e,t,0),n=!A(e)||e!==this._$AH&&e!==F,n&&(this._$AH=e);else{const i=e;let r,l;for(e=a[0],r=0;r<a.length-1;r++)l=Y(this,i[o+r],t,r),l===F&&(l=this._$AH[r]),n||(n=!A(l)||l!==this._$AH[r]),l===G?e=G:e!==G&&(e+=(null!=l?l:"")+a[r+1]),this._$AH[r]=l}n&&!i&&this.j(e)}j(e){e===G?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Q extends J{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===G?void 0:e}}const ee=b?b.emptyScript:"";class te extends J{constructor(){super(...arguments),this.type=4}j(e){e&&e!==G?this.element.setAttribute(this.name,ee):this.element.removeAttribute(this.name)}}class oe extends J{constructor(e,t,o,i,a){super(e,t,o,i,a),this.type=5}_$AI(e,t=this){var o;if((e=null!==(o=Y(this,e,t,0))&&void 0!==o?o:G)===F)return;const i=this._$AH,a=e===G&&i!==G||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,n=e!==G&&(i===G||a);a&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==o?o:this.element,e):this._$AH.handleEvent(e)}}class ie{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const ae={O:x,P:k,A:S,C:1,M:Z,L:q,R:z,D:Y,I:X,V:J,H:te,N:oe,U:Q,F:ie},ne=g.litHtmlPolyfillSupport;var re,le;null==ne||ne(K,X),(null!==(y=g.litHtmlVersions)&&void 0!==y?y:g.litHtmlVersions=[]).push("2.8.0");class se extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const o=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=o.firstChild),o}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,o)=>{var i,a;const n=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:t;let r=n._$litPart$;if(void 0===r){const e=null!==(a=null==o?void 0:o.renderBefore)&&void 0!==a?a:null;n._$litPart$=r=new X(t.insertBefore(E(),e),e,void 0,null!=o?o:{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return F}}se.finalized=!0,se._$litElement$=!0,null===(re=globalThis.litElementHydrateSupport)||void 0===re||re.call(globalThis,{LitElement:se});const de=globalThis.litElementPolyfillSupport;null==de||de({LitElement:se}),(null!==(le=globalThis.litElementVersions)&&void 0!==le?le:globalThis.litElementVersions=[]).push("3.3.3");const ce=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){customElements.define(e,t)}}})(e,t),ue=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(o){o.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}},pe=(e,t,o)=>{t.constructor.createProperty(o,e)};function he(e){return(t,o)=>void 0!==o?pe(e,t,o):ue(e,t)}function ve(e){return he({...e,state:!0})}function _e(e,t){return(({finisher:e,descriptor:t})=>(o,i)=>{var a;if(void 0===i){const i=null!==(a=o.originalKey)&&void 0!==a?a:o.key,n=null!=t?{kind:"method",placement:"prototype",key:i,descriptor:t(o.key)}:{...o,key:i};return null!=e&&(n.finisher=function(t){e(t,i)}),n}{const a=o.constructor;void 0!==t&&Object.defineProperty(o,i,t(i)),null==e||e(a,i)}})({descriptor:o=>{const i={get(){var t,o;return null!==(o=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==o?o:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof o?Symbol():"__"+o;i.get=function(){var o,i;return void 0===this[t]&&(this[t]=null!==(i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(e))&&void 0!==i?i:null),this[t]}}return i}})}var me,fe,ye;function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}null===(me=window.HTMLSlotElement)||void 0===me||me.prototype.assignedElements,function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(fe||(fe={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(ye||(ye={}));var be=function(e,t){var o=ge({maximumFractionDigits:2},t);if("string"!=typeof e)return o;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var i=e.indexOf(".")>-1?e.split(".")[1].length:0;o.minimumFractionDigits=i,o.maximumFractionDigits=i}return o},we=function(e,t,o,i){i=i||{},o=null==o?{}:o;var a=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return a.detail=o,e.dispatchEvent(a),a};const xe=(e,t)=>Number(`${Math.round(Number(`${e}e${t}`))}e-${t}`);function ke(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function Se(e,t=0){return ke(e)?Number(e):t}const $e=(e,t,o,{unit:i,unitWhiteSpace:a,decimals:n,accept_negative:r,watt_threshold:l=1e3})=>{if(null===o)return"0";if(!ke(o))return o.toString();const s=Number(o),d=void 0===i&&s>=l,c=null!=n?n:d?t.kw_decimals:t.w_decimals;return`${function(e,t,o){var i=t?function(e){switch(e.number_format){case fe.comma_decimal:return["en-US","en"];case fe.decimal_comma:return["de","es","it"];case fe.space_comma:return["fr","sv","cs"];case fe.system:return;default:return e.language}}(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==fe.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(i,be(e,o)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,be(e,o)).format(Number(e))}return"string"==typeof e?e:function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}(e,null==o?void 0:o.maximumFractionDigits).toString()+("currency"===(null==o?void 0:o.style)?" "+o.currency:"")}((e=>r?e:Math.abs(e))(d?xe(s/1e3,null!=c?c:2):xe(s,null!=c?c:0)),e.locale)}${!1===a?"":" "}${i||(d?"kW":"W")}`},Ce=e=>(...t)=>({_$litDirective$:e,values:t});class Ee{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const Ae=Ce(class extends Ee{constructor(e){var t;if(super(e),1!==e.type||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var o,i;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(o=this.nt)||void 0===o?void 0:o.has(e))&&this.it.add(e);return this.render(t)}const a=e.element.classList;this.it.forEach((e=>{e in t||(a.remove(e),this.it.delete(e))}));for(const e in t){const o=!!t[e];o===this.it.has(e)||(null===(i=this.nt)||void 0===i?void 0:i.has(e))||(o?(a.add(e),this.it.add(e)):(a.remove(e),this.it.delete(e)))}return F}}),Me=(e,t)=>{var o;return t>0||"hide"!==(null===(o=null==e?void 0:e.display_zero_lines)||void 0===o?void 0:o.mode)},ze=(e,t)=>{var o,i;if(e>0)return"";const a=null===(o=null==t?void 0:t.display_zero_lines)||void 0===o?void 0:o.mode;if("show"===a||void 0===a)return"";let n="";if("transparency"===a||"custom"===a){const e=null===(i=null==t?void 0:t.display_zero_lines)||void 0===i?void 0:i.transparency;(null==e||e)&&(n+="transparency ")}return"grey_out"!==a&&"custom"!==a||(n+="grey"),n},Pe=e=>!0!==e.disable_dots,De=e=>e.filter((e=>null==e?void 0:e.has)),Te=e=>De(e).slice(0,5),Oe=e=>De(e).slice(5,10),Ne=e=>Te(e).length>0,je=e=>{const t=Te(e),o=Oe(e);return t.slice(3).length>0||o.slice(3).length>0},Be=(e,{battery:t,grid:o,individual:i,solar:a,newDur:n})=>H`${((e,{battery:t,grid:o,individual:i,solar:a,newDur:n})=>{var r;return a.has&&Me(e,a.state.toHome||0)&&!(null===(r=e.entities.home)||void 0===r?void 0:r.hide)?H`<div class="lines ${Ae({high:t.has})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-home-flow"><path id="solar" class="solar ${ze(a.state.toHome||0,e)}" d="M${t.has?55:53},0 v${o.has?15:17} c0,${t.has?"30 10,30 30,30":"35 10,35 30,35"} h25" vector-effect="non-scaling-stroke"></path>${Pe(e)&&a.state.toHome?R`<circle r="1" class="solar" vector-effect="non-scaling-stroke"><animateMotion dur="${n.solarToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#solar"></animateMotion></circle>`:""}</svg></div>`:""})(e,{battery:t,grid:o,individual:i,solar:a,newDur:n})} ${((e,{battery:t,grid:o,individual:i,solar:a,newDur:n})=>o.hasReturnToGrid&&a.has&&Me(e,a.state.toGrid||0)?H`<div class="lines ${Ae({high:t.has||Ne(i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":je(i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-grid-flow"><path id="return" class="return ${ze(a.state.toGrid||0,e)}" d="M${t.has?45:47},0 v15 c0,${t.has?"30 -10,30 -30,30":"35 -10,35 -30,35"} h-20" vector-effect="non-scaling-stroke"></path>${Pe(e)&&a.state.toGrid&&a.has?R`<circle r="1" class="return" vector-effect="non-scaling-stroke"><animateMotion dur="${n.solarToGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#return"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,solar:a,newDur:n})} ${((e,{battery:t,individual:o,solar:i,newDur:a})=>t.has&&i.has&&Me(e,i.state.toBattery||0)?H`<div class="lines ${Ae({high:t.has})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-battery-flow" class="flat-line"><path id="battery-solar" class="battery-solar ${ze(i.state.toBattery||0,e)}" d="M50,0 V100" vector-effect="non-scaling-stroke"></path>${Pe(e)&&i.state.toBattery?R`<circle r="1" class="battery-solar" vector-effect="non-scaling-stroke"><animateMotion dur="${a.solarToBattery}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-solar"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,individual:i,solar:a,newDur:n})} ${((e,{battery:t,grid:o,individual:i,solar:a,newDur:n})=>{var r;return o.has&&Me(e,o.state.fromGrid)&&!(null===(r=e.entities.home)||void 0===r?void 0:r.hide)?H`<div class="lines ${Ae({high:t.has})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="grid-home-flow" class="flat-line"><path class="grid ${ze(o.state.toHome||0,e)}" id="grid" d="M0,${t.has?50:a.has?56:53} H100" vector-effect="non-scaling-stroke"></path>${Pe(e)&&o.state.toHome?R`<circle r="1" class="grid" vector-effect="non-scaling-stroke"><animateMotion dur="${n.gridToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#grid"></animateMotion></circle>`:""}</svg></div>`:""})(e,{battery:t,grid:o,individual:i,solar:a,newDur:n})} ${((e,{battery:t,grid:o,individual:i,newDur:a})=>{var n;return t.has&&Me(e,t.state.toHome)&&!(null===(n=e.entities.home)||void 0===n?void 0:n.hide)?H`<div class="lines ${Ae({high:t.has||Ne(i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":je(i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-home-flow"><path id="battery-home" class="battery-home ${ze(t.state.toHome||0,e)}" d="M55,100 v-${o.has?15:17} c0,-30 10,-30 30,-30 h20" vector-effect="non-scaling-stroke"></path>${Pe(e)&&t.state.toHome?R`<circle r="1" class="battery-home" vector-effect="non-scaling-stroke"><animateMotion dur="${a.batteryToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-home"></animateMotion></circle>`:""}</svg></div>`:""})(e,{battery:t,grid:o,individual:i,newDur:n})} ${((e,{battery:t,grid:o,individual:i,newDur:a})=>o.has&&t.has&&Me(e,Math.max(o.state.toBattery||0,t.state.toGrid||0))?H`<div class="lines ${Ae({high:t.has||Ne(i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":je(i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-grid-flow"><path id="battery-grid" class="${ze(t.state.toGrid||o.state.toBattery||0,e)}" d="M45,100 v-15 c0,-30 -10,-30 -30,-30 h-20" vector-effect="non-scaling-stroke"></path>${Pe(e)&&o.state.toBattery?R`<circle r="1" class="battery-from-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${a.batteryGrid}s" repeatCount="indefinite" keyPoints="1;0" keyTimes="0;1" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""} ${Pe(e)&&t.state.toGrid?R`<circle r="1" class="battery-to-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${a.batteryGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,newDur:n})}`,Le=["unavailable","unknown"],Ie=({main:e,className:t,template:o,value:i,entityId:a,icon:n,tap_action:r})=>i&&Le.includes(i)?H``:i||o?H`<span class="secondary-info ${t}" @click="${t=>{e.openDetails(t,r,a)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,r,a)}}">${n?H`<ha-icon class="secondary-info small" .icon="${n}"></ha-icon>`:""} ${null!=o?o:i}</span>`:H``,He=(e,t,o,i,a,n)=>{var r,l;return H`${(null===(r=null==a?void 0:a.secondary)||void 0===r?void 0:r.has)||(null===(l=null==a?void 0:a.secondary)||void 0===l?void 0:l.template)?H`${Ie({main:t,className:n,entityId:a.secondary.entity,icon:a.secondary.icon,value:$e(e,o,a.secondary.state,{unit:a.secondary.unit,unitWhiteSpace:a.secondary.unit_white_space,decimals:a.secondary.decimals,accept_negative:a.secondary.accept_negative,watt_threshold:o.watt_threshold}),tap_action:a.secondary.tap_action,template:i[`${n}Secondary`]})}`:""}`},Re=(e,t,o)=>{var i;return null===(i=e.use_new_flow_rate_model)||void 0===i||i?((e,t)=>{const o=e.max_expected_power,i=e.min_expected_power;return((e,t,o,i,a)=>e>a?o:(e-i)*(o-t)/(a-i)+t)(t,e.max_flow_rate,e.min_flow_rate,i,o)})(e,t):((e,t,o)=>{const i=null==e?void 0:e.min_flow_rate,a=null==e?void 0:e.max_flow_rate;return a-t/(o>0?o:t)*(a-i)})(e,t,o)},Fe=(e,t)=>!1!==e&&t?t:"number"==typeof e?e:1.66,Ge=(e,t,{individualObj:o,displayState:i,newDur:a,templatesObj:n,row:r,index:l})=>{var s,d,c,u,p,h,v;const _=null!==(c=null===(d=null===(s=null==t?void 0:t.entities)||void 0===s?void 0:s.individual)||void 0===d?void 0:d.findIndex((e=>e.entity===o.entity)))&&void 0!==c?c:-1;if(-1===_)return H``;const m=a.individual[_]||1.66,f=`individual-${r}-slot-${l}`,y=(o.downstream||[]).slice(0,2),[g,b]=y,w="top"===r?"left-top":"left-bottom",x=H`<div class="circle" @click="${t=>{var i;e.openDetails(t,null===(i=null==o?void 0:o.field)||void 0===i?void 0:i.tap_action,null==o?void 0:o.entity)}}" @keydown="${t=>{var i;"Enter"===t.key&&e.openDetails(t,null===(i=null==o?void 0:o.field)||void 0===i?void 0:i.tap_action,null==o?void 0:o.entity)}}">${((e,t,o,i,a,n,r)=>{var l,s,d,c,u,p,h;const v=i.individual[n],_=(null===(l=null==a?void 0:a.secondary)||void 0===l?void 0:l.has)?$e(e,o,null===(s=null==a?void 0:a.secondary)||void 0===s?void 0:s.state,{unit:(null===(d=null==a?void 0:a.secondary)||void 0===d?void 0:d.unit)||void 0,unitWhiteSpace:a.secondary.unit_white_space,decimals:(null===(c=null==a?void 0:a.secondary)||void 0===c?void 0:c.decimals)||0,accept_negative:(null===(u=null==a?void 0:a.secondary)||void 0===u?void 0:u.accept_negative)||!1,watt_threshold:o.watt_threshold}):void 0;return H`${(()=>{var e,t,o,i,n;if(v)return!0;if(!0===(null===(e=null==a?void 0:a.secondary)||void 0===e?void 0:e.displayZero))return!0;if(!(null===(t=null==a?void 0:a.secondary)||void 0===t?void 0:t.state))return!1;if(!ke(null===(o=null==a?void 0:a.secondary)||void 0===o?void 0:o.state))return!0;const r=null!==(n=null===(i=null==a?void 0:a.secondary)||void 0===i?void 0:i.displayZeroTolerance)&&void 0!==n?n:0;return Number(a.secondary.state)>=r||a.secondary.accept_negative&&"number"==typeof Number(+a.secondary.state)})()?H`${Ie({main:t,className:r,entityId:(null==a?void 0:a.secondary.entity)||void 0,icon:(null===(p=null==a?void 0:a.secondary)||void 0===p?void 0:p.icon)||void 0,value:_,template:i.individual[n]||void 0,tap_action:(null===(h=null==a?void 0:a.secondary)||void 0===h?void 0:h.tap_action)||void 0})}`:""}`})(e.hass,e,t,n,o,_,w)} ${" "!==o.icon?H`<ha-icon .icon="${o.icon}"></ha-icon>`:null} ${!1!==(null===(u=null==o?void 0:o.field)||void 0===u?void 0:u.display_zero_state)||(o.state||0)>(null!==(p=o.displayZeroTolerance)&&void 0!==p?p:0)?H`<span class="individual-${r}">${(null==o?void 0:o.showDirection)?H`<ha-icon class="small" .icon="${"top"===r?o.invertAnimation?"mdi:arrow-down":"mdi:arrow-up":o.invertAnimation?"mdi:arrow-up":"mdi:arrow-down"}"></ha-icon>`:""} ${i}</span>`:""}</div>`,k=(i,a)=>{var n,l,s,d;if(!i)return H``;const c=(o=>o&&null!==o.state&&void 0!==o.state?$e(e.hass,t,o.state,{unit:o.unit,unitWhiteSpace:o.unit_white_space,decimals:o.decimals,watt_threshold:t.watt_threshold}):"")(i),u="number"==typeof i.state?i.state:0,p=(null===(l=null===(n=e.hass.states[i.entity])||void 0===n?void 0:n.attributes)||void 0===l?void 0:l.icon)||o.icon||"mdi:flash",h=`${f}-down-${a}`,v="top"===r?0===a?"M40 40 v-40":"M40 80 v-40":0===a?"M40 40 v40":"M40 80 v40",_="bottom"===r?"0;1":"1;0";return H`<div class="downstream-item"><div class="circle downstream-circle" @click="${t=>{e.openDetails(t,void 0,i.entity)}}">${p?H`<ha-icon .icon="${p}"></ha-icon>`:null} ${c?H`<span class="downstream-value">${c}</span>`:""}</div>${Me(t,u)?H`<svg width="80" height="40"><path id="${h}" class="${ze(u,t)} downstream-line" d="${v}" vector-effect="non-scaling-stroke"></path>${Pe(t)&&u>=(null!==(s=o.displayZeroTolerance)&&void 0!==s?s:0)?R`<circle r="1.5" class="${"top"===r?"individual-top":"individual-bottom"}" vector-effect="non-scaling-stroke"><animateMotion dur="${Fe(null===(d=o.field)||void 0===d?void 0:d.calculate_flow_rate,m)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${_}" keyTimes="0;1"><mpath xlink:href="#${h}"></animateMotion></circle>`:""}</svg>`:""}</div>`},S=`${f}-main`,$=o.state||0,C="top"===r?"M40 0 v40":"M40 40 v40",E="bottom"===r?"0;1":"1;0",A=H`<div class="slot-main-flow"><svg width="80" height="40"><path id="${S}" class="${ze($,t)} individual-main-line" d="${C}" vector-effect="non-scaling-stroke"></path>${Me(t,$)&&Pe(t)&&$>=(null!==(h=o.displayZeroTolerance)&&void 0!==h?h:0)?R`<circle r="1.5" class="${"top"===r?"individual-top":"individual-bottom"}" vector-effect="non-scaling-stroke"><animateMotion dur="${Fe(null===(v=o.field)||void 0===v?void 0:v.calculate_flow_rate,m)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${E}" keyTimes="0;1"><mpath xlink:href="#${S}"></animateMotion></circle>`:""}</svg></div>`;return H`<div class="circle-container individual-slot individual-row-${r} slot-${l}">${"top"===r?H`${x} ${g||b?H`<div class="downstream-list">${k(g,0)}${k(b,1)}</div>`:""} ${A}`:H`${A} ${x} ${g||b?H`<div class="downstream-list">${k(g,0)}${k(b,1)}</div>`:""}`}</div>`},Ue=e=>null==e?void 0:e.split("|").map((e=>e.trim())),Ve=e=>{const t=Ue(e);return t.length>0?t[0]:""},We=(e,t)=>{var o;const i=Ue(t);for(const t of i)if(!ke(null===(o=e.states[t])||void 0===o?void 0:o.state))return!1;return i.length>0};var Ze="0.2.6";console.groupCollapsed(`%c⚡ Power Flow Card Plus v${Ze} is installed`,"color: #488fc2; font-weight: bold"),console.log("Readme:","https://github.com/flixlix/power-flow-card-plus"),console.groupEnd();const Ke=function(e,t,o){var i;return void 0===o&&(o=!1),function(){var t=[].slice.call(arguments),a=this,n=o&&!i;clearTimeout(i),i=setTimeout((function(){i=null,o||e.apply(a,t)}),6e4),n&&e.apply(a,t)}}((e=>{console.log(`%c⚡ Power Flow Card Plus v${Ze} %cError: ${e}`,"color: #488fc2; font-weight: bold","color: #b33a3a; font-weight: normal")})),Ye=e=>{Ke(`Entity "${null!=e?e:"Unknown"}" is not available or misconfigured`)},qe=(e,t)=>{if(!t||!We(e,t))return Ye(t),null;const o=Ue(t);let i,a=0;for(const t of o)i=Se(e.states[t].state),a+=i;return a},Xe=["K","M","G","T","P","E","Z","Y"],Je=(e,t)=>{var o;const i=qe(e,t);if(!t||null===i)return 0;const a=null!==(o=e.states[Ve(t)].attributes.unit_of_measurement)&&void 0!==o?o:"";return Qe(i,a)},Qe=(e,t)=>{const o=t.toUpperCase().slice(0,1),i=Xe.indexOf(o);return i>-1?e*Math.pow(1e3,i+1):e},et=(e,t,{nonFossil:o,entities:i,templatesObj:a,grid:n,newDur:r})=>{var l,s,d;return H`${o.hasPercentage?H`<div class="circle-container low-carbon"><span class="label">${o.name}</span><div class="circle" @click="${t=>{var o,a;e.openDetails(t,null===(o=i.fossil_fuel_percentage)||void 0===o?void 0:o.tap_action,null===(a=i.fossil_fuel_percentage)||void 0===a?void 0:a.entity)}}" @keyDown="${t=>{var o,a;"Enter"===t.key&&e.openDetails(t,null===(o=i.fossil_fuel_percentage)||void 0===o?void 0:o.tap_action,null===(a=i.fossil_fuel_percentage)||void 0===a?void 0:a.entity)}}">${He(e.hass,e,t,a,o,"low-carbon")} ${" "!==o.icon?H`<ha-icon id="low-carbon-icon" .icon="${o.icon}">`:null} ${!1!==(null===(l=i.fossil_fuel_percentage)||void 0===l?void 0:l.display_zero_state)||(o.state.power||0)>((null===(s=i.fossil_fuel_percentage)||void 0===s?void 0:s.display_zero_tolerance)||0)?H`<span class="low-carbon">${((e,t,o,i)=>{var a,n,r,l,s,d,c,u,p;if(!o||!We(e,o))return Ye(o),"NaN";const h=null===(n=null===(a=t.entities.fossil_fuel_percentage)||void 0===a?void 0:a.unit_white_space)||void 0===n||n,v="percentage"===(null===(r=t.entities.fossil_fuel_percentage)||void 0===r?void 0:r.state_type)?"%":"W",_=1-(null!==(l=qe(e,o))&&void 0!==l?l:0)/100;let m;m="string"==typeof(null===(s=t.entities.grid)||void 0===s?void 0:s.entity)?i:Je(e,null===(d=t.entities.grid)||void 0===d?void 0:d.entity.consumption)||0;const f=null!==(u=null===(c=t.entities.fossil_fuel_percentage)||void 0===c?void 0:c.display_zero_tolerance)&&void 0!==u?u:0;if("W"===v){let o=m*_;return f&&o<f&&(o=0),$e(e,t,o,{unitWhiteSpace:h,watt_threshold:t.watt_threshold})}let y=100-(null!==(p=qe(e,o))&&void 0!==p?p:0);return f&&y<f&&(y=0),$e(e,t,y,{unit:"%",unitWhiteSpace:h,decimals:0,watt_threshold:t.watt_threshold})})(e.hass,t,i.fossil_fuel_percentage.entity,n.state.fromGrid)}</span>`:""}</div>${Me(t,o.state.power||0)?H`<svg width="80" height="30"><path d="M40 -10 v40" class="low-carbon ${ze(o.state.power||0,t)}" id="low-carbon"/>${Pe(t)&&o.has&&o.state.power>0?R`<circle r="1.75" class="low-carbon" vector-effect="non-scaling-stroke"><animateMotion dur="${Fe(null===(d=i.fossil_fuel_percentage)||void 0===d?void 0:d.calculate_flow_rate,r.nonFossil)}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#low-carbon"></animateMotion></circle>`:""}</svg>`:""}</div>`:H`<div class="spacer"></div>`}`},tt=(e,t)=>{var o;return!!(null===(o=e.entities[t])||void 0===o?void 0:o.invert_state)},ot=e=>Math.abs(Math.min(e,0)),it=e=>Math.max(e,0),at=(e,t,o)=>{var i,a,n;const r=null===(n=null===(a=null===(i=t.entities)||void 0===i?void 0:i[o])||void 0===a?void 0:a.secondary_info)||void 0===n?void 0:n.entity;if("string"!=typeof r)return null;const l=e.states[Ve(r)].state;return ke(l)?Number(l):l},nt=(e,t,o)=>{var i;const a=null===(i=t.entities[o])||void 0===i?void 0:i.entity;if(void 0===a)return null;if("string"==typeof a){const i=Je(e,a);return tt(t,o)?it(i):ot(i)}return Je(e,a.production)},rt=(e,t,o)=>{var i;const a=null===(i=t.entities[o])||void 0===i?void 0:i.entity;if(void 0===a)return null;if("string"==typeof a){const i=Je(e,a);return tt(t,o)?ot(i):it(i)}return Je(e,a.consumption)},lt=(e,t)=>{var o;const i=null===(o=t.entities.battery)||void 0===o?void 0:o.state_of_charge;return void 0===i?null:qe(e,i)},st=(e,t)=>nt(e,t,"battery"),dt=(e,t)=>rt(e,t,"battery"),ct=(e,t)=>rt(e,t,"grid"),ut=(e,t)=>at(e,t,"grid"),pt=(e,t)=>at(e,t,"home"),ht=(e,t)=>{if(t&&We(e,t))return e.states[Ve(t)];Ye(t)},vt=(e,t,o)=>{var i,a,n,r,l,s,d,c;return(null==t?void 0:t.icon)?t.icon:(null==t?void 0:t.use_metadata)?"string"==typeof(null==t?void 0:t.entity)?(null===(a=null===(i=ht(e,null==t?void 0:t.entity))||void 0===i?void 0:i.attributes)||void 0===a?void 0:a.icon)||o:(null===(l=null===(r=ht(e,null===(n=null==t?void 0:t.entity)||void 0===n?void 0:n.consumption))||void 0===r?void 0:r.attributes)||void 0===l?void 0:l.icon)||(null===(c=null===(d=ht(e,null===(s=null==t?void 0:t.entity)||void 0===s?void 0:s.production))||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.icon)||o:o},_t=(e,t,o)=>{var i,a,n,r,l,s,d,c;return(null==t?void 0:t.name)?t.name:(null==t?void 0:t.use_metadata)?"string"==typeof(null==t?void 0:t.entity)?(null===(a=null===(i=ht(e,t.entity))||void 0===i?void 0:i.attributes)||void 0===a?void 0:a.friendly_name)||o:(null===(l=null===(r=ht(e,null===(n=null==t?void 0:t.entity)||void 0===n?void 0:n.consumption))||void 0===r?void 0:r.attributes)||void 0===l?void 0:l.friendly_name)||(null===(c=null===(d=ht(e,null===(s=null==t?void 0:t.entity)||void 0===s?void 0:s.production))||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.friendly_name)||o:o},mt=(e,t)=>{var o;if("string"!=typeof(null==t?void 0:t.entity))return null;const i=ht(e,null===(o=null==t?void 0:t.secondary_info)||void 0===o?void 0:o.entity),a=null==i?void 0:i.state;return ke(a)?Number(a):a},ft=(e,t)=>!!e&&e>=t,yt=(e,t)=>e?t?ft(e,t)?e:0:e:0,gt={field:void 0,entity:"",has:!1,state:null,displayZero:!1,displayZeroTolerance:0,icon:"",name:"",color:null,unit:void 0,unit_white_space:!1,invertAnimation:!1,showDirection:!1,secondary:{entity:null,template:null,has:!1,state:null,icon:null,unit:null,unit_white_space:!1,displayZero:!1,accept_negative:!1,displayZeroTolerance:0,decimals:null},downstream:[]},bt=(e,t)=>{var o,i,a,n,r,l,s,d,c,u,p,h,v;if(!t||!(null==t?void 0:t.entity))return gt;const _=t.entity,m=((e,t)=>{const o=null==t?void 0:t.entity;if(void 0===o)return null;const i=Je(e,o);return Math.abs(i)})(e,t),f=(null==t?void 0:t.display_zero)||!1,y=(null==t?void 0:t.display_zero_tolerance)||0,g=((e,t,o)=>!!e||!!ft(t,o))(f,m,y),b=m&&m<0,w=(null==t?void 0:t.inverted_animation)||!1,x=b?!w:w,k=(null==t?void 0:t.color)&&"string"==typeof(null==t?void 0:t.color)?null==t?void 0:t.color:null,S=null!==(i=null===(o=t.downstream)||void 0===o?void 0:o.map((t=>{var o,i;const a=t.entity,n=Je(e,a),r=null===n||Number.isNaN(n)?qe(e,a):n,l=e.states[a];return{entity:a,name:t.name||(null===(o=null==l?void 0:l.attributes)||void 0===o?void 0:o.friendly_name)||a,state:null!=r?r:null,unit:t.unit_of_measurement||("string"==typeof(null===(i=null==l?void 0:l.attributes)||void 0===i?void 0:i.unit_of_measurement)?l.attributes.unit_of_measurement:void 0),unit_white_space:!1!==t.unit_white_space,decimals:t.decimals}})))&&void 0!==i?i:[];return{field:t,entity:_,has:g,state:m,displayZero:f,displayZeroTolerance:y,icon:vt(e,t,"mdi:flash"),name:_t(e,t,"Individual"),color:k,unit:null==t?void 0:t.unit_of_measurement,unit_white_space:!1!==(null==t?void 0:t.unit_white_space),decimals:null==t?void 0:t.decimals,invertAnimation:x,showDirection:(null==t?void 0:t.show_direction)||!1,secondary:{entity:(null===(a=null==t?void 0:t.secondary_info)||void 0===a?void 0:a.entity)||null,template:(null===(n=null==t?void 0:t.secondary_info)||void 0===n?void 0:n.template)||null,has:void 0!==(null===(r=null==t?void 0:t.secondary_info)||void 0===r?void 0:r.entity),state:mt(e,t)||null,accept_negative:(null===(l=null==t?void 0:t.secondary_info)||void 0===l?void 0:l.accept_negative)||!1,icon:(null===(s=null==t?void 0:t.secondary_info)||void 0===s?void 0:s.icon)||null,unit:(null===(d=null==t?void 0:t.secondary_info)||void 0===d?void 0:d.unit_of_measurement)||null,unit_white_space:!1!==(null===(c=null==t?void 0:t.secondary_info)||void 0===c?void 0:c.unit_white_space),displayZero:(null===(u=null==t?void 0:t.secondary_info)||void 0===u?void 0:u.display_zero)||!1,displayZeroTolerance:(null===(p=null==t?void 0:t.secondary_info)||void 0===p?void 0:p.display_zero_tolerance)||0,decimals:(null===(h=null==t?void 0:t.secondary_info)||void 0===h?void 0:h.decimals)||null,tap_action:null===(v=null==t?void 0:t.secondary_info)||void 0===v?void 0:v.tap_action},downstream:S}},wt=(e,t)=>{var o;const i=t.entities.fossil_fuel_percentage;t.entities.grid;const a=null==i?void 0:i.entity,n=null==i?void 0:i.display_zero,r=ct(e,t);return void 0!==a&&(!0===n||null!==r&&1*r-(null!==(o=qe(e,a))&&void 0!==o?o:0)/100>0)},xt=(e,t)=>{var o;const i=t.entities.fossil_fuel_percentage;t.entities.grid;const a=null==i?void 0:i.entity,n=null==i?void 0:i.display_zero,r=ct(e,t);return void 0!==a&&(!0===n||null!==r&&!1!==wt(e,t)&&1*r-(null!==(o=qe(e,a))&&void 0!==o?o:0)/100>0)},kt=(e,t)=>at(e,t,"fossil_fuel_percentage"),St=(e,t)=>{var o;const i=null===(o=t.entities.solar)||void 0===o?void 0:o.entity;if(void 0===i)return null;const a=Je(e,i);return tt(t,"solar")?ot(a):it(a)},$t=(e,t)=>at(e,t,"solar"),Ct=r`:host{--size-circle-entity:79.99px;--mdc-icon-size:24px;--clickable-cursor:pointer;--individual-left-bottom-color:#d0cc5b;--individual-left-top-color:#964cb5;--individual-right-top-color:#b54c9d;--individual-right-bottom-color:#5bd0cc;--non-fossil-color:var(--energy-non-fossil-color, #0f9d58);--icon-non-fossil-color:var(--non-fossil-color, #0f9d58);--icon-solar-color:var(--energy-solar-color, #ff9800);--icon-individual-bottom-color:var(--individual-left-bottom-color, #d0cc5b);--icon-individual-top-color:var(--individual-left-top-color, #964cb5);--icon-grid-color:var(--energy-grid-consumption-color, #488fc2);--icon-battery-color:var(--energy-battery-in-color, #f06292);--icon-home-color:var(--energy-grid-consumption-color, #488fc2);--text-solar-color:var(--primary-text-color);--text-non-fossil-color:var(--primary-text-color);--text-individual-bottom-color:var(--primary-text-color);--text-individual-top-color:var(--primary-text-color);--text-home-color:var(--primary-text-color);--secondary-text-individual-bottom-color:var(--primary-text-color);--secondary-text-individual-top-color:var(--primary-text-color);--text-battery-state-of-charge-color:var(--primary-text-color);--cirlce-grid-color:var(--energy-grid-consumption-color, #488fc2);--circle-battery-color:var(--energy-battery-in-color, #f06292);--battery-grid-line:var(--energy-grid-return-color, #8353d1);--secondary-text-solar-color:var(--primary-text-color);--secondary-text-grid-color:var(--primary-text-color);--secondary-text-home-color:var(--primary-text-color);--secondary-text-non-fossil-color:var(--primary-text-color);--lines-svg-not-flat-line-height:106%;--lines-svg-not-flat-line-top:-2%;--lines-svg-flat-width:calc(100% - 160px);--lines-svg-not-flat-width:calc(103% - 165px);--lines-svg-not-flat-multi-indiv-height:104%;--lines-svg-not-flat-multi-indiv-width:calc(103% - var(--size-circle-entity) * 3.7);--lines-svg-not-flat-multi-indiv-width:calc(((106% - 165px) * 0.5));--lines-svg-not-flat-multi-indiv-width:calc(((130% - 246px) * 0.5));--lines-svg-not-flat-multi-indiv-right-indiv-width:calc(((130% - 210px) * 0.5));--lines-svg-not-flat-multi-indiv-right-indiv-height:103%;--lines-svg-flat-multi-indiv-width:calc((129% - 242px) * 0.5);--lines-svg-flat-left:0;--lines-svg-not-flat-left:0;--dot-size:3.5px;--transparency:var(--transparency-unused-lines);--greyed-out--line-color:#bdbdbd;--text-grid-consumption-color:var(--energy-grid-consumption-color);--text-grid-return-color:var(--energy-grid-return-color);--text-battery-in-color:var(--energy-battery-in-color);--text-battery-out-color:var(--energy-battery-out-color);--home-circle-animation:rotate-in 0.6s ease-in}ha-card{overflow:hidden}ha-card.full-size{height:100%}.card-content.full-size{transform:scale(2) translateY(30%)}.card-content{position:relative;margin:0 auto}.circle{width:80px;height:80px;border-radius:50%;box-sizing:border-box;border:2px solid;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;font-size:12px;line-height:12px;position:relative;text-decoration:none;color:var(--primary-text-color);gap:2px}.card-content,.row{max-width:470px}.lines{position:absolute;bottom:0;left:var(--size-circle-entity);width:100%;height:146px;display:flex;justify-content:flex-start;padding:0 16px 16px;box-sizing:border-box}:dir(rtl) .lines{justify-content:flex-end}.lines:not(.multi-individual) svg.flat-line{left:var(--lines-svg-flat-left)}.lines:not(.multi-individual) svg:not(.flat-line){left:var(--lines-svg-not-flat-left)}.lines:has(svg:not(.flat-line)){margin-left:-1%}.lines.individual-bottom-individual-top{bottom:110px}.lines.high{bottom:100px;height:156px}.lines svg{width:var(--lines-svg-flat-width);height:100%;max-width:340px;position:relative}.lines svg:not(.flat-line){width:var(--lines-svg-not-flat-width);height:var(--lines-svg-not-flat-line-height);top:var(--lines-svg-not-flat-line-top)}.multi-individual{left:calc(var(--size-circle-entity) + 2%);margin-left:-2.2%!important}.multi-individual svg{width:var(--lines-svg-flat-multi-indiv-width)}.multi-individual svg:not(.flat-line){width:var(--lines-svg-not-flat-multi-indiv-width);margin-top:1px;height:var(--lines-svg-not-flat-multi-indiv-height)}.row{display:flex;justify-content:space-between;max-width:500px;margin:0 auto}.top-individuals-row{margin-bottom:12px}.bottom-individuals-row{margin-top:12px}.extra-individual,.extra-individual-value,.extra-individuals-column,.extra-individuals-row{display:none}.circle-container{display:flex;flex-direction:column;align-items:center;position:relative}.individual-slot{width:var(--size-circle-entity)}.slot-main-flow{height:40px;display:flex;align-items:center;justify-content:center}.circle-container.solar{height:130px}.circle-container.individual-top{height:130px}.circle-container.individual-bottom{justify-content:flex-end}.circle-container.individual-bottom.bottom{position:relative;top:-20px;margin-bottom:-20px}.circle-container.battery{height:110px;justify-content:flex-end}.downstream-list{margin-top:4px;display:flex;flex-direction:column;gap:4px}.downstream-item{display:flex;flex-direction:column;align-items:center}.downstream-label{color:var(--secondary-text-color);font-size:11px;max-width:72px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;min-height:16px}.downstream-circle{width:64px;height:64px;margin-top:2px}.downstream-value{font-size:11px}.spacer{width:var(--size-circle-entity)}.circle-container .circle{cursor:var(--clickable-cursor)}#battery-grid{stroke:var(--battery-grid-line)}ha-icon{display:inline;padding-bottom:2px}ha-icon.small{--mdc-icon-size:12px}.label{color:var(--secondary-text-color);font-size:12px;max-width:80px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;min-height:20px}line,path{stroke:var(--disabled-text-color);stroke-width:1;fill:none}path.transparency{opacity:calc(calc(100 - var(--transparency))/ 100)}path.grey{stroke:var(--greyed-out--line-color)!important}.circle svg{position:absolute;fill:none;stroke-width:4px;width:100%;height:100%;top:0;left:0}span.secondary-info{color:var(--primary-text-color);font-size:12px;max-width:60px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.individual-top circle,.individual-top path{stroke:var(--individual-left-top-color)}#individual-left-bottom-icon{color:var(--icon-individual-left-bottom-color)}#individual-left-top-icon{color:var(--icon-individual-left-top-color)}#individual-right-bottom-icon{color:var(--icon-individual-right-bottom-color)}#individual-right-top-icon{color:var(--icon-individual-right-top-color)}#solar-icon{color:var(--icon-solar-color)}circle.individual-top{stroke-width:4;width:var(--dot-size);fill:var(--individual-left-top-color)}circle.individual-bottom{stroke-width:4;width:var(--dot-size);fill:var(--individual-left-bottom-color)}.individual-top .circle{border-color:var(--individual-left-top-color)}.individual-bottom circle,.individual-bottom path{stroke:var(--individual-left-bottom-color)}.individual-bottom .circle{border-color:var(--individual-left-bottom-color)}.individual-right-top .circle{border-color:var(--individual-right-top-color)}circle.individual-right-top .circle{fill:var(--individual-right-top-color)}.individual-right-top circle,.individual-right-top path{stroke:var(--individual-right-top-color)}.individual-right-bottom .circle{border-color:var(--individual-right-bottom-color)}circle.individual-right-bottom .circle{fill:var(--individual-right-bottom-color)}.individual-right-bottom circle,.individual-right-bottom path{stroke:var(--individual-right-bottom-color)}.right-individual-flow-container{position:absolute;right:calc(var(--size-circle-entity) - 27% * 1.1 + 6px);width:100%;display:flex;justify-content:flex-end;height:156px;bottom:100px;padding:0 16px 16px;margin-right:-1.2%;box-sizing:border-box;pointer-events:none}.right-individual-flow-container>svg{width:var(--lines-svg-not-flat-multi-indiv-right-indiv-width)}.right-individual-flow{height:var(--lines-svg-not-flat-multi-indiv-right-indiv-height);margin-top:2px;width:var(--lines-svg-not-flat-multi-indiv-width);top:var(--lines-svg-not-flat-line-top);max-width:340px;position:relative}.circle-container.low-carbon{height:130px}.low-carbon path{stroke:var(--non-fossil-color)}.low-carbon .circle{border-color:var(--non-fossil-color)}.low-carbon ha-icon:not(.small){color:var(--icon-non-fossil-color)}circle.low-carbon{stroke-width:4;fill:var(--non-fossil-color);stroke:var(--non-fossil-color)}.solar{color:var(--primary-text-color)}.solar .circle{border-color:var(--energy-solar-color)}.solar ha-icon:not(.small){color:var(--icon-solar-color)}circle.solar,path.solar{stroke:var(--energy-solar-color)}circle.solar{stroke-width:4;fill:var(--energy-solar-color)}.battery .circle{border-color:var(--circle-battery-color)}circle.battery,path.battery{stroke:var(--energy-battery-out-color)}circle.battery-home,path.battery-home{stroke:var(--energy-battery-out-color)}circle.battery-home{stroke-width:4;fill:var(--energy-battery-out-color)}circle.battery-solar,path.battery-solar{stroke:var(--energy-battery-in-color)}circle.battery-solar{stroke-width:4;fill:var(--energy-battery-in-color)}.battery-in{color:var(--energy-battery-in-color)}.battery-out{color:var(--energy-battery-out-color)}span.battery-in{color:var(--text-battery-in-color)}span.battery-out{color:var(--text-battery-out-color)}path.battery-from-grid{stroke:var(--energy-grid-consumption-color)}path.battery-to-grid{stroke:var(--battery-grid-line)}.battery ha-icon:not(.small){color:var(--icon-battery-color)}circle.battery-to-grid,circle.return,path.return{stroke:var(--energy-grid-return-color)}circle.battery-to-grid,circle.return{stroke-width:4;fill:var(--energy-grid-return-color)}.return{color:var(--energy-grid-return-color)}span.return{color:var(--text-grid-return-color)}.grid .circle{border-color:var(--circle-grid-color)}.consumption{color:var(--energy-grid-consumption-color)}span.consumption{color:var(--text-grid-consumption-color)}circle.battery-from-grid,circle.grid,path.grid{stroke:var(--energy-grid-consumption-color)}circle.battery-from-grid,circle.grid{stroke-width:4;fill:var(--energy-grid-consumption-color)}.grid ha-icon:not(.small){color:var(--icon-grid-color)}.home .circle{border-width:0;border-color:var(--primary-color)}.home .circle.border{border-width:2px}.home ha-icon:not(.small){color:var(--icon-home-color)}.circle svg circle{animation:var(--home-circle-animation);transition:stroke-dashoffset .4s,stroke-dasharray .4s;fill:none}span.solar{color:var(--text-solar-color)}span.low-carbon{color:var(--text-non-fossil-color)}span.low-carbon.secondary-info{color:var(--secondary-text-non-fossil-color)}#home-circle{color:var(--text-home-color);z-index:2}.individual-bottom .circle{color:var(--text-individual-bottom-color)}.individual-top .circle{color:var(--text-individual-top-color)}.individual-bottom span.secondary-info{color:var(--secondary-text-individual-bottom-color)}.individual-top span.secondary-info{color:var(--secondary-text-individual-top-color)}span.secondary-info.left-top{color:var(--secondary-text-individual-left-top-color)}span.individual-left-top{color:var(--text-individual-left-top-color)}span.secondary-info.left-bottom{color:var(--secondary-text-individual-left-bottom-color)}span.individual-left-bottom{color:var(--text-individual-left-bottom-color)}span.secondary-info.right-top{color:var(--secondary-text-individual-right-top-color)}span.individual-right-top{color:var(--text-individual-right-top-color)}span.secondary-info.right-bottom{color:var(--secondary-text-individual-right-bottom-color)}span.individual-right-bottom{color:var(--text-individual-right-bottom-color)}.solar span.secondary-info{color:var(--secondary-text-solar-color)}.grid span.secondary-info{color:var(--secondary-text-grid-color)}.home span.secondary-info{color:var(--secondary-text-home-color)}#battery-state-of-charge-text{color:var(--text-battery-state-of-charge-color)}@keyframes rotate-in{from{stroke-dashoffset:238.76104;stroke-dasharray:238.76104}}.card-actions{display:flex;justify-content:space-between;align-items:center}.card-actions a{text-decoration:none}.home-circle-sections{pointer-events:none}`,Et=e=>e?"#".concat(e.map((e=>e.toString(16).padStart(2,"0"))).join("")):"",At=(e,t,o)=>{let i="var(--primary-text-color)";return"string"==typeof e&&(i=t[e].color),!0===e&&(i=t[o].color),i},Mt={maxFlowRate:6,minFlowRate:.75,wattDecimals:0,kilowattDecimals:1,minExpectedPower:.01,maxExpectedPower:2e3,wattThreshold:1e3,transparencyZeroLines:0,displayZeroLines:{mode:"show",transparency:50,grey_color:[189,189,189]}},zt=238.76104;!function(e){const t=window;t.customCards=t.customCards||[],t.customCards.push(Object.assign(Object.assign({},{type:"power-flow-card-plus",name:"Power Flow Card Plus",description:"An extended version of the power flow card with richer options, advanced features and a few small UI enhancements. Inspired by the Energy Dashboard."}),{preview:!0,documentationURL:"https://github.com/flixlix/power-flow-card-plus"}))}();let Pt=class extends se{constructor(){super(...arguments),this._config={},this._templateResults={},this._unsubRenderTemplates=new Map,this._width=0,this.previousDur={}}setConfig(e){var t,o,i,a,n,r,l,s,d,c,u;if(e.entities.individual1||e.entities.individual2)throw new Error("You are using an outdated configuration. Please update your configuration to the latest version.");if(!e.entities||!(null===(o=null===(t=e.entities)||void 0===t?void 0:t.battery)||void 0===o?void 0:o.entity)&&!(null===(a=null===(i=e.entities)||void 0===i?void 0:i.grid)||void 0===a?void 0:a.entity)&&!(null===(r=null===(n=e.entities)||void 0===n?void 0:n.solar)||void 0===r?void 0:r.entity))throw new Error("At least one entity for battery, grid or solar must be defined");this._config=Object.assign(Object.assign({},e),{kw_decimals:Se(e.kw_decimals,Mt.kilowattDecimals),min_flow_rate:Se(e.min_flow_rate,Mt.minFlowRate),max_flow_rate:Se(e.max_flow_rate,Mt.maxFlowRate),w_decimals:Se(e.w_decimals,Mt.wattDecimals),watt_threshold:Se(e.watt_threshold,Mt.wattThreshold),max_expected_power:Se(e.max_expected_power,Mt.maxExpectedPower),min_expected_power:Se(e.min_expected_power,Mt.minExpectedPower),display_zero_lines:{mode:null!==(s=null===(l=e.display_zero_lines)||void 0===l?void 0:l.mode)&&void 0!==s?s:Mt.displayZeroLines.mode,transparency:Se(null===(d=e.display_zero_lines)||void 0===d?void 0:d.transparency,Mt.displayZeroLines.transparency),grey_color:null!==(u=null===(c=e.display_zero_lines)||void 0===c?void 0:c.grey_color)&&void 0!==u?u:Mt.displayZeroLines.grey_color}})}connectedCallback(){super.connectedCallback(),this._tryConnectAll()}disconnectedCallback(){this._tryDisconnectAll()}static async getConfigElement(){return await Promise.resolve().then((function(){return ja})),document.createElement("power-flow-card-plus-editor")}static getStubConfig(e){return function(e){function t(t,o){const i=Ve(t),a=e.states[i].attributes.friendly_name;return o.some((e=>i.includes(e)||(null==a?void 0:a.includes(e))))}const o=Object.keys(e.states).filter((t=>{const o=e.states[Ve(t)];return o.state&&o.attributes&&"power"===o.attributes.device_class||o.entity_id.includes("power")})),i=["grid","utility","net","meter"],a=["solar","pv","photovoltaic","inverter"],n=["battery"],r=["battery_percent","battery_level","state_of_charge","soc","percentage"],l=o.filter((e=>t(e,i)))[0],s=o.filter((e=>t(e,a)))[0],d=o.filter((e=>t(e,n)))[0],c=Object.keys(e.states).filter((t=>{const o=e.states[t];return o&&o.state&&o.attributes&&"%"===o.attributes.unit_of_measurement})).filter((e=>t(e,r)))[0];return{entities:{battery:{entity:null!=d?d:"",state_of_charge:null!=c?c:""},grid:l?{entity:l}:void 0,solar:s?{entity:s,display_zero_state:!0}:void 0},clickable_entities:!0,display_zero_lines:!0,use_new_flow_rate_model:!0,w_decimals:Mt.wattDecimals,kw_decimals:Mt.kilowattDecimals,min_flow_rate:Mt.minFlowRate,max_flow_rate:Mt.maxFlowRate,max_expected_power:Mt.maxExpectedPower,min_expected_power:Mt.minExpectedPower,watt_threshold:Mt.wattThreshold,transparency_zero_lines:Mt.transparencyZeroLines,sort_individual_devices:!1}}(e)}getCardSize(){return 3}openDetails(e,t,o){if(e.stopPropagation(),t)(async(e,t,o,i)=>{((e,t,o,i)=>{i=i||{},o=null==o?{}:o;const a=new Event("hass-action",{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});a.detail=o,e.dispatchEvent(a)})(e,0,{config:o,action:i})})(e.target,this.hass,{entity:o,tap_action:t},"tap");else{if(!o||!this._config.clickable_entities)return;if(!((e,t)=>{const o=Ue(t);for(const t of o)if(!(t in e.states))return!1;return!0})(this.hass,o))return;const e=new CustomEvent("hass-more-info",{composed:!0,detail:{entityId:o}});this.dispatchEvent(e)}}render(){var e,t,o,i,a,n,r,l,s,d,c,u,p,h,v,_,m,f,y,g,b,w,x,k,S,$,C,E,A,M,z,P,D,T,O,N,j,B,L,I,F,G,U,V,W,Z,K,Y,q,X,J,Q,ee,te,oe,ie,ae,ne,re,le,se,de,ce,ue,pe,he,ve,_e,me,fe,ye,ge,be,we,xe,ke,Se,Ce,Ee,Ae,Me,ze,Pe,De,Ne,Le,Ie,Fe,Ue,Ve,We,Ze,Ke,Ye,Xe,Qe,tt,ot,it,at,rt,ht,mt,ft,gt,Ct,Mt,Pt,Dt,Tt,Ot,Nt,jt,Bt,Lt,It,Ht,Rt,Ft,Gt,Ut,Vt,Wt,Zt,Kt,Yt,qt,Xt,Jt,Qt,eo,to,oo,io,ao,no,ro,lo,so,co,uo,po,ho,vo,_o,mo,fo,yo,go,bo,wo,xo,ko,So,$o,Co,Eo,Ao,Mo,zo,Po,Do,To,Oo,No,jo,Bo,Lo,Io,Ho,Ro,Fo,Go,Uo,Vo,Wo,Zo,Ko,Yo,qo,Xo,Jo,Qo,ei,ti,oi,ii,ai,ni,ri,li,si,di,ci,ui,pi;if(!this._config||!this.hass)return H``;const{entities:hi}=this._config;this.style.setProperty("--clickable-cursor",this._config.clickable_entities?"pointer":"default");const vi=null,_i={entity:null===(e=hi.grid)||void 0===e?void 0:e.entity,has:void 0!==(null===(t=null==hi?void 0:hi.grid)||void 0===t?void 0:t.entity),hasReturnToGrid:"string"==typeof(null===(o=hi.grid)||void 0===o?void 0:o.entity)||!!(null===(a=null===(i=hi.grid)||void 0===i?void 0:i.entity)||void 0===a?void 0:a.production),state:{fromGrid:ct(this.hass,this._config),toGrid:(mi=this.hass,fi=this._config,nt(mi,fi,"grid")),toBattery:vi,toHome:vi},powerOutage:{has:void 0!==(null===(r=null===(n=hi.grid)||void 0===n?void 0:n.power_outage)||void 0===r?void 0:r.entity),isOutage:(hi.grid&&(null===(s=this.hass.states[null===(l=hi.grid.power_outage)||void 0===l?void 0:l.entity])||void 0===s?void 0:s.state))===(null!==(u=null===(c=null===(d=hi.grid)||void 0===d?void 0:d.power_outage)||void 0===c?void 0:c.state_alert)&&void 0!==u?u:"on"),icon:(null===(h=null===(p=hi.grid)||void 0===p?void 0:p.power_outage)||void 0===h?void 0:h.icon_alert)||"mdi:transmission-tower-off",name:null!==(m=null===(_=null===(v=hi.grid)||void 0===v?void 0:v.power_outage)||void 0===_?void 0:_.label_alert)&&void 0!==m?m:H`Power<br>Outage`,entityGenerator:null===(y=null===(f=hi.grid)||void 0===f?void 0:f.power_outage)||void 0===y?void 0:y.entity_generator},icon:vt(this.hass,hi.grid,"mdi:transmission-tower"),name:_t(this.hass,hi.grid,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.grid")),mainEntity:"object"==typeof(null===(g=hi.grid)||void 0===g?void 0:g.entity)?hi.grid.entity.consumption||hi.grid.entity.production:null===(b=hi.grid)||void 0===b?void 0:b.entity,color:{fromGrid:null===(x=null===(w=hi.grid)||void 0===w?void 0:w.color)||void 0===x?void 0:x.consumption,toGrid:null===(S=null===(k=hi.grid)||void 0===k?void 0:k.color)||void 0===S?void 0:S.production,icon_type:null===($=hi.grid)||void 0===$?void 0:$.color_icon,circle_type:null===(C=hi.grid)||void 0===C?void 0:C.color_circle},tap_action:null===(E=hi.grid)||void 0===E?void 0:E.tap_action,secondary:{entity:null===(M=null===(A=hi.grid)||void 0===A?void 0:A.secondary_info)||void 0===M?void 0:M.entity,decimals:null===(P=null===(z=hi.grid)||void 0===z?void 0:z.secondary_info)||void 0===P?void 0:P.decimals,template:null===(T=null===(D=hi.grid)||void 0===D?void 0:D.secondary_info)||void 0===T?void 0:T.template,has:void 0!==(null===(N=null===(O=hi.grid)||void 0===O?void 0:O.secondary_info)||void 0===N?void 0:N.entity),state:ut(this.hass,this._config),icon:null===(B=null===(j=hi.grid)||void 0===j?void 0:j.secondary_info)||void 0===B?void 0:B.icon,unit:null===(I=null===(L=hi.grid)||void 0===L?void 0:L.secondary_info)||void 0===I?void 0:I.unit_of_measurement,unit_white_space:null===(G=null===(F=hi.grid)||void 0===F?void 0:F.secondary_info)||void 0===G?void 0:G.unit_white_space,accept_negative:(null===(V=null===(U=hi.grid)||void 0===U?void 0:U.secondary_info)||void 0===V?void 0:V.accept_negative)||!1,color:{type:null===(Z=null===(W=hi.grid)||void 0===W?void 0:W.secondary_info)||void 0===Z?void 0:Z.color_value},tap_action:null===(Y=null===(K=hi.grid)||void 0===K?void 0:K.secondary_info)||void 0===Y?void 0:Y.tap_action}};var mi,fi;const yi=void 0!==(null===(q=hi.solar)||void 0===q?void 0:q.entity),gi=null!==(X=St(this.hass,this._config))&&void 0!==X&&X,bi=!1!==(null===(J=hi.solar)||void 0===J?void 0:J.display_zero)||gi,wi={entity:null===(Q=hi.solar)||void 0===Q?void 0:Q.entity,has:yi&&bi,state:{total:St(this.hass,this._config),toHome:vi,toGrid:vi,toBattery:vi},icon:vt(this.hass,hi.solar,"mdi:solar-power"),name:_t(this.hass,hi.solar,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.solar")),tap_action:null===(ee=hi.solar)||void 0===ee?void 0:ee.tap_action,secondary:{entity:null===(oe=null===(te=hi.solar)||void 0===te?void 0:te.secondary_info)||void 0===oe?void 0:oe.entity,decimals:null===(ae=null===(ie=hi.solar)||void 0===ie?void 0:ie.secondary_info)||void 0===ae?void 0:ae.decimals,template:null===(re=null===(ne=hi.solar)||void 0===ne?void 0:ne.secondary_info)||void 0===re?void 0:re.template,has:void 0!==(null===(se=null===(le=hi.solar)||void 0===le?void 0:le.secondary_info)||void 0===se?void 0:se.entity),accept_negative:(null===(ce=null===(de=hi.solar)||void 0===de?void 0:de.secondary_info)||void 0===ce?void 0:ce.accept_negative)||!1,state:$t(this.hass,this._config),icon:null===(pe=null===(ue=hi.solar)||void 0===ue?void 0:ue.secondary_info)||void 0===pe?void 0:pe.icon,unit:null===(ve=null===(he=hi.solar)||void 0===he?void 0:he.secondary_info)||void 0===ve?void 0:ve.unit_of_measurement,unit_white_space:null===(me=null===(_e=hi.solar)||void 0===_e?void 0:_e.secondary_info)||void 0===me?void 0:me.unit_white_space,tap_action:null===(ye=null===(fe=hi.solar)||void 0===fe?void 0:fe.secondary_info)||void 0===ye?void 0:ye.tap_action}},xi={entity:null===(ge=hi.battery)||void 0===ge?void 0:ge.entity,has:(()=>{var e,t,o,i,a;return!!(null===(e=hi.battery)||void 0===e?void 0:e.entity)&&("object"==typeof(null===(t=hi.battery)||void 0===t?void 0:t.entity)?(null===(o=hi.battery)||void 0===o?void 0:o.entity.consumption)||(null===(i=hi.battery)||void 0===i?void 0:i.entity.production):void 0!==(null===(a=hi.battery)||void 0===a?void 0:a.entity))})(),mainEntity:"object"==typeof(null===(be=hi.battery)||void 0===be?void 0:be.entity)?hi.battery.entity.consumption:null===(we=hi.battery)||void 0===we?void 0:we.entity,name:_t(this.hass,hi.battery,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.battery")),icon:vt(this.hass,hi.battery,"mdi:battery-high"),state_of_charge:{state:lt(this.hass,this._config),unit:null!==(ke=null===(xe=null==hi?void 0:hi.battery)||void 0===xe?void 0:xe.state_of_charge_unit)&&void 0!==ke?ke:"%",unit_white_space:null===(Ce=null===(Se=null==hi?void 0:hi.battery)||void 0===Se?void 0:Se.state_of_charge_unit_white_space)||void 0===Ce||Ce,decimals:(null===(Ee=null==hi?void 0:hi.battery)||void 0===Ee?void 0:Ee.state_of_charge_decimals)||0},state:{toBattery:st(this.hass,this._config),fromBattery:dt(this.hass,this._config),toGrid:0,toHome:0},tap_action:null===(Ae=hi.battery)||void 0===Ae?void 0:Ae.tap_action,color:{fromBattery:null===(ze=null===(Me=hi.battery)||void 0===Me?void 0:Me.color)||void 0===ze?void 0:ze.consumption,toBattery:null===(De=null===(Pe=hi.battery)||void 0===Pe?void 0:Pe.color)||void 0===De?void 0:De.production,icon_type:void 0,circle_type:null===(Ne=hi.battery)||void 0===Ne?void 0:Ne.color_circle}},ki={entity:null===(Le=hi.home)||void 0===Le?void 0:Le.entity,has:void 0!==(null===(Ie=null==hi?void 0:hi.home)||void 0===Ie?void 0:Ie.entity),state:vi,icon:vt(this.hass,null==hi?void 0:hi.home,"mdi:home"),name:_t(this.hass,null==hi?void 0:hi.home,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.home")),tap_action:null===(Fe=hi.home)||void 0===Fe?void 0:Fe.tap_action,secondary:{entity:null===(Ve=null===(Ue=hi.home)||void 0===Ue?void 0:Ue.secondary_info)||void 0===Ve?void 0:Ve.entity,template:null===(Ze=null===(We=hi.home)||void 0===We?void 0:We.secondary_info)||void 0===Ze?void 0:Ze.template,has:void 0!==(null===(Ye=null===(Ke=hi.home)||void 0===Ke?void 0:Ke.secondary_info)||void 0===Ye?void 0:Ye.entity),state:pt(this.hass,this._config),accept_negative:(null===(Qe=null===(Xe=hi.home)||void 0===Xe?void 0:Xe.secondary_info)||void 0===Qe?void 0:Qe.accept_negative)||!1,unit:null===(ot=null===(tt=hi.home)||void 0===tt?void 0:tt.secondary_info)||void 0===ot?void 0:ot.unit_of_measurement,unit_white_space:null===(at=null===(it=hi.home)||void 0===it?void 0:it.secondary_info)||void 0===at?void 0:at.unit_white_space,icon:null===(ht=null===(rt=hi.home)||void 0===rt?void 0:rt.secondary_info)||void 0===ht?void 0:ht.icon,decimals:null===(ft=null===(mt=hi.home)||void 0===mt?void 0:mt.secondary_info)||void 0===ft?void 0:ft.decimals,tap_action:null===(Ct=null===(gt=hi.home)||void 0===gt?void 0:gt.secondary_info)||void 0===Ct?void 0:Ct.tap_action}},Si=(null===(Mt=hi.individual)||void 0===Mt?void 0:Mt.map((e=>bt(this.hass,e))))||[],$i={entity:null===(Pt=hi.fossil_fuel_percentage)||void 0===Pt?void 0:Pt.entity,name:_t(this.hass,hi.fossil_fuel_percentage,this.hass.localize("card.label.non_fossil_fuel_percentage")),icon:vt(this.hass,hi.fossil_fuel_percentage,"mdi:leaf"),has:wt(this.hass,this._config),hasPercentage:xt(this.hass,this._config),state:{power:vi},color:null===(Dt=hi.fossil_fuel_percentage)||void 0===Dt?void 0:Dt.color,color_value:null===(Tt=hi.fossil_fuel_percentage)||void 0===Tt?void 0:Tt.color_value,tap_action:null===(Ot=hi.fossil_fuel_percentage)||void 0===Ot?void 0:Ot.tap_action,secondary:{entity:null===(jt=null===(Nt=hi.fossil_fuel_percentage)||void 0===Nt?void 0:Nt.secondary_info)||void 0===jt?void 0:jt.entity,decimals:null===(Lt=null===(Bt=hi.fossil_fuel_percentage)||void 0===Bt?void 0:Bt.secondary_info)||void 0===Lt?void 0:Lt.decimals,template:null===(Ht=null===(It=hi.fossil_fuel_percentage)||void 0===It?void 0:It.secondary_info)||void 0===Ht?void 0:Ht.template,has:void 0!==(null===(Ft=null===(Rt=hi.fossil_fuel_percentage)||void 0===Rt?void 0:Rt.secondary_info)||void 0===Ft?void 0:Ft.entity),state:kt(this.hass,this._config),accept_negative:(null===(Ut=null===(Gt=hi.fossil_fuel_percentage)||void 0===Gt?void 0:Gt.secondary_info)||void 0===Ut?void 0:Ut.accept_negative)||!1,icon:null===(Wt=null===(Vt=hi.fossil_fuel_percentage)||void 0===Vt?void 0:Vt.secondary_info)||void 0===Wt?void 0:Wt.icon,unit:null===(Kt=null===(Zt=hi.fossil_fuel_percentage)||void 0===Zt?void 0:Zt.secondary_info)||void 0===Kt?void 0:Kt.unit_of_measurement,unit_white_space:null===(qt=null===(Yt=hi.fossil_fuel_percentage)||void 0===Yt?void 0:Yt.secondary_info)||void 0===qt?void 0:qt.unit_white_space,color_value:null===(Jt=null===(Xt=hi.fossil_fuel_percentage)||void 0===Xt?void 0:Xt.secondary_info)||void 0===Jt?void 0:Jt.color_value,tap_action:null===(eo=null===(Qt=hi.fossil_fuel_percentage)||void 0===Qt?void 0:Qt.secondary_info)||void 0===eo?void 0:eo.tap_action}};_i.state.fromGrid=yt(_i.state.fromGrid,null===(to=hi.grid)||void 0===to?void 0:to.display_zero_tolerance),_i.state.toGrid=yt(_i.state.toGrid,null===(oo=hi.grid)||void 0===oo?void 0:oo.display_zero_tolerance),wi.state.total=yt(wi.state.total,null===(io=hi.solar)||void 0===io?void 0:io.display_zero_tolerance),xi.state.fromBattery=yt(xi.state.fromBattery,null===(ao=hi.battery)||void 0===ao?void 0:ao.display_zero_tolerance),xi.state.toBattery=yt(xi.state.toBattery,null===(no=hi.battery)||void 0===no?void 0:no.display_zero_tolerance),0===_i.state.fromGrid&&(_i.state.toHome=0,_i.state.toBattery=0),0===wi.state.total&&(wi.state.toGrid=0,wi.state.toBattery=0,wi.state.toHome=0),0===xi.state.fromBattery&&(xi.state.toGrid=0,xi.state.toHome=0),wi.has&&(wi.state.toHome=(null!==(ro=wi.state.total)&&void 0!==ro?ro:0)-(null!==(lo=_i.state.toGrid)&&void 0!==lo?lo:0)-(null!==(so=xi.state.toBattery)&&void 0!==so?so:0));const Ci=Math.max(null!==(uo=null===(co=hi.grid)||void 0===co?void 0:co.display_zero_tolerance)&&void 0!==uo?uo:0,null!==(ho=null===(po=hi.battery)||void 0===po?void 0:po.display_zero_tolerance)&&void 0!==ho?ho:0);if(null!==wi.state.toHome&&wi.state.toHome<0?(xi.has&&(_i.state.toBattery=Math.abs(wi.state.toHome),_i.state.toBattery>(null!==(vo=_i.state.fromGrid)&&void 0!==vo?vo:0)&&(xi.state.toGrid=Math.min(_i.state.toBattery-(null!==(_o=_i.state.fromGrid)&&void 0!==_o?_o:0),0),_i.state.toBattery=_i.state.fromGrid)),wi.state.toHome=0):null!==xi.state.toBattery&&xi.state.toBattery>0?(wi.state.toBattery=wi.state.total-(wi.state.toHome||0)-(_i.state.toGrid||0),_i.state.toBattery=xi.state.toBattery-wi.state.toBattery):_i.state.toBattery=0,_i.state.toBattery=(null!==(mo=_i.state.toBattery)&&void 0!==mo?mo:0)>Ci?_i.state.toBattery:0,xi.has&&(wi.has?(xi.state.toGrid||(xi.state.toGrid=Math.max(0,(_i.state.toGrid||0)-(wi.state.total||0)-(xi.state.toBattery||0)-(_i.state.toBattery||0))),wi.state.toBattery=xi.state.toBattery-(_i.state.toBattery||0),(null===(fo=hi.solar)||void 0===fo?void 0:fo.display_zero_tolerance)&&hi.solar.display_zero_tolerance>=(wi.state.total||0)&&(wi.state.toBattery=0)):xi.state.toGrid=_i.state.toGrid||0,xi.state.toGrid=(xi.state.toGrid||0)>Ci&&xi.state.toGrid||0,xi.state.toHome=(null!==(yo=xi.state.fromBattery)&&void 0!==yo?yo:0)-(null!==(go=xi.state.toGrid)&&void 0!==go?go:0)),_i.state.toHome=Math.max(_i.state.fromGrid-(null!==(bo=_i.state.toBattery)&&void 0!==bo?bo:0),0),wi.has&&_i.state.toGrid&&(wi.state.toGrid=_i.state.toGrid-(null!==(wo=xi.state.toGrid)&&void 0!==wo?wo:0)),_i.powerOutage.isOutage&&(_i.state.fromGrid=_i.powerOutage.entityGenerator?Math.max(Je(this.hass,_i.powerOutage.entityGenerator),0):0,_i.state.toHome=Math.max(_i.state.fromGrid-(null!==(xo=_i.state.toBattery)&&void 0!==xo?xo:0),0),_i.state.toGrid=0,xi.state.toGrid=0,wi.state.toGrid=0,_i.icon=_i.powerOutage.icon,$i.has=!1,$i.hasPercentage=!1),$i.has){const e=1-(null!==(So=qe(this.hass,null===(ko=hi.fossil_fuel_percentage)||void 0===ko?void 0:ko.entity))&&void 0!==So?So:0)/100;$i.state.power=_i.state.toHome*e}const Ei=(null==Si?void 0:Si.reduce(((e,t)=>e+(t.has&&t.state||0)),0))||0,Ai=Math.max(_i.state.toHome+(null!==($o=wi.state.toHome)&&void 0!==$o?$o:0)+(null!==(Co=xi.state.toHome)&&void 0!==Co?Co:0),0),Mi=xi.state.toHome?zt*(xi.state.toHome/Ai):0,zi=wi.state.toHome?zt*(wi.state.toHome/Ai):0,Pi=$i.state.power?zt*($i.state.power/Ai):0,Di=zt*((Ai-(null!==(Eo=$i.state.power)&&void 0!==Eo?Eo:0)-(null!==(Ao=xi.state.toHome)&&void 0!==Ao?Ao:0)-(null!==(Mo=wi.state.toHome)&&void 0!==Mo?Mo:0))/Ai),Ti=(null===(zo=hi.home)||void 0===zo?void 0:zo.override_state)&&hi.home.entity?(null===(Po=hi.home)||void 0===Po?void 0:Po.subtract_individual)?$e(this.hass,this._config,Je(this.hass,hi.home.entity)-Ei,{unit:null===(Do=hi.home)||void 0===Do?void 0:Do.unit_of_measurement,unitWhiteSpace:null===(To=hi.home)||void 0===To?void 0:To.unit_white_space,watt_threshold:this._config.watt_threshold}):$e(this.hass,this._config,Je(this.hass,hi.home.entity),{unit:null===(Oo=hi.home)||void 0===Oo?void 0:Oo.unit_of_measurement,unitWhiteSpace:null===(No=hi.home)||void 0===No?void 0:No.unit_white_space,watt_threshold:this._config.watt_threshold}):(null===(jo=hi.home)||void 0===jo?void 0:jo.subtract_individual)?$e(this.hass,this._config,Ai-Ei||0,{unit:null===(Bo=hi.home)||void 0===Bo?void 0:Bo.unit_of_measurement,unitWhiteSpace:null===(Lo=hi.home)||void 0===Lo?void 0:Lo.unit_white_space,watt_threshold:this._config.watt_threshold}):$e(this.hass,this._config,Ai,{unit:null===(Io=hi.home)||void 0===Io?void 0:Io.unit_of_measurement,unitWhiteSpace:null===(Ho=hi.home)||void 0===Ho?void 0:Ho.unit_white_space,watt_threshold:this._config.watt_threshold}),Oi=_i.state.toHome+(null!==(Ro=wi.state.toHome)&&void 0!==Ro?Ro:0)+(null!==(Fo=wi.state.toGrid)&&void 0!==Fo?Fo:0)+(null!==(Go=wi.state.toBattery)&&void 0!==Go?Go:0)+(null!==(Uo=xi.state.toHome)&&void 0!==Uo?Uo:0)+(null!==(Vo=_i.state.toBattery)&&void 0!==Vo?Vo:0)+(null!==(Wo=xi.state.toGrid)&&void 0!==Wo?Wo:0);if(null===xi.state_of_charge.state?xi.icon="mdi:battery":xi.state_of_charge.state<=72&&xi.state_of_charge.state>44?xi.icon="mdi:battery-medium":xi.state_of_charge.state<=44&&xi.state_of_charge.state>16?xi.icon="mdi:battery-low":xi.state_of_charge.state<=16&&(xi.icon="mdi:battery-outline"),void 0!==(null===(Zo=hi.battery)||void 0===Zo?void 0:Zo.icon)&&(xi.icon=null===(Ko=hi.battery)||void 0===Ko?void 0:Ko.icon),null===(Yo=hi.battery)||void 0===Yo?void 0:Yo.use_metadata){const e=vt(this.hass,hi.battery,"NO_ICON_METADATA");"NO_ICON_METADATA"!==e&&(xi.icon=e)}const Ni={batteryGrid:Re(this._config,null!==(Xo=null!==(qo=_i.state.toBattery)&&void 0!==qo?qo:xi.state.toGrid)&&void 0!==Xo?Xo:0,Oi),batteryToHome:Re(this._config,null!==(Jo=xi.state.toHome)&&void 0!==Jo?Jo:0,Oi),gridToHome:Re(this._config,_i.state.toHome,Oi),solarToBattery:Re(this._config,null!==(Qo=wi.state.toBattery)&&void 0!==Qo?Qo:0,Oi),solarToGrid:Re(this._config,null!==(ei=wi.state.toGrid)&&void 0!==ei?ei:0,Oi),solarToHome:Re(this._config,null!==(ti=wi.state.toHome)&&void 0!==ti?ti:0,Oi),individual:(null==Si?void 0:Si.map((e=>{var t;return Re(this._config,null!==(t=e.state)&&void 0!==t?t:0,Ei)})))||[],nonFossil:Re(this._config,null!==(oi=$i.state.power)&&void 0!==oi?oi:0,Oi)};["batteryGrid","batteryToHome","gridToHome","solarToBattery","solarToGrid","solarToHome"].forEach((e=>{const t=this[`${e}Flow`];t&&this.previousDur[e]&&this.previousDur[e]!==Ni[e]&&(t.pauseAnimations(),t.setCurrentTime(t.getCurrentTime()*(Ni[e]/this.previousDur[e])),t.unpauseAnimations()),this.previousDur[e]=Ni[e]}));const ji={battery:{value:Mi,color:"var(--energy-battery-out-color)"},solar:{value:zi,color:"var(--energy-solar-color)"},grid:{value:Di,color:"var(--energy-grid-consumption-color)"},gridNonFossil:{value:Pi,color:"var(--energy-non-fossil-color)"}},Bi=Object.keys(ji).reduce(((e,t)=>ji[e].value>ji[t].value?e:t)),Li=e=>e?void 0===(null==e?void 0:e.state)?"":$e(this.hass,this._config,null==e?void 0:e.state,{decimals:null==e?void 0:e.decimals,unit:null==e?void 0:e.unit,unitWhiteSpace:null==e?void 0:e.unit_white_space,watt_threshold:this._config.watt_threshold}):"",Ii=["left-top","left-bottom","right-top","right-bottom"],Hi={gridSecondary:null===(ii=this._templateResults.gridSecondary)||void 0===ii?void 0:ii.result,solarSecondary:null===(ai=this._templateResults.solarSecondary)||void 0===ai?void 0:ai.result,homeSecondary:null===(ni=this._templateResults.homeSecondary)||void 0===ni?void 0:ni.result,nonFossilFuelSecondary:null===(ri=this._templateResults.nonFossilFuelSecondary)||void 0===ri?void 0:ri.result,individual:(null==Si?void 0:Si.map(((e,t)=>{var o;return null===(o=this._templateResults[`${Ii[t]}Secondary`])||void 0===o?void 0:o.result})))||[]},Ri=this._width>420;((e,{grid:t,solar:o,entities:i,individual:a,battery:n,homeSources:r,homeLargestSource:l,nonFossil:s,display_zero_lines_transparency:d,display_zero_lines_grey_color:c,isCardWideEnough:u})=>{var p,h,v,_,m,f,y,g,b,w,x,k,S,$,C,E,A,M,z,P,D,T,O,N,j;if(e.style.setProperty("--icon-grid-color","consumption"===t.color.icon_type?"var(--energy-grid-consumption-color)":"production"===t.color.icon_type?"var(--energy-grid-return-color)":!0===t.color.icon_type?(null!==(p=t.state.fromGrid)&&void 0!==p?p:0)>=(null!==(h=t.state.toGrid)&&void 0!==h?h:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)"),e.style.setProperty("--circle-grid-color","consumption"===t.color.circle_type?"var(--energy-grid-consumption-color)":"production"===t.color.circle_type?"var(--energy-grid-return-color)":!0===t.color.circle_type?(null!==(v=t.state.fromGrid)&&void 0!==v?v:0)>=(null!==(_=t.state.toGrid)&&void 0!==_?_:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--energy-grid-consumption-color)"),void 0!==t.color.fromGrid&&("object"==typeof t.color.fromGrid&&(t.color.fromGrid=Et(t.color.fromGrid)),e.style.setProperty("--energy-grid-consumption-color",t.color.fromGrid||"#a280db")),void 0!==t.color.toGrid&&("object"==typeof t.color.toGrid&&(t.color.toGrid=Et(t.color.toGrid)),e.style.setProperty("--energy-grid-return-color",t.color.toGrid||"#a280db")),e.style.setProperty("--secondary-text-grid-color","consumption"===t.secondary.color.type?"var(--energy-grid-consumption-color)":"production"===t.secondary.color.type?"var(--energy-grid-return-color)":!0===t.secondary.color.type?(null!==(m=t.state.fromGrid)&&void 0!==m?m:0)>=(null!==(f=t.state.toGrid)&&void 0!==f?f:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)"),!1===(null===(y=i.grid)||void 0===y?void 0:y.color_value)?(e.style.setProperty("--text-grid-consumption-color","var(--primary-text-color)"),e.style.setProperty("--text-grid-return-color","var(--primary-text-color)")):(e.style.setProperty("--text-grid-consumption-color","var(--energy-grid-consumption-color)"),e.style.setProperty("--text-grid-return-color","var(--energy-grid-return-color)")),e.style.setProperty("--text-solar-color",(null===(g=i.solar)||void 0===g?void 0:g.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-solar-color",(null===(w=null===(b=i.solar)||void 0===b?void 0:b.secondary_info)||void 0===w?void 0:w.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),void 0!==(null===(x=i.solar)||void 0===x?void 0:x.color)){let t=null===(k=i.solar)||void 0===k?void 0:k.color;"object"==typeof t&&(t=Et(t)),e.style.setProperty("--energy-solar-color",t||"#ff9800")}e.style.setProperty("--icon-solar-color",(null===(S=i.solar)||void 0===S?void 0:S.color_icon)?"var(--energy-solar-color)":"var(--primary-text-color)"),void 0!==n.color.fromBattery&&("object"==typeof n.color.fromBattery&&(n.color.fromBattery=Et(n.color.fromBattery)),e.style.setProperty("--energy-battery-out-color",n.color.fromBattery||"#4db6ac")),void 0!==n.color.toBattery&&("object"==typeof n.color.toBattery&&(n.color.toBattery=Et(n.color.toBattery)),e.style.setProperty("--energy-battery-in-color",n.color.toBattery||"#a280db")),n.color.icon_type=null===($=i.battery)||void 0===$?void 0:$.color_icon,e.style.setProperty("--icon-battery-color","consumption"===n.color.icon_type?"var(--energy-battery-in-color)":"production"===n.color.icon_type?"var(--energy-battery-out-color)":!0===n.color.icon_type?n.state.fromBattery>=n.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)");const B=null===(C=i.battery)||void 0===C?void 0:C.color_state_of_charge_value;if(e.style.setProperty("--text-battery-state-of-charge-color","consumption"===B?"var(--energy-battery-in-color)":"production"===B?"var(--energy-battery-out-color)":!0===B?n.state.fromBattery>=n.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)"),e.style.setProperty("--circle-battery-color","consumption"===n.color.circle_type?"var(--energy-battery-in-color)":"production"===n.color.circle_type||!0===n.color.circle_type&&n.state.fromBattery>=n.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)"),!1===(null===(E=i.battery)||void 0===E?void 0:E.color_value)?(e.style.setProperty("--text-battery-in-color","var(--primary-text-color)"),e.style.setProperty("--text-battery-out-color","var(--primary-text-color)")):(e.style.setProperty("--text-battery-in-color","var(--energy-battery-in-color)"),e.style.setProperty("--text-battery-out-color","var(--energy-battery-out-color)")),void 0!==s.color&&("object"==typeof s.color&&(s.color=Et(s.color)),e.style.setProperty("--non-fossil-color",s.color||"var(--energy-non-fossil-color)")),e.style.setProperty("--icon-non-fossil-color",(null===(A=i.fossil_fuel_percentage)||void 0===A?void 0:A.color_icon)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--text-non-fossil-color",(null===(M=i.fossil_fuel_percentage)||void 0===M?void 0:M.color_value)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-non-fossil-color",(null===(P=null===(z=i.fossil_fuel_percentage)||void 0===z?void 0:z.secondary_info)||void 0===P?void 0:P.color_value)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-home-color",(null===(T=null===(D=i.home)||void 0===D?void 0:D.secondary_info)||void 0===T?void 0:T.color_value)?"var(--text-home-color)":"var(--primary-text-color)"),e.style.setProperty("--icon-home-color",At(null===(O=i.home)||void 0===O?void 0:O.color_icon,r,l)),e.style.setProperty("--text-home-color",At(null===(N=i.home)||void 0===N?void 0:N.color_value,r,l)),!1===(null===(j=i.home)||void 0===j?void 0:j.circle_animation)&&e.style.setProperty("--home-circle-animation","none"),e.style.setProperty("--battery-grid-line",t.state.toBattery?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)"),e.style.setProperty("--transparency-unused-lines",d?d.toString():"0"),void 0!==c){let t=c;"object"==typeof t&&(t=Et(t)),e.style.setProperty("--greyed-out--line-color",t)}if(o.has&&(n.has?(e.style.setProperty("--lines-svg-not-flat-line-height","106%"),e.style.setProperty("--lines-svg-not-flat-line-top","-3%"),e.style.setProperty("--lines-svg-flat-width","calc(100% - 160px)"),e.style.setProperty("--lines-svg-flat-left","0"),e.style.setProperty("--lines-svg-not-flat-left","0")):(e.style.setProperty("--lines-svg-not-flat-line-top","-2%"),e.style.setProperty("--lines-svg-flat-width",u?"calc(100% - 154px)":"calc(100% - 157px)"),e.style.setProperty("--lines-svg-not-flat-width",u?"calc(103% - 172px)":"calc(103% - 169px)"),e.style.setProperty("--lines-svg-not-flat-left","3px"),e.style.setProperty("--lines-svg-flat-left","-3px"))),null==a?void 0:a.some((e=>e.has))){const t=(t,o)=>{var i;const a=["left-top","left-bottom","right-top","right-bottom"],n=(null==a?void 0:a[o])||"left-top";let r=null==t?void 0:t.color;"object"==typeof r&&(r=Et(r)),e.style.setProperty(`--individual-${n}-color`,r||["#d0cc5b","#964cb5","#b54c9d","#5bd0cc"][o]||"#d0cc5b"),e.style.setProperty(`--icon-individual-${n}-color`,!1!==(null==t?void 0:t.color_icon)?`var(--individual-${n}-color)`:"var(--primary-text-color)"),e.style.setProperty(`--text-individual-${n}-color`,(null==t?void 0:t.color_value)?`var(--individual-${n}-color)`:"var(--primary-text-color)"),e.style.setProperty(`--secondary-text-individual-${n}-color`,(null===(i=null==t?void 0:t.secondary_info)||void 0===i?void 0:i.color_value)?`var(--individual-${n}-color)`:"var(--primary-text-color)")};let o=0;a.forEach(((e,n)=>{a[n].has&&(t(i.individual[n],o),o++)}))}})(this,{grid:_i,solar:wi,battery:xi,display_zero_lines_grey_color:"grey_out"===(null===(li=this._config.display_zero_lines)||void 0===li?void 0:li.mode)?null===(si=this._config.display_zero_lines)||void 0===si?void 0:si.grey_color:"",display_zero_lines_transparency:"transparency"===(null===(di=this._config.display_zero_lines)||void 0===di?void 0:di.mode)?null===(ci=this._config.display_zero_lines)||void 0===ci?void 0:ci.transparency:"",entities:hi,homeLargestSource:Bi,homeSources:ji,individual:Si,nonFossil:$i,isCardWideEnough:Ri});const Fi=this._config.sort_individual_devices?function(e){const t=[...e];return t.sort(((e,t)=>(e.state||0)-(t.state||0))).reverse(),t}(Si):Si,Gi=Te(Fi),Ui=Oe(Fi);return H`<ha-card .header="${this._config.title}" class="${this._config.full_size?"full-size":""}" style="${this._config.style_ha_card?this._config.style_ha_card:""}"><div class="card-content ${this._config.full_size?"full-size":""}" id="power-flow-card-plus" style="${this._config.style_card_content?this._config.style_card_content:""}">${Ui.length?H`<div class="row top-individuals-row">${Ui.map(((e,t)=>Ge(this,this._config,{individualObj:e,displayState:Li(e),newDur:Ni,templatesObj:Hi,row:"top",index:t})))}</div>`:H``} ${!wi.has&&!$i.hasPercentage||(null===(ui=hi.home)||void 0===ui?void 0:ui.hide)?H``:H`<div class="row">${et(this,this._config,{entities:hi,grid:_i,newDur:Ni,nonFossil:$i,templatesObj:Hi})} ${wi.has?((e,t,{entities:o,solar:i,templatesObj:a})=>{var n;return H`<div class="circle-container solar"><span class="label">${i.name}</span><div class="circle" @click="${t=>{e.openDetails(t,i.tap_action,i.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,i.tap_action,i.entity)}}">${He(e.hass,e,t,a,i,"solar")} ${" "!==i.icon?H`<ha-icon id="solar-icon" .icon="${i.icon}">`:null} ${!1!==(null===(n=o.solar)||void 0===n?void 0:n.display_zero_state)||(i.state.total||0)>0?H`<span class="solar">${$e(e.hass,t,i.state.total,{unit:i.state.unit,unitWhiteSpace:i.state.unit_white_space,decimals:i.state.decimals,watt_threshold:t.watt_threshold})}</span>`:""}</div></div>`})(this,this._config,{entities:hi,solar:wi,templatesObj:Hi}):H`<div class="spacer"></div>`}<div class="spacer"></div></div>`}<div class="row">${_i.has?((e,t,{entities:o,grid:i,templatesObj:a})=>{var n,r,l,s,d,c,u,p,h,v,_;return H`<div class="circle-container grid"><div class="circle" @click="${t=>{var a,n,r,l,s,d;const c=null!==(n=null===(a=i.powerOutage)||void 0===a?void 0:a.entityGenerator)&&void 0!==n?n:null===(l=null===(r=o.grid)||void 0===r?void 0:r.power_outage)||void 0===l?void 0:l.entity,u=(null===(s=i.powerOutage)||void 0===s?void 0:s.isOutage)&&c?c:"string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,null===(d=o.grid)||void 0===d?void 0:d.tap_action,u)}}" @keyDown="${t=>{var a,n,r,l,s,d;if("Enter"===t.key){const c=null!==(n=null===(a=i.powerOutage)||void 0===a?void 0:a.entityGenerator)&&void 0!==n?n:null===(l=null===(r=o.grid)||void 0===r?void 0:r.power_outage)||void 0===l?void 0:l.entity,u=(null===(s=i.powerOutage)||void 0===s?void 0:s.isOutage)&&c?c:"string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,null===(d=o.grid)||void 0===d?void 0:d.tap_action,u)}}}">${He(e.hass,e,t,a,i,"grid")} ${" "!==i.icon?H`<ha-icon id="grid-icon" .icon="${i.icon}">`:null} ${("two_way"===(null===(n=o.grid)||void 0===n?void 0:n.display_state)||void 0===(null===(r=o.grid)||void 0===r?void 0:r.display_state)||"one_way_no_zero"===(null===(l=o.grid)||void 0===l?void 0:l.display_state)&&(null!==(s=i.state.toGrid)&&void 0!==s?s:0)>0||"one_way"===(null===(d=o.grid)||void 0===d?void 0:d.display_state)&&(null===i.state.fromGrid||0===i.state.fromGrid)&&0!==i.state.toGrid)&&null!==i.state.toGrid&&!i.powerOutage.isOutage?H`<span class="return" @click="${t=>{var i;const a="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.production;e.openDetails(t,null===(i=o.grid)||void 0===i?void 0:i.tap_action,a)}}" @keyDown="${t=>{var i;if("Enter"===t.key){const a="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.production;e.openDetails(t,null===(i=o.grid)||void 0===i?void 0:i.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-left"}"></ha-icon>${$e(e.hass,t,i.state.toGrid,{unit:i.unit,unitWhiteSpace:i.unit_white_space,decimals:i.decimals,watt_threshold:t.watt_threshold})}</span>`:null} ${("two_way"===(null===(c=o.grid)||void 0===c?void 0:c.display_state)||void 0===(null===(u=o.grid)||void 0===u?void 0:u.display_state)||"one_way_no_zero"===(null===(p=o.grid)||void 0===p?void 0:p.display_state)&&i.state.fromGrid>0||"one_way"===(null===(h=o.grid)||void 0===h?void 0:h.display_state)&&(null===i.state.toGrid||0===i.state.toGrid))&&null!==i.state.fromGrid&&!i.powerOutage.isOutage||i.powerOutage.isOutage&&i.powerOutage.entityGenerator?H`<span class="consumption" @click="${t=>{var i;const a="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,null===(i=o.grid)||void 0===i?void 0:i.tap_action,a)}}" @keyDown="${t=>{var i;if("Enter"===t.key){const a="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,null===(i=o.grid)||void 0===i?void 0:i.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-right"}"></ha-icon>${$e(e.hass,t,i.state.fromGrid,{unit:i.unit,unitWhiteSpace:i.unit_white_space,decimals:i.decimals,watt_threshold:t.watt_threshold})}</span>`:""} ${(null===(v=i.powerOutage)||void 0===v?void 0:v.isOutage)&&!(null===(_=i.powerOutage)||void 0===_?void 0:_.entityGenerator)?H`<span class="grid power-outage">${i.powerOutage.name}</span>`:""}</div><span class="label">${i.name}</span></div>`})(this,this._config,{entities:hi,grid:_i,templatesObj:Hi}):H`<div class="spacer"></div>`}<div class="spacer"></div>${(null===(pi=hi.home)||void 0===pi?void 0:pi.hide)?H`<div class="spacer"></div>`:((e,t,{home:o,entities:i,templatesObj:a,homeUsageToDisplay:n,homeSolarCircumference:r,circleCircumference:l,homeBatteryCircumference:s,homeNonFossilCircumference:d,homeGridCircumference:c,individual:u})=>{const p=u.filter((e=>e.has)).length<=1;return H`<div class="circle-container home"><div class="circle" id="home-circle" @click="${t=>{var o,a;e.openDetails(t,null===(o=i.home)||void 0===o?void 0:o.tap_action,null===(a=i.home)||void 0===a?void 0:a.entity)}}" @keyDown="${t=>{var o,a;"Enter"===t.key&&e.openDetails(t,null===(o=i.home)||void 0===o?void 0:o.tap_action,null===(a=i.home)||void 0===a?void 0:a.entity)}}">${He(e.hass,e,t,a,o,"home")} ${" "!==o.icon?H`<ha-icon id="home-icon" .icon="${o.icon}">`:null} ${n} <svg class="home-circle-sections">${void 0!==r?R`<circle class="solar" cx="40" cy="40" r="38" stroke-dasharray="${r} ${l-r}" shape-rendering="geometricPrecision" stroke-dashoffset="-${l-r}">`:""} ${s?R`<circle class="battery" cx="40" cy="40" r="38" stroke-dasharray="${s} ${l-s}" stroke-dashoffset="-${l-s-(r||0)}" shape-rendering="geometricPrecision">`:""} ${void 0!==d?R`<circle class="low-carbon" cx="40" cy="40" r="38" stroke-dasharray="${d} ${l-d}" stroke-dashoffset="-${l-d-(s||0)-(r||0)}" shape-rendering="geometricPrecision">`:""}<circle class="grid" cx="40" cy="40" r="38" stroke-dasharray="${null!=c?c:l-r-(s||0)} ${void 0!==c?l-c:r+(s||0)}" stroke-dashoffset="0" shape-rendering="geometricPrecision"/></svg></div>${p?H`<span class="label">${o.name}</span>`:H`<span class="label"></span>`}</div>`})(this,this._config,{circleCircumference:zt,entities:hi,grid:_i,home:ki,homeBatteryCircumference:Mi,homeGridCircumference:Di,homeNonFossilCircumference:Pi,homeSolarCircumference:zi,newDur:Ni,templatesObj:Hi,homeUsageToDisplay:Ti,individual:Si})} ${je(Si)?H`<div class="spacer"></div>`:H``}</div>${xi.has?H`<div class="row"><div class="spacer"></div>${((e,t,{battery:o,entities:i})=>{var a,n,r,l,s,d,c,u,p,h;return H`<div class="circle-container battery"><div class="circle" @click="${t=>{var o,a,n,r,l,s;const d=(null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)?null===(a=i.battery)||void 0===a?void 0:a.state_of_charge:"string"==typeof(null===(n=i.battery)||void 0===n?void 0:n.entity)?null===(r=i.battery)||void 0===r?void 0:r.entity:null===(l=i.battery)||void 0===l?void 0:l.entity.production;e.openDetails(t,null===(s=i.battery)||void 0===s?void 0:s.tap_action,d)}}" @keyDown="${t=>{var o,a,n;if("Enter"===t.key){const r=(null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)?null===(a=i.battery)||void 0===a?void 0:a.state_of_charge:"string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.production;e.openDetails(t,null===(n=i.battery)||void 0===n?void 0:n.tap_action,r)}}}">${null!==o.state_of_charge.state&&!1!==(null===(a=i.battery)||void 0===a?void 0:a.show_state_of_charge)?H`<span @click="${t=>{var o,a;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,null===(a=i.battery)||void 0===a?void 0:a.state_of_charge)}}" @keyDown="${t=>{var o,a;"Enter"===t.key&&e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,null===(a=i.battery)||void 0===a?void 0:a.state_of_charge)}}" id="battery-state-of-charge-text">${$e(e.hass,t,o.state_of_charge.state,{unit:null!==(n=o.state_of_charge.unit)&&void 0!==n?n:"%",unitWhiteSpace:o.state_of_charge.unit_white_space,decimals:o.state_of_charge.decimals,accept_negative:!0,watt_threshold:t.watt_threshold})}</span>`:null} ${" "!==o.icon?H`<ha-icon id="battery-icon" .icon="${o.icon}" @click="${t=>{var o,a;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,null===(a=i.battery)||void 0===a?void 0:a.state_of_charge)}}" @keyDown="${t=>{var o,a;"Enter"===t.key&&e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,null===(a=i.battery)||void 0===a?void 0:a.state_of_charge)}}">`:null} ${"two_way"===(null===(r=i.battery)||void 0===r?void 0:r.display_state)||void 0===(null===(l=i.battery)||void 0===l?void 0:l.display_state)||"one_way_no_zero"===(null===(s=i.battery)||void 0===s?void 0:s.display_state)&&o.state.toBattery>0||"one_way"===(null===(d=i.battery)||void 0===d?void 0:d.display_state)&&0!==o.state.toBattery?H`<span class="battery-in" @click="${t=>{var o;const a="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.production;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,a)}}" @keyDown="${t=>{var o;if("Enter"===t.key){const a="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.production;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-down"}"></ha-icon>${$e(e.hass,t,o.state.toBattery,{unit:o.unit,unitWhiteSpace:o.unit_white_space,decimals:o.decimals,watt_threshold:t.watt_threshold})}</span>`:""} ${"two_way"===(null===(c=i.battery)||void 0===c?void 0:c.display_state)||void 0===(null===(u=i.battery)||void 0===u?void 0:u.display_state)||"one_way_no_zero"===(null===(p=i.battery)||void 0===p?void 0:p.display_state)&&o.state.fromBattery>0||"one_way"===(null===(h=i.battery)||void 0===h?void 0:h.display_state)&&(0===o.state.toBattery||0!==o.state.fromBattery)?H`<span class="battery-out" @click="${t=>{var o;const a="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.consumption;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,a)}}" @keyDown="${t=>{var o;if("Enter"===t.key){const a="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.consumption;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.tap_action,a)}}}"><ha-icon class="small" .icon="${"mdi:arrow-up"}"></ha-icon>${$e(e.hass,t,o.state.fromBattery,{unit:o.unit,unitWhiteSpace:o.unit_white_space,decimals:o.decimals,watt_threshold:t.watt_threshold})}</span>`:""}</div><span class="label">${o.name}</span></div>`})(this,this._config,{battery:xi,entities:hi})}<div class="spacer"></div></div>`:H``} ${Gi.length?H`<div class="row bottom-individuals-row">${Gi.map(((e,t)=>Ge(this,this._config,{individualObj:e,displayState:Li(e),newDur:Ni,templatesObj:Hi,row:"bottom",index:t})))}</div>`:H``} ${Be(this._config,{battery:xi,grid:_i,individual:Si,newDur:Ni,solar:wi})}</div>${((e,t)=>e.dashboard_link||e.second_dashboard_link?H`<div class="card-actions">${e.dashboard_link?H`<ha-button appearance="plain" size="small" href="${e.dashboard_link}">${e.dashboard_link_label||t.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</ha-button>`:""} ${e.second_dashboard_link?H`<ha-button appearance="plain" size="small" href="${e.second_dashboard_link}">${e.second_dashboard_link_label||t.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</ha-button>`:""}</div>`:H``)(this._config,this.hass)}</ha-card>`}updated(e){var t;if(super.updated(e),!this._config||!this.hass)return;const o=null===(t=null==this?void 0:this.shadowRoot)||void 0===t?void 0:t.querySelector("#power-flow-card-plus"),i=o?getComputedStyle(o).getPropertyValue("width"):"0px";this._width=parseInt(i.replace("px",""),10),this._tryConnectAll()}_tryConnectAll(){var e,t,o,i,a,n,r,l,s;const{entities:d}=this._config,c={gridSecondary:null===(t=null===(e=d.grid)||void 0===e?void 0:e.secondary_info)||void 0===t?void 0:t.template,solarSecondary:null===(i=null===(o=d.solar)||void 0===o?void 0:o.secondary_info)||void 0===i?void 0:i.template,homeSecondary:null===(n=null===(a=d.home)||void 0===a?void 0:a.secondary_info)||void 0===n?void 0:n.template,individualSecondary:null===(r=d.individual)||void 0===r?void 0:r.map((e=>{var t;return null===(t=e.secondary_info)||void 0===t?void 0:t.template})),nonFossilFuelSecondary:null===(s=null===(l=d.fossil_fuel_percentage)||void 0===l?void 0:l.secondary_info)||void 0===s?void 0:s.template};for(const[e,t]of Object.entries(c))if(t)if(Array.isArray(t)){const e=["left-top","left-bottom","right-top","right-bottom"];t.forEach(((t,o)=>{t&&this._tryConnect(t,`${e[o]}Secondary`)}))}else this._tryConnect(t,e)}async _tryConnect(e,t){var o,i,a,n,r,l;if(this.hass&&this._config&&void 0===(null===(o=this._unsubRenderTemplates)||void 0===o?void 0:o.get(t))&&""!==e)try{const o=(n=this.hass.connection,r=e=>{this._templateResults[t]=e},l={template:e,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0},n.subscribeMessage((e=>r(e)),Object.assign({type:"render_template"},l)));null===(i=this._unsubRenderTemplates)||void 0===i||i.set(t,o),await o}catch(o){this._templateResults=Object.assign(Object.assign({},this._templateResults),{[t]:{result:e,listeners:{all:!1,domains:[],entities:[],time:!1}}}),null===(a=this._unsubRenderTemplates)||void 0===a||a.delete(t)}}async _tryDisconnectAll(){var e,t,o,i,a,n,r;const{entities:l}=this._config,s={gridSecondary:null===(t=null===(e=l.grid)||void 0===e?void 0:e.secondary_info)||void 0===t?void 0:t.template,solarSecondary:null===(i=null===(o=l.solar)||void 0===o?void 0:o.secondary_info)||void 0===i?void 0:i.template,homeSecondary:null===(n=null===(a=l.home)||void 0===a?void 0:a.secondary_info)||void 0===n?void 0:n.template,individualSecondary:null===(r=l.individual)||void 0===r?void 0:r.map((e=>{var t;return null===(t=e.secondary_info)||void 0===t?void 0:t.template}))};for(const[e,t]of Object.entries(s))t&&this._tryDisconnect(e)}async _tryDisconnect(e){var t,o;const i=null===(t=this._unsubRenderTemplates)||void 0===t?void 0:t.get(e);if(i)try{(await i)(),null===(o=this._unsubRenderTemplates)||void 0===o||o.delete(e)}catch(e){if("not_found"!==e.code&&"template_error"!==e.code)throw e}}};Pt.styles=Ct,e([he({attribute:!1})],Pt.prototype,"hass",void 0),e([ve()],Pt.prototype,"_config",void 0),e([ve()],Pt.prototype,"_templateResults",void 0),e([ve()],Pt.prototype,"_unsubRenderTemplates",void 0),e([ve()],Pt.prototype,"_width",void 0),e([_e("#battery-grid-flow")],Pt.prototype,"batteryGridFlow",void 0),e([_e("#battery-home-flow")],Pt.prototype,"batteryToHomeFlow",void 0),e([_e("#grid-home-flow")],Pt.prototype,"gridToHomeFlow",void 0),e([_e("#solar-battery-flow")],Pt.prototype,"solarToBatteryFlow",void 0),e([_e("#solar-grid-flow")],Pt.prototype,"solarToGridFlow",void 0),e([_e("#solar-home-flow")],Pt.prototype,"solarToHomeFlow",void 0),Pt=e([ce("power-flow-card-plus")],Pt);class Dt extends TypeError{constructor(e,t){let o;const{message:i,explanation:a,...n}=e,{path:r}=e,l=0===r.length?i:`At path: ${r.join(".")} -- ${i}`;super(a??l),null!=a&&(this.cause=l),Object.assign(this,n),this.name=this.constructor.name,this.failures=()=>o??(o=[e,...t()])}}function Tt(e){return"object"==typeof e&&null!=e}function Ot(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function Nt(e,t,o,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:a,branch:n}=t,{type:r}=o,{refinement:l,message:s=`Expected a value of type \`${r}\`${l?` with refinement \`${l}\``:""}, but received: \`${Ot(i)}\``}=e;return{value:i,type:r,refinement:l,key:a[a.length-1],path:a,branch:n,...e,message:s}}function*jt(e,t,o,i){(function(e){return Tt(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const a of e){const e=Nt(a,t,o,i);e&&(yield e)}}function*Bt(e,t,o={}){const{path:i=[],branch:a=[e],coerce:n=!1,mask:r=!1}=o,l={path:i,branch:a};if(n&&(e=t.coercer(e,l),r&&"type"!==t.type&&Tt(t.schema)&&Tt(e)&&!Array.isArray(e)))for(const o in e)void 0===t.schema[o]&&delete e[o];let s="valid";for(const i of t.validator(e,l))i.explanation=o.message,s="not_valid",yield[i,void 0];for(let[d,c,u]of t.entries(e,l)){const t=Bt(c,u,{path:void 0===d?i:[...i,d],branch:void 0===d?a:[...a,c],coerce:n,mask:r,message:o.message});for(const o of t)o[0]?(s=null!=o[0].refinement?"not_refined":"not_valid",yield[o[0],void 0]):n&&(c=o[1],void 0===d?e=c:e instanceof Map?e.set(d,c):e instanceof Set?e.add(c):Tt(e)&&(void 0!==c||d in e)&&(e[d]=c))}if("not_valid"!==s)for(const i of t.refiner(e,l))i.explanation=o.message,s="not_refined",yield[i,void 0];"valid"===s&&(yield[void 0,e])}class Lt{constructor(e){const{type:t,schema:o,validator:i,refiner:a,coercer:n=(e=>e),entries:r=function*(){}}=e;this.type=t,this.schema=o,this.entries=r,this.coercer=n,this.validator=i?(e,t)=>jt(i(e,t),t,this,e):()=>[],this.refiner=a?(e,t)=>jt(a(e,t),t,this,e):()=>[]}assert(e,t){return It(e,this,t)}create(e,t){return function(e,t,o){const i=Ht(e,t,{coerce:!0,message:o});if(i[0])throw i[0];return i[1]}(e,this,t)}is(e){return function(e,t){return!Ht(e,t)[0]}(e,this)}mask(e,t){return function(e,t,o){const i=Ht(e,t,{coerce:!0,mask:!0,message:o});if(i[0])throw i[0];return i[1]}(e,this,t)}validate(e,t={}){return Ht(e,this,t)}}function It(e,t,o){const i=Ht(e,t,{message:o});if(i[0])throw i[0]}function Ht(e,t,o={}){const i=Bt(e,t,o),a=function(e){const{done:t,value:o}=e.next();return t?void 0:o}(i);if(a[0]){return[new Dt(a[0],(function*(){for(const e of i)e[0]&&(yield e[0])})),void 0]}return[void 0,a[1]]}function Rt(e,t){return new Lt({type:e,schema:null,validator:t})}function Ft(){return Rt("any",(()=>!0))}function Gt(){return Rt("boolean",(e=>"boolean"==typeof e))}function Ut(){return Rt("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${Ot(e)}`))}function Vt(){return Rt("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Ot(e)}`))}function Wt(e){const t=e?Object.keys(e):[],o=Rt("never",(()=>!1));return new Lt({type:"object",schema:e||null,*entries(i){if(e&&Tt(i)){const a=new Set(Object.keys(i));for(const o of t)a.delete(o),yield[o,i[o],e[o]];for(const e of a)yield[e,i[e],o]}},validator:e=>Tt(e)||`Expected an object, but received: ${Ot(e)}`,coercer:e=>Tt(e)?{...e}:e})}function Zt(e){return new Lt({...e,validator:(t,o)=>void 0===t||e.validator(t,o),refiner:(t,o)=>void 0===t||e.refiner(t,o)})}function Kt(){return Rt("string",(e=>"string"==typeof e||`Expected a string, but received: ${Ot(e)}`))}var Yt="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",qt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Xt(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!((i=e[o])===(a=t[o])||qt(i)&&qt(a)))return!1;var i,a;return!0}function Jt(e,t){void 0===t&&(t=Xt);var o=null;function i(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(o&&o.lastThis===this&&t(i,o.lastArgs))return o.lastResult;var n=e.apply(this,i);return o={lastResult:n,lastArgs:i,lastThis:this},n}return i.clear=function(){o=null},i}var Qt={label:{car:"Auto",motorbike:"Motorka"}},eo={entity_generator:"Generátor",combined:"Kombinovaná entita (jedna entita s kladnými a zápornými hodnotami)",separated:"Oddelené subjekty (jeden subjekt pro spotřebu a jeden pro výrobu)",custom_colors:"Vlastní barvy",secondary_info:"Sekundární informace",power_outage:"Výpadek",grid:"Síť",solar:"Solární",battery:"Baterie",fossil_fuel_percentage:"Fosilní palivo",home:"Dům",individual:"Individuální",accept_negative:"Přijmout záporné hodnoty",advanced:"Pokročilá nastavení",decimals:"Desetinná místa",consumption:"Spotřeba",production:"Výroba",color_icon:"Barva ikony",color_circle:"Barva kruhu",color_value:"Barva hodnoty",color_state_of_charge_value:"Barva",display_zero:"Zobrazit nulu",display_zero_tolerance:"Zobrazit nulovou toleranci",display_state:"Zobrazit stav",display_zero_state:"Zobrazení nulového stavu",invert_state:"Invertovat stav",template:"Šablona",unit_of_measurement:"Jednotka",unit_white_space:"Jednotka bílé plochy",label_alert:"Štítek pro upozornění",icon_alert:"Ikona pro upozornění",state_alert:"Stav upozornění",state_of_charge:"Stav nabití",state_of_charge_unit_white_space:"Bílá plocha",state_of_charge_unit:"Jednotky",state_of_charge_decimals:"Desetinná místa",state_of_charge_icon:"Ikona",show_state_of_charge:"Zobrazit stav nabití",state_type:"Typ stavu",subtract_individual:"Odečíst individuálně",override_state:"Přepsat stav",calculate_flow_rate:"Počítat průtok",inverted_animation:"Invertovat animaci",show_direction:"Zobrazit směr",circle_animation:"Kruhová animace",color:"Barva",dashboard_link:"Odkaz na informační panel",dashboard_link_label:"Název odkazu na informační panel",w_decimals:"Desetinná místa pro Watty",kw_decimals:"Desetinná místa pro kilowatty",max_flow_rate:"Maximální průtok",min_flow_rate:"Minimální průtok",max_expected_power:"Maximální očekávaný výkon",min_expected_power:"Minimální očekávaný výkon",watt_threshold:"Práh wattů na kilowatty",display_zero_lines:"Zobrazit nulové řádky",clickable_entities:"Entity, na které se dá kliknout",disable_dots:"Vypnout tečky",use_new_flow_rate_model:"Nový model průtoku",use_metadata:"Použít Metadata",mode:"Režim",show:"Zobrazit",hide:"Skrýt",custom:"Volitelné",grey_out:"Šedý výstup",transparency:"Průhlednost",grey_color:"Šedá barva",tap_action:"Akce po klepnutí",navigation_path:"Navigační cesta",sort_individual_devices:"Seřaďte individuálně"},to={card:Qt,editor:eo},oo={label:{car:"Car",motorbike:"Motorbike"}},io={entity_generator:"Generator",combined:"Combined Entity (One entity with positive and negative values)",separated:"Separated Entities (One entity for consumption and one for production)",custom_colors:"Custom Colors",secondary_info:"Secondary Info",power_outage:"Power Outage",grid:"Grid",solar:"Solar",battery:"Battery",fossil_fuel_percentage:"Fossil Fuel",home:"Home",individual:"Individual",accept_negative:"Accept Negative",advanced:"Advanced Options",decimals:"Decimals",consumption:"Consumption",production:"Production",color_icon:"Color of Icon",color_circle:"Color of Circle",color_value:"Color of Value",color_state_of_charge_value:"Color",display_zero:"Display Zero",display_zero_tolerance:"Display Zero Tolerance",display_state:"Display State",display_zero_state:"Display Zero State",invert_state:"Invert State",template:"Template",unit_of_measurement:"Unit",unit_white_space:"Unit White Space",label_alert:"Label for Alert",icon_alert:"Icon for Alert",state_alert:"State of Alert",state_of_charge:"State of Charge",state_of_charge_unit_white_space:"White Space",state_of_charge_unit:"Unit",state_of_charge_decimals:"Decimals",state_of_charge_icon:"Icon",show_state_of_charge:"Show State of Charge",state_type:"Type of State",subtract_individual:"Subtract Individual",override_state:"Override State",calculate_flow_rate:"Calculate Flow Rate",inverted_animation:"Invert Animation",show_direction:"Show Direction",circle_animation:"Circle Animation",color:"Color",dashboard_link:"Dashboard Link",dashboard_link_label:"Dashboard Link Name",w_decimals:"Watt Decimals",kw_decimals:"Kilowatt Decimals",max_flow_rate:"Max Flow Rate",min_flow_rate:"Min Flow Rate",max_expected_power:"Max Expected Power",min_expected_power:"Min Expected Power",watt_threshold:"Watt to Kilowatt Threshold",display_zero_lines:"Display Zero Lines",clickable_entities:"Clickable Entities",disable_dots:"Disable Dots",use_new_flow_rate_model:"New Flow Rate Model",use_metadata:"Use Metadata",mode:"Mode",show:"Show",hide:"Hide",custom:"Custom",grey_out:"Grey Out",transparency:"Transparency",grey_color:"Grey Color",tap_action:"Tap Action",navigation_path:"Navigation Path",sort_individual_devices:"Sort individual devices"},ao={card:oo,editor:io},no={label:{car:"Auto",motorbike:"Motorrad"}},ro={entity_generator:"Generator",combined:"Kombinierte Entität (Eine Entität mit positiven und negativen Werten)",separated:"Getrennte Entitäten (Eine Entität für den Verbrauch und eine für die Produktion)",custom_colors:"Benutzerdefinierte Farben",secondary_info:"Sekundäre Information",power_outage:"Stromausfall",grid:"Netz",solar:"Solar",battery:"Batterie",fossil_fuel_percentage:"Fossile Brennstoffe",home:"Zuhause",individual:"Individuell",accept_negative:"Negative Werte akzeptieren",advanced:"Erweiterte Optionen",decimals:"Dezimalstellen",consumption:"Verbrauch",production:"Produktion",color_icon:"Farbe des Symbols",color_circle:"Farbe des Kreises",color_value:"Farbe des Wertes",color_state_of_charge_value:"Farbe",display_zero:"Null anzeigen",display_zero_tolerance:"Nulltoleranz",display_state:"Zustand anzeigen",display_zero_state:"Nullzustand anzeigen",invert_state:"Zustand umkehren",template:"Vorlage",unit_of_measurement:"Einheit",unit_white_space:"Weißraum für Einheit",label_alert:"Beschriftung für Alarm",icon_alert:"Symbol für Alarm",state_alert:"Alarmzustand",state_of_charge:"Ladezustand",state_of_charge_unit_white_space:"Leerzeichen",state_of_charge_unit:"Einheit",state_of_charge_decimals:"Dezimalstellen",state_of_charge_icon:"Symbol",show_state_of_charge:"Ladezustand anzeigen",state_type:"Typ des Zustands",subtract_individual:"Individuell abziehen",override_state:"Zustand überschreiben",calculate_flow_rate:"Flussrate berechnen",inverted_animation:"Animation umkehren",show_direction:"Richtung anzeigen",circle_animation:"Kreisanimation",color:"Farbe",dashboard_link:"Dashboard-Link",dashboard_link_label:"Name des Dashboard-Links",w_decimals:"Watt-Dezimalstellen",kw_decimals:"Kilowatt-Dezimalstellen",max_flow_rate:"Maximale Flussrate",min_flow_rate:"Minimale Flussrate",max_expected_power:"Maximale erwartete Leistung",min_expected_power:"Minimale erwartete Leistung",watt_threshold:"Watt-zu-Kilowatt-Schwelle",display_zero_lines:"Nulllinien anzeigen",clickable_entities:"Klickbare Entitäten",disable_dots:"Punkte deaktivieren",use_new_flow_rate_model:"Neues Fluss-Modell verwenden",use_metadata:"Metadaten verwenden",mode:"Modus",show:"Anzeigen",hide:"Verstecken",custom:"Benutzerdefiniert",grey_out:"Ausgrauen",transparency:"Transparenz",grey_color:"Graue Farbe",tap_action:"Aktion beim Antippen",navigation_path:"Navigationspfad",sort_individual_devices:"Individuelle Geräte sortieren"},lo={card:no,editor:ro},so={label:{car:"Bil",motorbike:"Motorcykel"}},co={entity_generator:"Generator",combined:"Kombineret enhed (Én enhed med positive og negative værdier)",separated:"Adskilte enheder (én enhed til forbrug og én til produktion)",custom_colors:"Brugerdefinerede farver",secondary_info:"Sekundær info",power_outage:"Strømafbrydelse",grid:"El-Net",solar:"Solar",battery:"Batteri",fossil_fuel_percentage:"Fossilt Brændstof",home:"Hjem",individual:"Individuel",accept_negative:"Accepter negative værdier",advanced:"Avancerede indstillinger",decimals:"Decimaler",consumption:"Forbrug",production:"Produktion",color_icon:"Farve af Icon",color_circle:"Farve af Cirkel",color_value:"Farve af værdi",color_state_of_charge_value:"Farve",display_zero:"Vis Nul",display_zero_tolerance:"Vis ingen tolerance",display_state:"Vis Tilstand",display_zero_state:"Vis Nultilstand",invert_state:"Omvendt tilstand",template:"Skabelon",unit_of_measurement:"Enhed",unit_white_space:"Enhed tomt mellemrum",label_alert:"Etiket til Alarm",icon_alert:"Ikon for alarm",state_alert:"Alarmtilstand",state_of_charge:"Ladningstilstand",state_of_charge_unit_white_space:"Tomt mellemrum",state_of_charge_unit:"Enhed",state_of_charge_decimals:"Decimal",state_of_charge_icon:"Ikon",show_state_of_charge:"Vis ladningstilstand",state_type:"Tilstande",subtract_individual:"Subtract Individual",override_state:"Overskriv Tilstand",calculate_flow_rate:"Beregn Hastighed",inverted_animation:"Omvendt Animation",show_direction:"Vis Retning",circle_animation:"Cirkel Animation",color:"Farve",dashboard_link:"Dashboard Link",dashboard_link_label:"Dashboard Link Navn",w_decimals:"Watt Decimal",kw_decimals:"Kilowatt Decimal",max_flow_rate:"Max Flow Rate",min_flow_rate:"Min Flow Rate",max_expected_power:"Max Forventede Strøm",min_expected_power:"Min Forventede Power",watt_threshold:"Watt til Kilowatt Grænse",display_zero_lines:"Vis Nul Linjer",clickable_entities:"Klikbar enheder",disable_dots:"Deaktiver prikker",use_new_flow_rate_model:"Ny flowhastighedsmodel",use_metadata:"Brug Metadata",mode:"Tilstand",show:"Vis",hide:"Skjul",custom:"Brugerdefinerede",grey_out:"Grået ud",transparency:"Transparens",grey_color:"Grå farve",tap_action:"Tap Handling",navigation_path:"Navigationssti",sort_individual_devices:"Sorter individuelle enheder"},uo={card:so,editor:co},po={label:{car:"Carro",motorbike:"Mota"}},ho={entity_generator:"Gerador",combined:"Entidade combinada (uma entidade com valores positivos e negativos)",separated:"Entidades Separadas (Uma entidade para consumo e outra para produção)",custom_colors:"Cores personalizadas",secondary_info:"Informação Secundária",power_outage:"Falta de energia",grid:"Rede",solar:"Solar",battery:"Bateria",fossil_fuel_percentage:"Combustíveis Fósseis",home:"Casa",individual:"Individual",accept_negative:"Aceitar Valores Negativos",advanced:"Opções Avançadas",decimals:"Casas Decimais",consumption:"Consumo",production:"Produção",color_icon:"Cor do Ícone",color_circle:"Cor do Círculo",color_value:"Cor do Valor",color_state_of_charge_value:"Cor",display_zero:"Mostrar Zero",display_zero_tolerance:"Tolerância do Zero",display_state:"Mostrar Estado",display_zero_state:"Mostrar Estado Zero",invert_state:"Inverter Estado",template:"Modelo",unit_of_measurement:"Unidade",unit_white_space:"Espaçamento da Unidade",label_alert:"Nome para Alerta",icon_alert:"Ícone para Alerta",state_alert:"Estado do Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espaçamento",state_of_charge_unit:"Unidade",state_of_charge_decimals:"Casas Decimais",state_of_charge_icon:"Ícone",show_state_of_charge:"Mostrar Estado de Carga",state_type:"Tipo de Estado",subtract_individual:"Subtrair Individualmente",override_state:"Substituir Estado",calculate_flow_rate:"Calcular Taxa de Fluxo",inverted_animation:"Animação Invertida",show_direction:"Mostrar Direção",circle_animation:"Animação de Círculo",color:"Cor",dashboard_link:"Link do Painel de Controlo",dashboard_link_label:"Nome do Link do Painel de Controlo",w_decimals:"Casas Decimais de Watt",kw_decimals:"Casas Decimais de Quilowatt",max_flow_rate:"Taxa de Fluxo Máxima",min_flow_rate:"Taxa de Fluxo Mínima",max_expected_power:"Potência Máxima Esperada",min_expected_power:"Potência Mínima Esperada",watt_threshold:"Limiar de Watt para Quilowatt",display_zero_lines:"Mostrar Linhas Zero",clickable_entities:"Entidades Clicáveis",disable_dots:"Desativar Pontos",use_new_flow_rate_model:"Utilizar Novo Modelo de Velocidade",use_metadata:"Utilizar Metadados",mode:"Modo",show:"Mostrar",hide:"Esconder",custom:"Personalizado",grey_out:"Cinzento",transparency:"Transparência",grey_color:"Cor Cinzenta",tap_action:"Ação de Toque",navigation_path:"Caminho de Navegação",sort_individual_devices:"Classifique dispositivos individuais"},vo={card:po,editor:ho},_o={label:{car:"Carro",motorbike:"Mota"}},mo={entity_generator:"Gerador",combined:"Entidade combinada (uma entidade com valores positivos e negativos)",separated:"Entidades Separadas (Uma entidade para consumo e outra para produção)",custom_colors:"Cores personalizadas",secondary_info:"Informação Secundária",power_outage:"Falta de energia",grid:"Rede",solar:"Solar",battery:"Bateria",fossil_fuel_percentage:"Combustíveis Fósseis",home:"Casa",individual:"Individual",accept_negative:"Aceitar Valores Negativos",advanced:"Opções Avançadas",decimals:"Casas Decimais",consumption:"Consumo",production:"Produção",color_icon:"Cor do Ícone",color_circle:"Cor do Círculo",color_value:"Cor do Valor",color_state_of_charge_value:"Cor",display_zero:"Exibir Zero",display_zero_tolerance:"Tolerância de Zero",display_state:"Exibir Estado",display_zero_state:"Exibir Estado Zero",invert_state:"Inverter Estado",template:"Modelo",unit_of_measurement:"Unidade",unit_white_space:"Espaçamento da Unidade",label_alert:"Rótulo para Alerta",icon_alert:"Ícone para Alerta",state_alert:"Estado do Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espaçamento",state_of_charge_unit:"Unidade",state_of_charge_decimals:"Casas Decimais",state_of_charge_icon:"Ícone",show_state_of_charge:"Exibir Estado de Carga",state_type:"Tipo de Estado",subtract_individual:"Subtrair Individualmente",override_state:"Substituir Estado",calculate_flow_rate:"Calcular Taxa de Fluxo",inverted_animation:"Animação Invertida",show_direction:"Mostrar Direção",circle_animation:"Animação de Círculo",color:"Cor",dashboard_link:"Link do Painel",dashboard_link_label:"Nome do Link do Painel",w_decimals:"Casas Decimais de Watts",kw_decimals:"Casas Decimais de Quilowatts",max_flow_rate:"Taxa de Fluxo Máxima",min_flow_rate:"Taxa de Fluxo Mínima",max_expected_power:"Potência Máxima Esperada",min_expected_power:"Potência Mínima Esperada",watt_threshold:"Limiar de Watts para Quilowatts",display_zero_lines:"Exibir Linhas Zero",clickable_entities:"Entidades Clicáveis",disable_dots:"Desativar Pontos",use_new_flow_rate_model:"Utilizar Novo Modelo de Velocidade",use_metadata:"Utilizar Metadados",mode:"Modo",show:"Mostrar",hide:"Esconder",custom:"Personalizado",grey_out:"Cinza",transparency:"Transparência",grey_color:"Cor do Cinza",tap_action:"Ação de Toque",navigation_path:"Caminho de Navegação",sort_individual_devices:"Classifique dispositivos individuais"},fo={card:_o,editor:mo},yo={label:{car:"Coche",motorbike:"Motocicleta"}},go={entity_generator:"Generador",combined:"Entidad combinada (una entidad con valores positivos y negativos)",separated:"Entidades separadas (una entidad de consumo y otra de producción)",custom_colors:"Colores personalizados",secondary_info:"Información secundaria",power_outage:"Corte de energía",grid:"Red eléctrica",solar:"Solar",battery:"Batería",fossil_fuel_percentage:"Combustible Fósil",home:"Casa",individual:"Individual",accept_negative:"Aceptar valores negativos",advanced:"Opciones Avanzadas",decimals:"Decimales",consumption:"Consumo",production:"Producción",color_icon:"Color del Icono",color_circle:"Color del Círculo",color_value:"Color del Valor",color_state_of_charge_value:"Color",display_zero:"Mostrar Cero",display_zero_tolerance:"Tolerancia de Cero",display_state:"Mostrar Estado",display_zero_state:"Mostrar Estado Cero",invert_state:"Invertir Estado",template:"Plantilla",unit_of_measurement:"Unidad",unit_white_space:"Espacio en Blanco de la Unidad",label_alert:"Etiqueta para Alerta",icon_alert:"Ícono para Alerta",state_alert:"Estado de Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espacio en Blanco",state_of_charge_unit:"Unidad",state_of_charge_decimals:"Decimales",state_of_charge_icon:"Ícono",show_state_of_charge:"Mostrar Estado de Carga",state_type:"Tipo de Estado",subtract_individual:"Restar Individualmente",override_state:"Sobrescribir Estado",calculate_flow_rate:"Calcular Tasa de Flujo",inverted_animation:"Animación Invertida",show_direction:"Mostrar Dirección",circle_animation:"Animación de Círculo",color:"Color",dashboard_link:"Enlace del Tablero",dashboard_link_label:"Nombre del Enlace del Tablero",w_decimals:"Decimales de Vatio",kw_decimals:"Decimales de Kilovatio",max_flow_rate:"Tasa de Flujo Máxima",min_flow_rate:"Tasa de Flujo Mínima",max_expected_power:"Potencia Máxima Esperada",min_expected_power:"Potencia Mínima Esperada",watt_threshold:"Umbral de Vatio a Kilovatio",display_zero_lines:"Mostrar Líneas de Cero",clickable_entities:"Entidades Clicables",disable_dots:"Desactivar Puntos",use_new_flow_rate_model:"Utilizar Nuevo Modelo de Tasa de Flujo",use_metadata:"Utilizar Metadatos",mode:"Modo",show:"Mostrar",hide:"Ocultar",custom:"Personalizado",grey_out:"Gris",transparency:"Transparencia",grey_color:"Color Gris",tap_action:"Acción de Toque",navigation_path:"Ruta de Navegación",sort_individual_devices:"Ordenar dispositivos individuales"},bo={card:yo,editor:go},wo={label:{car:"Auto",motorbike:"Motorfiets"}},xo={entity_generator:"Generator",combined:"Gecombineerde entiteit (één entiteit met positieve en negatieve waarden)",separated:"Gescheiden entiteiten (één entiteit voor consumptie en één voor productie)",custom_colors:"Aangepaste kleuren",secondary_info:"Secundaire informatie",power_outage:"Stroomuitval",grid:"Elektriciteitsnet",solar:"Zonne-energie",battery:"Batterij",fossil_fuel_percentage:"Fossiele Brandstof",home:"Thuis",individual:"Individueel",accept_negative:"Negatieve waarden accepteren",advanced:"Geavanceerde Opties",decimals:"Decimalen",consumption:"Verbruik",production:"Productie",color_icon:"Kleur van Pictogram",color_circle:"Kleur van Cirkel",color_value:"Kleur van Waarde",color_state_of_charge_value:"Kleur",display_zero:"Nul Weergeven",display_zero_tolerance:"Nultolerantie Weergeven",display_state:"Toestand Weergeven",display_zero_state:"Nul Toestand Weergeven",invert_state:"Toestand Omkeren",template:"Sjabloon",unit_of_measurement:"Eenheid",unit_white_space:"Eenheid Spaties",label_alert:"Label voor Alarm",icon_alert:"Pictogram voor Alarm",state_alert:"Toestand van Alarm",state_of_charge:"Laadstatus",state_of_charge_unit_white_space:"Spaties",state_of_charge_unit:"Eenheid",state_of_charge_decimals:"Decimalen",state_of_charge_icon:"Pictogram",show_state_of_charge:"Laadstatus Weergeven",state_type:"Type Toestand",subtract_individual:"Individueel Aftrekken",override_state:"Toestand Overschrijven",calculate_flow_rate:"Stroomsnelheid Berekenen",inverted_animation:"Animatie Omkeren",show_direction:"Richting Weergeven",circle_animation:"Cirkel Animatie",color:"Kleur",dashboard_link:"Dashboard Link",dashboard_link_label:"Naam van Dashboard Link",w_decimals:"Watt Decimalen",kw_decimals:"Kilowatt Decimalen",max_flow_rate:"Maximale Stroomsnelheid",min_flow_rate:"Minimale Stroomsnelheid",max_expected_power:"Maximaal Verwacht Vermogen",min_expected_power:"Minimaal Verwacht Vermogen",watt_threshold:"Watt naar Kilowatt Drempelwaarde",display_zero_lines:"Nullijnen Weergeven",clickable_entities:"Klikbare Entiteiten",disable_dots:"Punten Uitschakelen",use_new_flow_rate_model:"Nieuw Stroomsnelheid Model Gebruiken",use_metadata:"Metadata Gebruiken",mode:"Modus",show:"Weergeven",hide:"Verbergen",custom:"Aangepast",grey_out:"Grijstint",transparency:"Transparantie",grey_color:"Grijstint",tap_action:"Tik Actie",navigation_path:"Navigatiepad",sort_individual_devices:"Sorteer individuele apparaten"},ko={card:wo,editor:xo},So={label:{car:"Auto",motorbike:"Motocicletta"}},$o={entity_generator:"Generatore",combined:"Entità combinata (un'entità con valori positivi e negativi)",separated:"Entità separate (Un'entità per il consumo e una per la produzione)",custom_colors:"Colori personalizzati",secondary_info:"Informazioni secondarie",power_outage:"Interruzione di corrente",grid:"Rete Elettrica",solar:"Solare",battery:"Batteria",fossil_fuel_percentage:"Carburante Fossile",home:"Casa",individual:"Individuale",accept_negative:"Accetta Valori Negativi",advanced:"Opzioni Avanzate",decimals:"Decimali",consumption:"Consumo",production:"Produzione",color_icon:"Colore dell'Icona",color_circle:"Colore del Cerchio",color_value:"Colore del Valore",color_state_of_charge_value:"Colore",display_zero:"Mostra Zero",display_zero_tolerance:"Tolleranza dello Zero",display_state:"Mostra Stato",display_zero_state:"Mostra Stato Zero",invert_state:"Inverti Stato",template:"Modello",unit_of_measurement:"Unità",unit_white_space:"Spazio Bianco Unità",label_alert:"Etichetta per l'Allarme",icon_alert:"Icona per l'Allarme",state_alert:"Stato dell'Allarme",state_of_charge:"Stato di Carica",state_of_charge_unit_white_space:"Spazio Bianco",state_of_charge_unit:"Unità",state_of_charge_decimals:"Decimali",state_of_charge_icon:"Icona",show_state_of_charge:"Mostra Stato di Carica",state_type:"Tipo di Stato",subtract_individual:"Sottrai Individualmente",override_state:"Sovrascrivi Stato",calculate_flow_rate:"Calcola Tasso di Flusso",inverted_animation:"Animazione Invertita",show_direction:"Mostra Direzione",circle_animation:"Animazione Cerchio",color:"Colore",dashboard_link:"Collegamento Dashboard",dashboard_link_label:"Nome Collegamento Dashboard",w_decimals:"Decimali Watt",kw_decimals:"Decimali Kilowatt",max_flow_rate:"Tasso di Flusso Massimo",min_flow_rate:"Tasso di Flusso Minimo",max_expected_power:"Potenza Massima Prevista",min_expected_power:"Potenza Minima Prevista",watt_threshold:"Soglia Watt per Kilowatt",display_zero_lines:"Mostra Linee Zero",clickable_entities:"Entità Cliccabili",disable_dots:"Disabilita Punti",use_new_flow_rate_model:"Utilizza Nuovo Modello di Tasso di Flusso",use_metadata:"Utilizza Metadati",mode:"Modalità",show:"Mostra",hide:"Nascondi",custom:"Personalizzato",grey_out:"Sfuma",transparency:"Trasparenza",grey_color:"Colore Sfumato",tap_action:"Azione al tocco",navigation_path:"Percorso di navigazione",sort_individual_devices:"Ordina i singoli individuale"},Co={card:So,editor:$o},Eo={label:{car:"Voiture",motorbike:"Moto"}},Ao={entity_generator:"Générateur",combined:"Entité combinée (une entité avec des valeurs positives et négatives)",separated:"Entités séparées (une entité pour la consommation et une pour la production)",custom_colors:"Couleurs personnalisées",secondary_info:"Informations secondaires",power_outage:"Panne de courant",grid:"Réseau Électrique",solar:"Solaire",battery:"Batterie",fossil_fuel_percentage:"Carburant fossile",home:"Domicile",individual:"Individuel",accept_negative:"Accepter les valeurs négatives",advanced:"Options avancées",decimals:"Décimales",consumption:"Consommation",production:"Production",color_icon:"Couleur de l'icône",color_circle:"Couleur du cercle",color_value:"Couleur de la valeur",color_state_of_charge_value:"Couleur",display_zero:"Afficher zéro",display_zero_tolerance:"Tolérance de l'affichage zéro",display_state:"Afficher l'état",display_zero_state:"Afficher l'état zéro",invert_state:"Inverser l'état",template:"Modèle",unit_of_measurement:"Unité",unit_white_space:"Espace blanc de l'unité",label_alert:"Libellé de l'alerte",icon_alert:"Icône de l'alerte",state_alert:"État de l'alerte",state_of_charge:"État de charge",state_of_charge_unit_white_space:"Espace blanc de l'unité",state_of_charge_unit:"Unité",state_of_charge_decimals:"Décimales",state_of_charge_icon:"Icône",show_state_of_charge:"Afficher l'état de charge",state_type:"Type d'état",subtract_individual:"Soustraire l'individuel",override_state:"Remplacer l'état",calculate_flow_rate:"Calculer le débit",inverted_animation:"Animation inversée",show_direction:"Afficher la direction",circle_animation:"Animation de cercle",color:"Couleur",dashboard_link:"Lien du tableau de bord",dashboard_link_label:"Nom du lien du tableau de bord",w_decimals:"Décimales de watt",kw_decimals:"Décimales de kilowatt",max_flow_rate:"Débit maximal",min_flow_rate:"Débit minimal",max_expected_power:"Puissance maximale attendue",min_expected_power:"Puissance minimale attendue",watt_threshold:"Seuil de watt vers kilowatt",display_zero_lines:"Afficher les lignes zéro",clickable_entities:"Entités cliquables",disable_dots:"Désactiver les points",use_new_flow_rate_model:"Nouveau modèle de débit",use_metadata:"Utiliser les métadonnées",mode:"Mode",show:"Afficher",hide:"Masquer",custom:"Personnalisé",grey_out:"Griser",transparency:"Transparence",grey_color:"Couleur grise",tap_action:"Action de tap",navigation_path:"Chemin de navigation",sort_individual_devices:"Trier les appareils individuels"},Mo={card:Eo,editor:Ao},zo={label:{car:"Автомобиль",motorbike:"Мотоцикл"}},Po={entity_generator:"Генератор",combined:"Комбинированный объект (один объект с положительными и отрицательными значениями)",separated:"Отдельные объекты (один объект для потребления и один для производства)",custom_colors:"Пользовательские цвета",secondary_info:"Вторичная информация",power_outage:"Отключение электричества",grid:"Электрическая сеть",solar:"Солнечная",battery:"Батарея",fossil_fuel_percentage:"Полный объем ископаемого топлива",home:"Домашняя",individual:"Индивидуальная",accept_negative:"Принять отрицательные значения",advanced:"Расширенные настройки",decimals:"Десятичные",consumption:"Потребление",production:"Производство",color_icon:"Цвет иконки",color_circle:"Цвет круга",color_value:"Цвет значения",color_state_of_charge_value:"Цвет",display_zero:"Отображать ноль",display_zero_tolerance:"Допустимая погрешность нуля",display_state:"Отображать состояние",display_zero_state:"Отображать состояние нуля",invert_state:"Инвертировать состояние",template:"Шаблон",unit_of_measurement:"Единица измерения",unit_white_space:"Пробел единицы измерения",label_alert:"Метка для предупреждения",icon_alert:"Иконка для предупреждения",state_alert:"Состояние предупреждения",state_of_charge:"Уровень заряда",state_of_charge_unit_white_space:"Пробел",state_of_charge_unit:"Единица измерения",state_of_charge_decimals:"Десятичные",state_of_charge_icon:"Иконка",show_state_of_charge:"Показать уровень заряда",state_type:"Тип состояния",subtract_individual:"Вычесть индивидуально",override_state:"Переопределить состояние",calculate_flow_rate:"Рассчитать скорость потока",inverted_animation:"Инвертированная анимация",show_direction:"Показать направление",circle_animation:"Анимация круга",color:"Цвет",dashboard_link:"Ссылка на панель управления",dashboard_link_label:"Название ссылки на панель управления",w_decimals:"Десятичные ватт",kw_decimals:"Десятичные киловатт",max_flow_rate:"Максимальная скорость потока",min_flow_rate:"Минимальная скорость потока",max_expected_power:"Максимальная ожидаемая мощность",min_expected_power:"Минимальная ожидаемая мощность",watt_threshold:"Пороговое значение ватт в киловатты",display_zero_lines:"Отображать нулевые линии",clickable_entities:"Кликабельные сущности",disable_dots:"Отключить точки",use_new_flow_rate_model:"Использовать новую модель скорости потока",use_metadata:"Использовать метаданные",mode:"Режим",show:"Показать",hide:"Скрыть",custom:"Пользовательский",grey_out:"Серый",transparency:"Прозрачность",grey_color:"Серый цвет",tap_action:"действие касания",navigation_path:"путь навигации",sort_individual_devices:"Сортировка отдельных устройств"},Do={card:zo,editor:Po},To={label:{car:"Auto",motorbike:"Moottoripyörä"}},Oo={entity_generator:"Generaattori",combined:"Yhdistetty kokonaisuus (yksi kokonaisuus positiivisilla ja negatiivisilla arvoilla)",separated:"Erotetut kokonaisuudet (yksi kulutukseen ja yksi tuotantoon)",custom_colors:"Mukautetut värit",secondary_info:"Toissijaiset tiedot",power_outage:"Sähkökatkos",grid:"Sähköverkko",solar:"Aurinko",battery:"Akku",fossil_fuel_percentage:"Fossiilinen polttoaine",home:"Koti",individual:"Yksittäinen",accept_negative:"Hyväksy negatiiviset arvot",advanced:"Lisäasetukset",decimals:"Desimaalit",consumption:"Kulutus",production:"Tuotanto",color_icon:"Ikonin väri",color_circle:"Ympyrän väri",color_value:"Arvon väri",color_state_of_charge_value:"Väri",display_zero:"Näytä nolla",display_zero_tolerance:"Näytä nolla-toleranssi",display_state:"Näytä tila",display_zero_state:"Näytä nolla-tila",invert_state:"Käänteinen tila",template:"Malli",unit_of_measurement:"Yksikkö",unit_white_space:"Yksikön välilyönti",label_alert:"Hälytyksen teksti",icon_alert:"Hälytyksen kuvake",state_alert:"Hälytyksen tila",state_of_charge:"Varauksen tila",state_of_charge_unit_white_space:"Välilyönti",state_of_charge_unit:"Yksikkö",state_of_charge_decimals:"Desimaalit",state_of_charge_icon:"Kuvake",show_state_of_charge:"Näytä varauksen tila",state_type:"Tilan tyyppi",subtract_individual:"Vähennä yksittäinen",override_state:"Korvaa tila",calculate_flow_rate:"Laske virtausnopeus",inverted_animation:"Käänteinen animaatio",show_direction:"Näytä suunta",circle_animation:"Ympyräanimaatio",color:"Väri",dashboard_link:"Ohjauspaneelin linkki",dashboard_link_label:"Ohjauspaneelin linkin nimi",w_decimals:"Wattien desimaalit",kw_decimals:"Kilowattien desimaalit",max_flow_rate:"Maksimivirtausnopeus",min_flow_rate:"Minimivirtausnopeus",max_expected_power:"Ennustettu maksimiteho",min_expected_power:"Ennustettu minimiteho",watt_threshold:"Wattin ja kilowatin kynnysarvo",display_zero_lines:"Näytä nolla-viivat",clickable_entities:"Napautettavat kohteet",disable_dots:"Poista pisteet",use_new_flow_rate_model:"Uusi virtausnopeusmalli",use_metadata:"Käytä metatietoja",mode:"Tila",show:"Näytä",hide:"Piilota",custom:"Mukautettu",grey_out:"Harmaa",transparency:"Läpinäkyvyys",grey_color:"Harmaa väri",tap_action:"Napauta toimintoa",navigation_path:"Navigointipolku",sort_individual_devices:"Lajittele yksittäiset laitteet"},No={card:To,editor:Oo},jo={label:{car:"Samochód",motorbike:"Motocykl"}},Bo={entity_generator:"Generator",combined:"Jednostka połączona (jedna jednostka z wartościami dodatnimi i ujemnymi)",separated:"Oddzielne podmioty (jeden podmiot do konsumpcji i jeden do produkcji)",custom_colors:"Kolory niestandardowe",secondary_info:"Informacje dodatkowe",power_outage:"Brak prądu",grid:"Sieć elektryczna",solar:"Energia słoneczna",battery:"Bateria",fossil_fuel_percentage:"Paliwo kopalne",home:"Dom",individual:"Indywidualne",accept_negative:"Akceptuj wartości ujemne",advanced:"Zaawansowane opcje",decimals:"Miejsca po przecinku",consumption:"Zużycie",production:"Produkcja",color_icon:"Kolor ikony",color_circle:"Kolor okręgu",color_value:"Kolor wartości",color_state_of_charge_value:"Kolor",display_zero:"Wyświetl zero",display_zero_tolerance:"Wyświetl tolerancję zera",display_state:"Wyświetl stan",display_zero_state:"Wyświetl stan zera",invert_state:"Odwróć stan",template:"Szablon",unit_of_measurement:"Jednostka",unit_white_space:"Spacja jednostki",label_alert:"Etykieta alertu",icon_alert:"Ikona alertu",state_alert:"Stan alertu",state_of_charge:"Stan naładowania",state_of_charge_unit_white_space:"Spacja jednostki",state_of_charge_unit:"Jednostka",state_of_charge_decimals:"Miejsca po przecinku",state_of_charge_icon:"Ikona",show_state_of_charge:"Pokaż stan naładowania",state_type:"Typ stanu",subtract_individual:"Odjęcie indywidualne",override_state:"Nadpisanie stanu",calculate_flow_rate:"Oblicz wskaźnik przepływu",inverted_animation:"Odwróć animację",show_direction:"Pokaż kierunek",circle_animation:"Animacja okręgu",color:"Kolor",dashboard_link:"Link do panelu",dashboard_link_label:"Nazwa linku do panelu",w_decimals:"Miejsca po przecinku dla watów",kw_decimals:"Miejsca po przecinku dla kilowatów",max_flow_rate:"Maksymalna szybkość przepływu",min_flow_rate:"Minimalna szybkość przepływu",max_expected_power:"Maksymalna oczekiwana moc",min_expected_power:"Minimalna oczekiwana moc",watt_threshold:"Próg watów na kilowaty",display_zero_lines:"Wyświetl linie zera",clickable_entities:"Klikalne jednostki",disable_dots:"Wyłącz kropki",use_new_flow_rate_model:"Nowy model wskaźnika przepływu",use_metadata:"Użyj metadanych",mode:"Tryb",show:"Pokaż",hide:"Ukryj",custom:"Niestandardowy",grey_out:"Szary",transparency:"Przezroczystość",grey_color:"Kolor szary",tap_action:"Akcja dotknięcia",navigation_path:"Ścieżka nawigacji",sort_individual_devices:"Sortuj poszczególne urządzenia"},Lo={card:jo,editor:Bo},Io={label:{car:"Auto",motorbike:"Motorka"}},Ho={entity_generator:"Generátor",combined:"Kombinovaná entita (jedna entita s kladnými a zápornými hodnotami)",separated:"Oddelené subjekty (jeden subjekt pre spotrebu a jeden pre výrobu)",custom_colors:"Vlastné farby",secondary_info:"Sekundárne informácie",power_outage:"Výpadok",grid:"Sieť",solar:"Solárne",battery:"Batéria",fossil_fuel_percentage:"Fosílne palivo",home:"Doma",individual:"Individuálne",accept_negative:"Povoliť záporné hodnoty",advanced:"Pokročilé nastavenia",decimals:"Desatinné",consumption:"Spotreba",production:"Výroba",color_icon:"Farba ikony",color_circle:"Farba kruhu",color_value:"Farba hodnoty",color_state_of_charge_value:"Farba",display_zero:"Zobraziť nulu",display_zero_tolerance:"Zobraziť nulovú toleranciu",display_state:"Zobraziť stav",display_zero_state:"Zobrazenie nulového stavu",invert_state:"Invertovať stav",template:"Šablóna",unit_of_measurement:"Jednotka",unit_white_space:"Jednotka bielej plochy",label_alert:"Štítok pre upozornenie",icon_alert:"Ikona pre upozornenie",state_alert:"Stav upozornenia",state_of_charge:"Stav nabitia",state_of_charge_unit_white_space:"Biela plocha",state_of_charge_unit:"Jednotky",state_of_charge_decimals:"Desatinné",state_of_charge_icon:"Ikona",show_state_of_charge:"Zobraziť stav nabitia",state_type:"Typ stavu",subtract_individual:"Odčítať individuálne",override_state:"Prepísať stav",calculate_flow_rate:"Počítať prietok",inverted_animation:"Invertovať animáciu",show_direction:"Zobraziť smer",circle_animation:"Kruhová animácia",color:"Farba",dashboard_link:"Odkaz na informačný panel",dashboard_link_label:"Názov odkazu na informačný panel",w_decimals:"Wattové desatinné miesta",kw_decimals:"Kilowattové desatinné miesta",max_flow_rate:"Max prietok",min_flow_rate:"Min prietok",max_expected_power:"Max očakávaný výkon",min_expected_power:"Min očakávaný výkon",watt_threshold:"Prah wattov na kilowatty",display_zero_lines:"Zobraziť nulové riadky",clickable_entities:"Entity, na ktoré sa dá kliknúť",disable_dots:"Vypnúť bodky",use_new_flow_rate_model:"Nový model prietoku",use_metadata:"Použiť Metadata",mode:"Mód",show:"Zobraziť",hide:"Skryť",custom:"Voliteľné",grey_out:"Grey Out",transparency:"Transparentnosť",grey_color:"Šedá farba",tap_action:"Akcia po klepnutí",navigation_path:"Navigačná cesta",sort_individual_devices:"Zoraďte jednotlivé zariadenia"},Ro={card:Io,editor:Ho},Fo={label:{car:"Bil",motorbike:"Motorcykel"}},Go={entity_generator:"Generator",combined:"Sammansatt entitet (en entitet med postitiva och negativa värden)",separated:"Separata entiteter (en entitet för konsumtion och en för produktion)",custom_colors:"Anpassade färger",secondary_info:"Sekundär information",power_outage:"Strömavbrott",grid:"Nät",solar:"Sol",battery:"Batteri",fossil_fuel_percentage:"Fossilt bränsle",home:"Hem",individual:"Individuell",accept_negative:"Acceptera negativa värden",advanced:"Avancerade inställningar",decimals:"Decimaler",consumption:"Konsumtion",production:"Produktion",color_icon:"Ikonfärg",color_circle:"Cirkelfärg",color_value:"Färg på värde",color_state_of_charge_value:"Färg",display_zero:"Visa vid nollvärde",display_zero_tolerance:"Tolerans för nollvärde",display_state:"Visningsläge",display_zero_state:"Visning vid noll",invert_state:"Invertera status",template:"Mall",unit_of_measurement:"Enhet",unit_white_space:"Mellanrum före enhet",label_alert:"Varningsetikett",icon_alert:"Varningsikon",state_alert:"Status vid strömavbrott",state_of_charge:"Laddningsnivå",state_of_charge_unit_white_space:"Mellanrum före enhet",state_of_charge_unit:"Enhet",state_of_charge_decimals:"Decimaler",state_of_charge_icon:"Ikon",show_state_of_charge:"Visa laddningsnivå",state_type:"Statustyp",subtract_individual:"Individuell avräkning",override_state:"Använd entitetsvärde",calculate_flow_rate:"Beräkna flöde",inverted_animation:"Reversera animation",show_direction:"Visa riktning",circle_animation:"Cirkelanimation",color:"Färg",dashboard_link:"Länk till kontrollpanel",dashboard_link_label:"Länknamn till kontrollpanel",w_decimals:"Decimaler watt",kw_decimals:"Decimaler kilowatt",max_flow_rate:"Maximalt flöde",min_flow_rate:"Minimalt flöde",max_expected_power:"Maximal förväntad effekt",min_expected_power:"Minimal förväntad effekt",watt_threshold:"Tröskelvärde för kiloprefix",display_zero_lines:"Vising av inaktiva linjer",clickable_entities:"Klickbara entiteter",disable_dots:"Avaktivera punkter",use_new_flow_rate_model:"Ny flödesmodell",use_metadata:"Använd metadata",mode:"Läge",show:"Visa",hide:"Dölj",custom:"Anpassad",grey_out:"Utgråad",transparency:"Transparens",grey_color:"Grå färg",tap_action:"Tryckåtgärd",navigation_path:"Navigationsväg",sort_individual_devices:"Sortera enskilda enheter"},Uo={card:Fo,editor:Go},Vo={label:{car:"कार",motorbike:"मोटरसाइकिल"}},Wo={entity_generator:"जनरेटर",combined:"संयुक्त इकाई (सकारात्मक और नकारात्मक मानों के साथ)",separated:"अलग-अलग इकाइयाँ (उपभोग और उत्पादन के लिए)",custom_colors:"कस्टम रंग",secondary_info:"द्वितीयक जानकारी",power_outage:"बिजली गुल",grid:"ग्रिड",solar:"सौर ऊर्जा",battery:"बैटरी",fossil_fuel_percentage:"जीवाश्म ईंधन",home:"घर",individual:"व्यक्तिगत",accept_negative:"नकारात्मक स्वीकार करें",advanced:"उन्नत विकल्प",decimals:"दशमलव",consumption:"उपभोग",production:"उत्पादन",color_icon:"आइकन का रंग",color_circle:"सर्कल का रंग",color_value:"मान का रंग",color_state_of_charge_value:"रंग",display_zero:"शून्य दिखाएँ",display_zero_tolerance:"शून्य सहिष्णुता दिखाएँ",display_state:"स्थिति दिखाएँ",display_zero_state:"शून्य स्थिति दिखाएँ",invert_state:"स्थिति उलटें",template:"टेम्पलेट",unit_of_measurement:"माप की इकाई",unit_white_space:"यूनिट स्पेस",label_alert:"अलर्ट के लिए लेबल",icon_alert:"अलर्ट के लिए आइकन",state_alert:"अलर्ट की स्थिति",state_of_charge:"चार्ज की स्थिति",state_of_charge_unit_white_space:"स्पेस",state_of_charge_unit:"इकाई",state_of_charge_decimals:"दशमलव",state_of_charge_icon:"आइकन",show_state_of_charge:"चार्ज की स्थिति दिखाएँ",state_type:"स्थिति प्रकार",subtract_individual:"व्यक्तिगत घटाएँ",override_state:"स्थिति ओवरराइड करें",calculate_flow_rate:"प्रवाह दर की गणना करें",inverted_animation:"एनिमेशन उलटें",show_direction:"दिशा दिखाएँ",circle_animation:"सर्कल एनिमेशन",color:"रंग",dashboard_link:"डैशबोर्ड लिंक",dashboard_link_label:"डैशबोर्ड लिंक नाम",w_decimals:"वाट दशमलव",kw_decimals:"किलोवाट दशमलव",max_flow_rate:"अधिकतम प्रवाह दर",min_flow_rate:"न्यूनतम प्रवाह दर",max_expected_power:"अधिकतम अपेक्षित शक्ति",min_expected_power:"न्यूनतम अपेक्षित शक्ति",watt_threshold:"वाट से किलोवाट सीमा",display_zero_lines:"शून्य रेखाएँ दिखाएँ",clickable_entities:"क्लिक करने योग्य इकाइयाँ",disable_dots:"डॉट्स अक्षम करें",use_new_flow_rate_model:"नया प्रवाह दर मॉडल",use_metadata:"मेटाडेटा का उपयोग करें",mode:"मोड",show:"दिखाएँ",hide:"छुपाएँ",custom:"कस्टम",grey_out:"धूसर करें",transparency:"पारदर्शिता",grey_color:"धूसर रंग",tap_action:"टैप क्रिया",navigation_path:"नेविगेशन पथ",sort_individual_devices:"व्यक्तिगत डिवाइस क्रमबद्ध करें"},Zo={card:Vo,editor:Wo},Ko={label:{car:"Автомобіль",motorbike:"Мотоцикл"}},Yo={entity_generator:"Генератор сутностей",combined:"Об’єднана сутність (одна сутність із позитивними та негативними значеннями)",separated:"Розділені сутності (окрема для споживання та окрема для виробництва)",custom_colors:"Власні кольори",secondary_info:"Додаткова інформація",power_outage:"Відключення живлення",grid:"Мережа",solar:"Сонячна енергія",battery:"Акумулятор",fossil_fuel_percentage:"Частка викопного палива",home:"Дім",individual:"Окремо",accept_negative:"Дозволити від’ємні значення",advanced:"Розширені параметри",decimals:"Кількість десяткових знаків",consumption:"Споживання",production:"Виробництво",color_icon:"Колір іконки",color_circle:"Колір кола",color_value:"Колір значення",color_state_of_charge_value:"Колір заряду",display_zero:"Показувати нульові значення",display_zero_tolerance:"Допуск для нульових значень",display_state:"Показувати стан",display_zero_state:"Показувати стан при нулі",invert_state:"Інвертувати стан",template:"Шаблон",unit_of_measurement:"Одиниця виміру",unit_white_space:"Пробіл між числом і одиницею",label_alert:"Мітка сповіщення",icon_alert:"Іконка сповіщення",state_alert:"Стан сповіщення",state_of_charge:"Рівень заряду",state_of_charge_unit_white_space:"Пробіл одиниці виміру заряду",state_of_charge_unit:"Одиниця виміру заряду",state_of_charge_decimals:"Десяткові знаки заряду",state_of_charge_icon:"Іконка заряду",show_state_of_charge:"Показувати рівень заряду",state_type:"Тип стану",subtract_individual:"Віднімати індивідуальні значення",override_state:"Перевизначити стан",calculate_flow_rate:"Розраховувати швидкість потоку",inverted_animation:"Інвертована анімація",show_direction:"Показувати напрямок",circle_animation:"Анімація кола",color:"Колір",dashboard_link:"Посилання на дашборд",dashboard_link_label:"Назва посилання на дашборд",w_decimals:"Десяткові знаки для ватів",kw_decimals:"Десяткові знаки для кіловатів",max_flow_rate:"Максимальна швидкість потоку",min_flow_rate:"Мінімальна швидкість потоку",max_expected_power:"Максимальна очікувана потужність",min_expected_power:"Мінімальна очікувана потужність",watt_threshold:"Поріг переходу ват → кіловат",display_zero_lines:"Показувати лінії з нульовим значенням",clickable_entities:"Клікабельні сутності",disable_dots:"Вимкнути точки",use_new_flow_rate_model:"Новий алгоритм швидкості потоку",use_metadata:"Використовувати метадані",mode:"Режим",show:"Показати",hide:"Приховати",custom:"Користувацький",grey_out:"Затемнити неактивні",transparency:"Прозорість",grey_color:"Колір затемнення",tap_action:"Дія при натисканні",navigation_path:"Шлях переходу",sort_individual_devices:"Сортувати окремі пристрої"},qo={card:Ko,editor:Yo};const Xo={cs:Object.freeze({__proto__:null,card:Qt,editor:eo,default:to}),en:Object.freeze({__proto__:null,card:oo,editor:io,default:ao}),de:Object.freeze({__proto__:null,card:no,editor:ro,default:lo}),dk:Object.freeze({__proto__:null,card:so,editor:co,default:uo}),pt:Object.freeze({__proto__:null,card:po,editor:ho,default:vo}),pt_BR:Object.freeze({__proto__:null,card:_o,editor:mo,default:fo}),es:Object.freeze({__proto__:null,card:yo,editor:go,default:bo}),nl:Object.freeze({__proto__:null,card:wo,editor:xo,default:ko}),it:Object.freeze({__proto__:null,card:So,editor:$o,default:Co}),fr:Object.freeze({__proto__:null,card:Eo,editor:Ao,default:Mo}),ru:Object.freeze({__proto__:null,card:zo,editor:Po,default:Do}),fi:Object.freeze({__proto__:null,card:To,editor:Oo,default:No}),pl:Object.freeze({__proto__:null,card:jo,editor:Bo,default:Lo}),sk:Object.freeze({__proto__:null,card:Io,editor:Ho,default:Ro}),sv:Object.freeze({__proto__:null,card:Fo,editor:Go,default:Uo}),hi:Object.freeze({__proto__:null,card:Vo,editor:Wo,default:Zo}),ua:Object.freeze({__proto__:null,card:Ko,editor:Yo,default:qo})},Jo="en";function Qo(e,t){try{return e.split(".").reduce(((e,t)=>e[t]),Xo[t])}catch(e){return}}function ei(e){let t=Qo(e,(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_"));return t||(t=Qo(e,Jo)),null!=t?t:e}function ti(){return{type:"expandable",title:ei("editor.combined"),schema:[{name:"entity",selector:{entity:{}}}]}}function oi(){return{type:"expandable",title:ei("editor.separated"),name:"entity",schema:[{name:"consumption",label:"Consumption Entity",selector:{entity:{}}},{name:"production",label:"Production Entity",selector:{entity:{}}}]}}const ii={name:"color",title:ei("editor.custom_colors"),type:"expandable",schema:[{type:"grid",column_min_width:"200px",schema:[{name:"consumption",label:"Consumption",selector:{color_rgb:{}}},{name:"production",label:"Production",selector:{color_rgb:{}}}]}]},ai=[{name:"tap_action",selector:{ui_action:{}}}],ni=[{name:"entity",selector:{entity:{}}},{name:"template",label:"Template (overrides entity, save to update)",selector:{template:{}}},{type:"grid",column_min_width:"200px",schema:[{name:"icon",selector:{icon:{}}},{name:"unit_of_measurement",label:"Unit of Measurement",selector:{text:{}}},{name:"decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:10,step:1}}},{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"accept_negative",label:"Accept Negative",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}}]},{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],ri=[{name:"color_icon",label:"Color of Icon",selector:{select:{options:[{value:!1,label:"Do not Color"},{value:!0,label:"Color dynamically"},{value:"production",label:"Production"},{value:"consumption",label:"Consumption"}],custom_value:!0}}},{name:"color_circle",label:"Color of Circle",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Consumption"},{value:"production",label:"Production"}],custom_value:!0}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{min:0,max:1e6,step:1,mode:"box"}}},{name:"display_state",label:"Display State",selector:{select:{options:[{value:"two_way",label:"Two Way"},{value:"one_way_no_zero",label:"One Way"},{value:"one_way",label:"One Way (Show Zero)"}],custom_value:!0}}}];function li(e){const t={type:"grid",column_min_width:"200px",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}}}]};return"battery"!==e&&"grid"!==e||t.schema.push(...ri),t}const si=Object.assign(Object.assign({},li("battery")),{schema:[...li("battery").schema,{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"color_value",label:"Color of Value",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),di=[ti(),oi(),{title:ei("editor.state_of_charge"),name:"",type:"expandable",schema:[{name:"state_of_charge",label:"State of Charge Entity",selector:{entity:{}}},{name:"",type:"grid",column_min_width:"200px",schema:[{name:"state_of_charge_unit",label:"Unit",selector:{text:{}}},{name:"state_of_charge_unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"state_of_charge_decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:4,step:1}}},{name:"show_state_of_charge",label:"Show State of Charge",selector:{boolean:{}}},{name:"color_state_of_charge_value",label:"Color of Value",selector:{select:{options:[{value:!1,label:"Do Not Color"},{value:!0,label:"Color dynamically"},{value:"consumption",label:"Consumption"},{value:"production",label:"Production"}],custom_value:!0}}}]}]},si,ii,{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],ci={name:"grey_color",selector:{color_rgb:{}}},ui={name:"transparency",selector:{number:{min:0,max:100,step:1,mode:"box"}}},pi={name:"",type:"grid",column_min_width:"200px",schema:[ui,ci]},hi=e=>{switch(e){case"grey_out":return ci;case"transparency":return ui;case"custom":return pi;default:return[]}},vi=Jt(((e,t)=>[{name:"display_zero_lines",type:"grid",column_min_width:"400px",schema:[{name:"mode",selector:{select:{mode:"dropdown",options:[{value:"show",label:e("editor.show")},{value:"hide",label:e("editor.hide")},{value:"transparency",label:e("editor.transparency")},{value:"grey_out",label:e("editor.grey_out")},{value:"custom",label:e("editor.custom")}]}}},hi(t)]}])),_i=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},li()),{schema:[...li().schema,{name:"state_type",label:"State Type",selector:{select:{options:[{value:"power",label:"Power"},{value:"percentage",label:"Percentage"}],custom_value:!0}}},{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"display_zero_state",label:"Display Zero State",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:ei("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:ni},{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],mi=Object.assign(Object.assign({},li("grid")),{schema:[...li("grid").schema,{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}},{name:"color_value",label:"Color of Value",selector:{boolean:{}}}]}),fi=[ti(),oi(),mi,ii,{title:ei("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:ni},{title:ei("editor.power_outage"),name:"power_outage",type:"expandable",schema:[{type:"grid",column_min_width:"200px",schema:[{name:"entity",selector:{entity:{}}},{name:"entity_generator",label:"Generator Entity",selector:{entity:{}}},{name:"label_alert",label:"Outage Label",selector:{text:{}}},{name:"icon_alert",label:"Outage Icon",selector:{icon:{}}},{name:"state_alert",label:"Outage State",selector:{text:{}}}]}]},{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],yi=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},li()),{schema:[...li().schema,{name:"color_value",label:"Color Value",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Do Not Color"},{value:"solar",label:"Solar"},{value:"grid",label:"Grid"},{value:"battery",label:"Battery"}],custom_value:!0}}},{name:"color_icon",label:"Color Icon",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Do Not Color"},{value:"solar",label:"Solar"},{value:"grid",label:"Grid"},{value:"battery",label:"Battery"}],custom_value:!0}}},{name:"circle_animation",label:"Circle Animation",default:!0,selector:{boolean:{}}},{name:"subtract_individual",label:"Subtract Individual",selector:{boolean:{}}},{name:"override_state",label:"Override State (With Home Entity)",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}},{name:"hide",label:"Hide Home",selector:{boolean:{}}}]}),{title:ei("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:ni},{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],gi=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},li()),{schema:[...li().schema,{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"display_zero_state",label:"Display Zero State",selector:{boolean:{}}},{name:"unit_of_measurement",label:"Unit of Measurement",selector:{text:{}}},{name:"calculate_flow_rate",label:"Calculate Flow Rate",selector:{boolean:{}}},{name:"decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:4,step:1}}},{name:"inverted_animation",label:"Invert Animation",selector:{boolean:{}}},{name:"show_direction",label:"Show Direction",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",default:!0,selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:ei("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:ni},{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],bi=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},li()),{schema:[...li().schema,{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",default:!0,selector:{boolean:{}}},{name:"display_zero_state",label:"Display State When Zero?",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:ei("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:ni},{title:ei("editor.tap_action"),name:"",type:"expandable",schema:ai}],wi=function(...e){const t="type"===e[0].type,o=e.map((e=>e.schema)),i=Object.assign({},...o);return t?function(e){const t=Object.keys(e);return new Lt({type:"type",schema:e,*entries(o){if(Tt(o))for(const i of t)yield[i,o[i],e[i]]},validator:e=>Tt(e)||`Expected an object, but received: ${Ot(e)}`,coercer:e=>Tt(e)?{...e}:e})}(i):Wt(i)}(Wt({type:Kt(),view_layout:Ft(),layout_options:Ft(),grid_options:Ft(),visibility:Ft(),disabled:Zt(Gt())}),Wt({title:Zt(Kt()),theme:Zt(Kt()),dashboard_link:Zt(Kt()),dashboard_link_label:Zt(Kt()),second_dashboard_link:Zt(Kt()),second_dashboard_link_label:Zt(Kt()),inverted_entities:Zt(Ft()),w_decimals:Zt(Ut()),kw_decimals:Zt(Ut()),min_flow_rate:Zt(Vt()),max_flow_rate:Zt(Vt()),min_expected_power:Zt(Vt()),max_expected_power:Zt(Vt()),watt_threshold:Zt(Vt()),clickable_entities:Zt(Gt()),transparency_zero_lines:Zt(Vt()),greyout_zero_lines:Zt(Gt()),display_zero_lines:Zt(Ft()),use_new_flow_rate_model:Zt(Gt()),full_size:Zt(Gt()),style_ha_card:Zt(Ft()),style_card_content:Zt(Ft()),disable_dots:Zt(Gt()),entities:Wt({battery:Zt(Ft()),grid:Zt(Ft()),solar:Zt(Ft()),home:Zt(Ft()),fossil_fuel_percentage:Zt(Ft()),individual:Zt(Ft())}),sort_individual_devices:Zt(Gt())})),xi=[{name:"title",label:"Title",selector:{text:{}}}];Jt((e=>[{name:"entities",type:"grid",column_min_width:"400px",schema:[{title:e("editor.grid"),name:"grid",type:"expandable",iconPath:"M8.28,5.45L6.5,4.55L7.76,2H16.23L17.5,4.55L15.72,5.44L15,4H9L8.28,5.45M18.62,8H14.09L13.3,5H10.7L9.91,8H5.38L4.1,10.55L5.89,11.44L6.62,10H17.38L18.1,11.45L19.89,10.56L18.62,8M17.77,22H15.7L15.46,21.1L12,15.9L8.53,21.1L8.3,22H6.23L9.12,11H11.19L10.83,12.35L12,14.1L13.16,12.35L12.81,11H14.88L17.77,22M11.4,15L10.5,13.65L9.32,18.13L11.4,15M14.68,18.12L13.5,13.64L12.6,15L14.68,18.12Z",schema:fi},{title:e("editor.solar"),name:"solar",type:"expandable",iconPath:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z",schema:bi},{title:e("editor.battery"),name:"battery",type:"expandable",iconPath:"M16 20H8V6H16M16.67 4H15V2H9V4H7.33C6.6 4 6 4.6 6 5.33V20.67C6 21.4 6.6 22 7.33 22H16.67C17.41 22 18 21.41 18 20.67V5.33C18 4.6 17.4 4 16.67 4M15 16H9V19H15V16M15 7H9V10H15V7M15 11.5H9V14.5H15V11.5Z",schema:di},{title:e("editor.fossil_fuel_percentage"),name:"fossil_fuel_percentage",type:"expandable",iconPath:"M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z",schema:_i},{title:e("editor.home"),name:"home",type:"expandable",iconPath:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",schema:yi}]}]));const ki=Jt((e=>[{name:"entities",type:"grid",column_min_width:"400px",schema:[{title:`${e("editor.individual")} 1`,name:"individual1",type:"expandable",schema:gi},{title:`${e("editor.individual")} 2`,name:"individual2",type:"expandable",schema:gi}]}])),Si=Jt(((e,t)=>[{type:"grid",column_min_width:"200px",schema:[{name:"dashboard_link",label:"Dashboard Link",selector:{navigation:{}}},{name:"dashboard_link_label",label:"Dashboard Link Label",selector:{text:{}}},{name:"w_decimals",label:"Watt Decimals",selector:{number:{mode:"box",min:0,max:5,step:1}}},{name:"kw_decimals",label:"kW Decimals",selector:{number:{mode:"box",min:0,max:5,step:1}}},{name:"max_flow_rate",label:"Max Flow Rate (Sec/Dot)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"min_flow_rate",label:"Min Flow Rate (Sec/Dot)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"max_expected_power",label:"Max Expected Power (in Watts)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"min_expected_power",label:"Min Expected Power (in Watts)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"watt_threshold",label:"Watt to Kilowatt Threshold",selector:{number:{mode:"box",min:0,max:1e6,step:1}}},{name:"clickable_entities",label:"Clickable Entities",selector:{boolean:{}}},{name:"disable_dots",label:"Disable Moving Dots",selector:{boolean:{}}},{name:"use_new_flow_rate_model",label:"New Flow Model?",selector:{boolean:{}}},{name:"sort_individual_devices",label:"Sort individual devices by usage",selector:{boolean:{}}}]},{type:"expandable",title:e("editor.display_zero_lines"),schema:[...vi(e,t)]}])),$i="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,Ci=(e,t,o=null)=>{for(;t!==o;){const o=t.nextSibling;e.removeChild(t),t=o}},Ei=`{{lit-${String(Math.random()).slice(2)}}}`,Ai=`\x3c!--${Ei}--\x3e`,Mi=new RegExp(`${Ei}|${Ai}`),zi="$lit$";class Pi{constructor(e,t){this.parts=[],this.element=t;const o=[],i=[],a=document.createTreeWalker(t.content,133,null,!1);let n=0,r=-1,l=0;const{strings:s,values:{length:d}}=e;for(;l<d;){const e=a.nextNode();if(null!==e){if(r++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:o}=t;let i=0;for(let e=0;e<o;e++)Di(t[e].name,zi)&&i++;for(;i-- >0;){const t=s[l],o=Ni.exec(t)[2],i=o.toLowerCase()+zi,a=e.getAttribute(i);e.removeAttribute(i);const n=a.split(Mi);this.parts.push({type:"attribute",index:r,name:o,strings:n}),l+=n.length-1}}"TEMPLATE"===e.tagName&&(i.push(e),a.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(Ei)>=0){const i=e.parentNode,a=t.split(Mi),n=a.length-1;for(let t=0;t<n;t++){let o,n=a[t];if(""===n)o=Oi();else{const e=Ni.exec(n);null!==e&&Di(e[2],zi)&&(n=n.slice(0,e.index)+e[1]+e[2].slice(0,-5)+e[3]),o=document.createTextNode(n)}i.insertBefore(o,e),this.parts.push({type:"node",index:++r})}""===a[n]?(i.insertBefore(Oi(),e),o.push(e)):e.data=a[n],l+=n}}else if(8===e.nodeType)if(e.data===Ei){const t=e.parentNode;null!==e.previousSibling&&r!==n||(r++,t.insertBefore(Oi(),e)),n=r,this.parts.push({type:"node",index:r}),null===e.nextSibling?e.data="":(o.push(e),r--),l++}else{let t=-1;for(;-1!==(t=e.data.indexOf(Ei,t+1));)this.parts.push({type:"node",index:-1}),l++}}else a.currentNode=i.pop()}for(const e of o)e.parentNode.removeChild(e)}}const Di=(e,t)=>{const o=e.length-t.length;return o>=0&&e.slice(o)===t},Ti=e=>-1!==e.index,Oi=()=>document.createComment(""),Ni=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function ji(e,t){const{element:{content:o},parts:i}=e,a=document.createTreeWalker(o,133,null,!1);let n=Li(i),r=i[n],l=-1,s=0;const d=[];let c=null;for(;a.nextNode();){l++;const e=a.currentNode;for(e.previousSibling===c&&(c=null),t.has(e)&&(d.push(e),null===c&&(c=e)),null!==c&&s++;void 0!==r&&r.index===l;)r.index=null!==c?-1:r.index-s,n=Li(i,n),r=i[n]}d.forEach((e=>e.parentNode.removeChild(e)))}const Bi=e=>{let t=11===e.nodeType?0:1;const o=document.createTreeWalker(e,133,null,!1);for(;o.nextNode();)t++;return t},Li=(e,t=-1)=>{for(let o=t+1;o<e.length;o++){const t=e[o];if(Ti(t))return o}return-1},Ii=new WeakMap,Hi=e=>"function"==typeof e&&Ii.has(e),Ri={},Fi={};class Gi{constructor(e,t,o){this.__parts=[],this.template=e,this.processor=t,this.options=o}update(e){let t=0;for(const o of this.__parts)void 0!==o&&o.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=$i?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],o=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let a,n=0,r=0,l=i.nextNode();for(;n<o.length;)if(a=o[n],Ti(a)){for(;r<a.index;)r++,"TEMPLATE"===l.nodeName&&(t.push(l),i.currentNode=l.content),null===(l=i.nextNode())&&(i.currentNode=t.pop(),l=i.nextNode());if("node"===a.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(l.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,a.name,a.strings,this.options));n++}else this.__parts.push(void 0),n++;return $i&&(document.adoptNode(e),customElements.upgrade(e)),e}}const Ui=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),Vi=` ${Ei} `;class Wi{constructor(e,t,o,i){this.strings=e,this.values=t,this.type=o,this.processor=i}getHTML(){const e=this.strings.length-1;let t="",o=!1;for(let i=0;i<e;i++){const e=this.strings[i],a=e.lastIndexOf("\x3c!--");o=(a>-1||o)&&-1===e.indexOf("--\x3e",a+1);const n=Ni.exec(e);t+=null===n?e+(o?Vi:Ai):e.substr(0,n.index)+n[1]+n[2]+zi+n[3]+Ei}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==Ui&&(t=Ui.createHTML(t)),e.innerHTML=t,e}}class Zi{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Oi()),this.endNode=e.appendChild(Oi())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=Oi()),e.__insert(this.endNode=Oi())}insertAfterPart(e){e.__insert(this.startNode=Oi()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;Hi(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Ri,e(this)}const e=this.__pendingValue;e!==Ri&&((e=>null===e||!("object"==typeof e||"function"==typeof e))(e)?e!==this.value&&this.__commitText(e):e instanceof Wi?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):(e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]))(e)?this.__commitIterable(e):e===Fi?(this.value=Fi,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,o="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=o:this.__commitNode(document.createTextNode(o)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof Gi&&this.value.template===t)this.value.update(e.values);else{const o=new Gi(t,e.processor,this.options),i=o._clone();o.update(e.values),this.__commitNode(i),this.value=o}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let o,i=0;for(const a of e)o=t[i],void 0===o&&(o=new Zi(this.options),t.push(o),0===i?o.appendIntoPart(this):o.insertAfterPart(t[i-1])),o.setValue(a),o.commit(),i++;i<t.length&&(t.length=i,this.clear(o&&o.endNode))}clear(e=this.startNode){Ci(this.startNode.parentNode,e.nextSibling,this.endNode)}}let Ki=!1;function Yi(e){let t=qi.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},qi.set(e.type,t));let o=t.stringsArray.get(e.strings);if(void 0!==o)return o;const i=e.strings.join(Ei);return o=t.keyString.get(i),void 0===o&&(o=new Pi(e,e.getTemplateElement()),t.keyString.set(i,o)),t.stringsArray.set(e.strings,o),o}(()=>{try{const e={get capture(){return Ki=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();const qi=new Map,Xi=new WeakMap;"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Ji=(e,t)=>`${e}--${t}`;let Qi=!0;void 0===window.ShadyCSS?Qi=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Qi=!1);const ea=e=>t=>{const o=Ji(t.type,e);let i=qi.get(o);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},qi.set(o,i));let a=i.stringsArray.get(t.strings);if(void 0!==a)return a;const n=t.strings.join(Ei);if(a=i.keyString.get(n),void 0===a){const o=t.getTemplateElement();Qi&&window.ShadyCSS.prepareTemplateDom(o,e),a=new Pi(t,o),i.keyString.set(n,a)}return i.stringsArray.set(t.strings,a),a},ta=["html","svg"],oa=new Set;window.JSCompiler_renameProperty=(e,t)=>e;const ia={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},aa=(e,t)=>t!==e&&(t==t||e==e),na={attribute:!0,type:String,converter:ia,reflect:!1,hasChanged:aa},ra="finalized";class la extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach(((t,o)=>{const i=this._attributeNameForProperty(o,t);void 0!==i&&(this._attributeToPropertyMap.set(i,o),e.push(i))})),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach(((e,t)=>this._classProperties.set(t,e)))}}static createProperty(e,t=na){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const o="symbol"==typeof e?Symbol():`__${e}`,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const a=this[e];this[t]=i,this.requestUpdateInternal(e,a,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||na}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(ra)||e.finalize(),this[ra]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const o of t)this.createProperty(o,e[o])}}static _attributeNameForProperty(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,o=aa){return o(e,t)}static _propertyValueFromAttribute(e,t){const o=t.type,i=t.converter||ia,a="function"==typeof i?i:i.fromAttribute;return a?a(e,o):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const o=t.type,i=t.converter;return(i&&i.toAttribute||ia.toAttribute)(e,o)}initialize(){this._updateState=0,this._updatePromise=new Promise((e=>this._enableUpdatingResolver=e)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((e,t)=>this[t]=e)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,o){t!==o&&this._attributeToProperty(e,o)}_propertyToAttribute(e,t,o=na){const i=this.constructor,a=i._attributeNameForProperty(e,o);if(void 0!==a){const e=i._propertyValueToAttribute(t,o);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(a):this.setAttribute(a,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const o=this.constructor,i=o._attributeToPropertyMap.get(e);if(void 0!==i){const e=o.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=o._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,o){let i=!0;if(void 0!==e){const a=this.constructor;o=o||a.getPropertyOptions(e),a._valueHasChanged(this[e],t,o.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==o.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,o))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((e,t)=>this._propertyToAttribute(t,this[t],e))),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}la[ra]=!0;const sa=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){window.customElements.define(e,t)}}})(e,t),da=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(o){o.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}};function ca(e){return(t,o)=>void 0!==o?((e,t,o)=>{t.constructor.createProperty(o,e)})(e,t,o):da(e,t)}const ua=e=>function(e){return ca({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})}(e),pa=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ha=Symbol();class va{constructor(e,t){if(t!==ha)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(pa?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const _a={};class ma extends la{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,o)=>e.reduceRight(((e,o)=>Array.isArray(o)?t(o,e):(e.add(o),e)),o),o=t(e,new Set),i=[];o.forEach((e=>i.unshift(e))),this._styles=i}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((e=>{if(e instanceof CSSStyleSheet&&!pa){const t=Array.prototype.slice.call(e.cssRules).reduce(((e,t)=>e+t.cssText),"");return new va(String(t),ha)}return e}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?pa?this.renderRoot.adoptedStyleSheets=e.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((e=>e.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==_a&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)})))}render(){return _a}}ma.finalized=!0,ma.render=(e,t,o)=>{if(!o||"object"!=typeof o||!o.scopeName)throw new Error("The `scopeName` option is required.");const i=o.scopeName,a=Xi.has(t),n=Qi&&11===t.nodeType&&!!t.host,r=n&&!oa.has(i),l=r?document.createDocumentFragment():t;if(((e,t,o)=>{let i=Xi.get(t);void 0===i&&(Ci(t,t.firstChild),Xi.set(t,i=new Zi(Object.assign({templateFactory:Yi},o))),i.appendInto(t)),i.setValue(e),i.commit()})(e,l,Object.assign({templateFactory:ea(i)},o)),r){const e=Xi.get(l);Xi.delete(l);((e,t,o)=>{oa.add(e);const i=o?o.element:document.createElement("template"),a=t.querySelectorAll("style"),{length:n}=a;if(0===n)return void window.ShadyCSS.prepareTemplateStyles(i,e);const r=document.createElement("style");for(let e=0;e<n;e++){const t=a[e];t.parentNode.removeChild(t),r.textContent+=t.textContent}(e=>{ta.forEach((t=>{const o=qi.get(Ji(t,e));void 0!==o&&o.keyString.forEach((e=>{const{element:{content:t}}=e,o=new Set;Array.from(t.querySelectorAll("style")).forEach((e=>{o.add(e)})),ji(e,o)}))}))})(e);const l=i.content;o?function(e,t,o=null){const{element:{content:i},parts:a}=e;if(null==o)return void i.appendChild(t);const n=document.createTreeWalker(i,133,null,!1);let r=Li(a),l=0,s=-1;for(;n.nextNode();)for(s++,n.currentNode===o&&(l=Bi(t),o.parentNode.insertBefore(t,o));-1!==r&&a[r].index===s;){if(l>0){for(;-1!==r;)a[r].index+=l,r=Li(a,r);return}r=Li(a,r)}}(o,r,l.firstChild):l.insertBefore(r,l.firstChild),window.ShadyCSS.prepareTemplateStyles(i,e);const s=l.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==s)t.insertBefore(s.cloneNode(!0),t.firstChild);else if(o){l.insertBefore(r,l.firstChild);const e=new Set;e.add(r),ji(o,e)}})(i,l,e.value instanceof Gi?e.value.template:void 0),Ci(t,t.firstChild),t.appendChild(l),Xi.set(t,e)}!a&&n&&window.ShadyCSS.styleElement(t.host)},ma.shadowRootOptions={mode:"open"};const{I:fa}=ae,ya=()=>document.createComment(""),ga=(e,t,o)=>{var i;const a=e._$AA.parentNode,n=void 0===t?e._$AB:t._$AA;if(void 0===o){const t=a.insertBefore(ya(),n),i=a.insertBefore(ya(),n);o=new fa(t,i,e,e.options)}else{const t=o._$AB.nextSibling,r=o._$AM,l=r!==e;if(l){let t;null===(i=o._$AQ)||void 0===i||i.call(o,e),o._$AM=e,void 0!==o._$AP&&(t=e._$AU)!==r._$AU&&o._$AP(t)}if(t!==n||l){let e=o._$AA;for(;e!==t;){const t=e.nextSibling;a.insertBefore(e,n),e=t}}}return o},ba=(e,t,o=e)=>(e._$AI(t,o),e),wa={},xa=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let o=e._$AA;const i=e._$AB.nextSibling;for(;o!==i;){const e=o.nextSibling;o.remove(),o=e}},ka=(e,t,o)=>{const i=new Map;for(let a=t;a<=o;a++)i.set(e[a],a);return i},Sa=Ce(class extends Ee{constructor(e){if(super(e),2!==e.type)throw Error("repeat() can only be used in text expressions")}ct(e,t,o){let i;void 0===o?o=t:void 0!==t&&(i=t);const a=[],n=[];let r=0;for(const t of e)a[r]=i?i(t,r):r,n[r]=o(t,r),r++;return{values:n,keys:a}}render(e,t,o){return this.ct(e,t,o).values}update(e,[t,o,i]){var a;const n=(e=>e._$AH)(e),{values:r,keys:l}=this.ct(t,o,i);if(!Array.isArray(n))return this.ut=l,r;const s=null!==(a=this.ut)&&void 0!==a?a:this.ut=[],d=[];let c,u,p=0,h=n.length-1,v=0,_=r.length-1;for(;p<=h&&v<=_;)if(null===n[p])p++;else if(null===n[h])h--;else if(s[p]===l[v])d[v]=ba(n[p],r[v]),p++,v++;else if(s[h]===l[_])d[_]=ba(n[h],r[_]),h--,_--;else if(s[p]===l[_])d[_]=ba(n[p],r[_]),ga(e,d[_+1],n[p]),p++,_--;else if(s[h]===l[v])d[v]=ba(n[h],r[v]),ga(e,n[p],n[h]),h--,v++;else if(void 0===c&&(c=ka(l,v,_),u=ka(s,p,h)),c.has(s[p]))if(c.has(s[h])){const t=u.get(l[v]),o=void 0!==t?n[t]:null;if(null===o){const t=ga(e,n[p]);ba(t,r[v]),d[v]=t}else d[v]=ba(o,r[v]),ga(e,n[p],o),n[t]=null;v++}else xa(n[h]),h--;else xa(n[p]),p++;for(;v<=_;){const t=ga(e,d[_+1]);ba(t,r[v]),d[v++]=t}for(;p<=h;){const e=n[p++];null!==e&&xa(e)}return this.ut=l,((e,t=wa)=>{e._$AH=t})(e,d),F}}),$a=(e,t,o,i)=>{i=i||{},o=null==o?{}:o;const a=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return a.detail=o,e.dispatchEvent(a),a},Ca=r`#sortable a:nth-of-type(2n) paper-icon-item{animation-name:keyframes1;animation-iteration-count:infinite;transform-origin:50% 10%;animation-delay:-.75s;animation-duration:.25s}#sortable a:nth-of-type(2n-1) paper-icon-item{animation-name:keyframes2;animation-iteration-count:infinite;animation-direction:alternate;transform-origin:30% 5%;animation-delay:-.5s;animation-duration:.33s}#sortable a{height:48px;display:flex}#sortable{outline:0;display:block!important}.hidden-panel{display:flex!important}.sortable-fallback{display:none}.sortable-ghost{opacity:.4}.sortable-fallback{opacity:0}@keyframes keyframes1{0%{transform:rotate(-1deg);animation-timing-function:ease-in}50%{transform:rotate(1.5deg);animation-timing-function:ease-out}}@keyframes keyframes2{0%{transform:rotate(1deg);animation-timing-function:ease-in}50%{transform:rotate(-1.5deg);animation-timing-function:ease-out}}.hide-panel,.show-panel{display:none;position:absolute;top:0;right:4px;--mdc-icon-button-size:40px}:host([rtl]) .show-panel{right:initial;left:4px}.hide-panel{top:4px;right:8px}:host([rtl]) .hide-panel{right:initial;left:8px}:host([expanded]) .hide-panel{display:block}:host([expanded]) .show-panel{display:inline-flex}paper-icon-item.hidden-panel,paper-icon-item.hidden-panel ha-icon[slot=item-icon],paper-icon-item.hidden-panel span{color:var(--secondary-text-color);cursor:pointer}`;let Ea;const Aa=async()=>{var e,t,o,i;customElements.get("ha-form")||null===(e=customElements.get("hui-button-card"))||void 0===e||e.getConfigElement(),customElements.get("ha-entity-picker")||null===(t=customElements.get("hui-entities-card"))||void 0===t||t.getConfigElement(),customElements.get("ha-form")||await(null===(i=(o=window).loadCardHelpers)||void 0===i?void 0:i.call(o))};let Ma=class extends se{constructor(){super(...arguments),this._indexBeingEdited=-1,this._entityKeys=new WeakMap,this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||ei(`editor.${null==e?void 0:e.name}`)}connectedCallback(){super.connectedCallback(),Aa()}disconnectedCallback(){super.disconnectedCallback(),this._destroySortable()}_editRowElement(e){this._indexBeingEdited=e}_getKey(e){return this._entityKeys.has(e)||this._entityKeys.set(e,Math.random().toString()),this._entityKeys.get(e)}render(){return this.entities&&this.hass?-1!==this._indexBeingEdited?H`<div class="individual-header"><h4>${this._indexBeingEdited+1} / ${this.entities.length} ${ei("editor.individual")}</h4><ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.clear")}" .path="${Yt}" class="remove-icon" @click="${()=>this._indexBeingEdited=-1}"></ha-icon-button></div><ha-form .hass="${this.hass}" .data="${this.entities[this._indexBeingEdited]}" .schema="${gi}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._configChanged}"></ha-form>`:H`<div class="entities">${Sa(this.entities,(e=>this._getKey(e)),((e,t)=>H`<div class="entity"><div class="handle"><ha-svg-icon .path="${"M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z"}"></ha-svg-icon></div>${e.type?H`<div class="special-row"><div><span>${this.hass.localize(`ui.panel.lovelace.editor.card.entities.entity_row.${e.type}`)} </span><span class="secondary">${this.hass.localize("ui.panel.lovelace.editor.card.entities.edit_special_row")}</span></div></div>`:H`<ha-entity-picker allow-custom-entity hideClearIcon .hass="${this.hass}" .value="${e.entity}" .index="${t}" @value-changed="${this._valueChanged}"></ha-entity-picker>`}<ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.clear")}" .path="${Yt}" class="remove-icon" .index="${t}" @click="${this._removeRow}"></ha-icon-button><ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.edit")}" .path="${"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}" class="edit-icon" .index="${t}" @click="${()=>this._editRowElement(t)}"></ha-icon-button></div>`))}</div><ha-entity-picker class="add-entity" .hass="${this.hass}" @value-changed="${this._addEntity}"></ha-entity-picker>`:H`<p>No entities configured.</p>`}_configChanged(e){const t=e.detail.value||"";if(!this.config||!this.hass)return;Array.isArray(this.config.entities.individual)||(this.config.entities.individual=[]);const o=[...this.config.entities.individual];if(!o)return;o[this._indexBeingEdited]=t;const i=Object.assign(Object.assign({},this.config),{entities:Object.assign(Object.assign({},this.config.entities),{individual:o})});$a(this,"config-changed",{config:i})}firstUpdated(){this._createSortable()}async _createSortable(){const e=await(async()=>(Ea||(Ea=(await Promise.resolve().then((function(){return Hr}))).default),Ea))();this._sortable=new e(this.shadowRoot.querySelector(".entities"),{animation:150,fallbackClass:"sortable-fallback",handle:".handle",onChoose:e=>{e.item.placeholder=document.createComment("sort-placeholder"),e.item.after(e.item.placeholder)},onEnd:e=>{e.item.placeholder&&(e.item.placeholder.replaceWith(e.item),delete e.item.placeholder),this._rowMoved(e)}})}_destroySortable(){var e;null===(e=this._sortable)||void 0===e||e.destroy(),this._sortable=void 0}async _addEntity(e){const t=e.detail.value;if(""===t)return;const o=this.entities.concat({entity:t});e.target.value="",$a(this,"entities-changed",{entities:o})}_rowMoved(e){if(e.oldIndex===e.newIndex)return;const t=this.entities.concat();t.splice(e.newIndex,0,t.splice(e.oldIndex,1)[0]),$a(this,"entities-changed",{entities:t})}_removeRow(e){const t=e.currentTarget.index,o=this.entities.concat();o.splice(t,1),$a(this,"entities-changed",{entities:o})}_valueChanged(e){const t=e.detail.value,o=e.target.index,i=this.entities.concat();""===t||void 0===t?i.splice(o,1):i[o]=Object.assign(Object.assign({},i[o]),{entity:t}),$a(this,"entities-changed",{entities:i})}_editRow(e){const t=e.currentTarget.index;$a(this,"edit-detail-element",{subElementConfig:{index:t,type:"row",elementConfig:this.entities[t]}})}static get styles(){return[Ca,r`ha-entity-picker{margin-top:8px}.individual-header{display:flex;justify-content:space-between;align-items:center;margin-inline:.2rem;margin-bottom:1rem}.add-entity{display:block;margin-left:31px;margin-right:71px;margin-inline-start:31px;margin-inline-end:71px;direction:var(--direction)}.entity{display:flex;align-items:center}.entity .handle{padding-right:8px;cursor:move;padding-inline-end:8px;padding-inline-start:initial;direction:var(--direction)}.entity .handle>*{pointer-events:none}.entity ha-entity-picker{flex-grow:1}.special-row{height:60px;font-size:16px;display:flex;align-items:center;justify-content:space-between;flex-grow:1}.special-row div{display:flex;flex-direction:column}.edit-icon,.remove-icon{--mdc-icon-button-size:36px;color:var(--secondary-text-color)}.secondary{font-size:12px;color:var(--secondary-text-color)}`]}};e([he({attribute:!1})],Ma.prototype,"hass",void 0),e([he({attribute:!1})],Ma.prototype,"config",void 0),e([he({attribute:!1})],Ma.prototype,"entities",void 0),e([he()],Ma.prototype,"label",void 0),e([ve()],Ma.prototype,"_indexBeingEdited",void 0),Ma=e([ce("individual-row-editor")],Ma);let za=class extends se{constructor(){super(...arguments),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||ei(`editor.${null==e?void 0:e.name}`)}render(){return this.config&&this.hass?(this._configEntities=this.config.entities.individual,this._subElementEditorConfig?H`<ha-form .hass="${this.hass}" @value-changed="${this._valueChanged}" .data="${this.config}" .schema="${ki(this.hass)}" .computeLabel="${this._computeLabelCallback}"></ha-form>`:H`<individual-row-editor .hass="${this.hass}" .config="${this.config}" .entities="${this._configEntities||[]}" @open-sub-element-editor="${this._editDetailElement}" @entities-changed="${this._entitiesChanged}" style="width:100%"></individual-row-editor>`):H`<div>no config</div>`}_valueChanged(e){let t=e.detail.value||"";this.config&&this.hass&&we(this,"config-changed",{config:t})}_entitiesChanged(e){let t=this.config;t=Object.assign(Object.assign({},t),{entities:Object.assign(Object.assign({},t.entities),{individual:e.detail.entities})}),this._configEntities=t.entities.individual.map((e=>"string"==typeof e?{entity:e}:e)),we(this,"config-changed",{config:t})}_editDetailElement(e){this._subElementEditorConfig=e.detail.subElementConfig}static get styles(){return r``}};e([ca({attribute:!1})],za.prototype,"config",void 0),e([ua()],za.prototype,"_subElementEditorConfig",void 0),e([ua()],za.prototype,"_configEntities",void 0),za=e([sa("individual-devices-editor")],za);let Pa=class extends se{constructor(){super(...arguments),this.outlined=!1,this.leftChevron=!1,this.icon="mdi:format-list-bulleted-type"}render(){return H`<div class="link-subpage" @click="${this._openSubElementPage}" @keydown="${this._openSubElementPage}" @focus="${this._focusChanged}" @blur="${this._focusChanged}" role="button"><ha-icon icon="${this.icon}" class="summary-icon"></ha-icon><slot name="header"><div class="header">${this.header}<slot class="secondary" name="secondary">${this.secondary}</slot></div></slot><ha-svg-icon .path="${"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}" class="summary-icon-right"></ha-svg-icon></div>`}_focusChanged(e){this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}_openSubElementPage(){we(this,"open-sub-element-editor",{open:!0})}static get styles(){return r`:host{display:block}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));border-radius:var(--ha-card-border-radius,12px)}:host([leftchevron]) .summary-icon{margin-left:0;margin-right:8px}.link-subpage{width:100%;display:flex;gap:1rem;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:500;outline:0}.summary-icon{transition:transform 150ms cubic-bezier(.4,0,.2,1);direction:var(--direction);color:var(--secondary-text-color)}.header,::slotted([slot=header]){flex:1}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1);height:0}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:12px}`}};var Da;e([ca({type:String})],Pa.prototype,"path",void 0),e([ca({type:Boolean,reflect:!0})],Pa.prototype,"outlined",void 0),e([ca({type:Boolean,reflect:!0})],Pa.prototype,"leftChevron",void 0),e([ca()],Pa.prototype,"header",void 0),e([ca({type:String})],Pa.prototype,"icon",void 0),e([ca()],Pa.prototype,"secondary",void 0),e([(Da=".container",(e,t)=>{const o={get(){return this.renderRoot.querySelector(Da)},enumerable:!0,configurable:!0};return void 0!==t?((e,t,o)=>{Object.defineProperty(t,o,e)})(o,e,t):((e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}))(o,e)})],Pa.prototype,"_container",void 0),Pa=e([sa("link-subpage")],Pa);let Ta=class extends se{render(){return H`<div class="header"><div class="back-title"><ha-icon-button .label="${"Go Back"}" .path="${"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}" @click="${this._goBack}"></ha-icon-button><span>${ei(`editor.${this.page}`)}</span></div></div>`}_goBack(){we(this,"go-back")}static get styles(){return r`.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.back-title{display:flex;align-items:center;font-size:18px}`}};e([ca({attribute:!1})],Ta.prototype,"config",void 0),e([ca()],Ta.prototype,"page",void 0),Ta=e([sa("subpage-header")],Ta);const Oa=[{page:"grid",icon:"mdi:transmission-tower",schema:fi},{page:"solar",icon:"mdi:solar-power",schema:bi},{page:"battery",icon:"mdi:battery-high",schema:di},{page:"fossil_fuel_percentage",icon:"mdi:leaf",schema:_i},{page:"home",icon:"mdi:home",schema:yi},{page:"individual",icon:"mdi:dots-horizontal-circle-outline"},{page:"advanced",icon:"mdi:cog",schema:Si}];let Na=class extends se{constructor(){super(...arguments),this._configEntities=[],this._currentConfigPage=null,this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||ei(`editor.${null==e?void 0:e.name}`)}async setConfig(e){It(e,wi),this._config=e}connectedCallback(){super.connectedCallback(),Aa()}_editDetailElement(e){this._currentConfigPage=e}_goBack(){this._currentConfigPage=null}render(){var e,t,o,i,a,n,r,l,s;if(!this.hass||!this._config)return G;const d=Object.assign(Object.assign({},this._config),{display_zero_lines:{mode:null!==(t=null===(e=this._config.display_zero_lines)||void 0===e?void 0:e.mode)&&void 0!==t?t:Mt.displayZeroLines.mode,transparency:null!==(i=null===(o=this._config.display_zero_lines)||void 0===o?void 0:o.transparency)&&void 0!==i?i:Mt.displayZeroLines.transparency,grey_color:null!==(n=null===(a=this._config.display_zero_lines)||void 0===a?void 0:a.grey_color)&&void 0!==n?n:Mt.displayZeroLines.grey_color}});if(null!==this._currentConfigPage){if("individual"===this._currentConfigPage)return H`<subpage-header @go-back="${this._goBack}" page="${this._currentConfigPage}"></subpage-header><individual-devices-editor .hass="${this.hass}" .config="${this._config}" @config-changed="${this._valueChanged}"></individual-devices-editor>`;const e=this._currentConfigPage,t="advanced"===e?Si(ei,null!==(l=null===(r=this._config.display_zero_lines)||void 0===r?void 0:r.mode)&&void 0!==l?l:Mt.displayZeroLines.mode):null===(s=Oa.find((t=>t.page===e)))||void 0===s?void 0:s.schema,o="advanced"===e?d:d.entities[e];return H`<subpage-header @go-back="${this._goBack}" page="${this._currentConfigPage}"></subpage-header><ha-form .hass="${this.hass}" .data="${o}" .schema="${t}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>`}const c=(e,t="mdi:dots-horizontal-circle-outline")=>{if(null===e)return H``;const o=(()=>{var o,i;return"individual"===e||"advanced"===e?t:(null===(i=null===(o=null==this?void 0:this._config)||void 0===o?void 0:o.entities[e])||void 0===i?void 0:i.icon)||t})();return H`<link-subpage path="${e}" header="${ei(`editor.${e}`)}" @open-sub-element-editor="${()=>this._editDetailElement(e)}" icon="${o}"></link-subpage>`};return H`<div class="card-config"><ha-form .hass="${this.hass}" .data="${d}" .schema="${xi}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>${Oa.map((e=>c(e.page,e.icon)))}</div>`}_valueChanged(e){let t=e.detail.value||"";this._config&&this.hass&&(null!==this._currentConfigPage&&"advanced"!==this._currentConfigPage&&"individual"!==this._currentConfigPage&&(t=Object.assign(Object.assign({},this._config),{entities:Object.assign(Object.assign({},this._config.entities),{[this._currentConfigPage]:t})})),we(this,"config-changed",{config:t}))}static get styles(){return r`ha-form{width:100%}ha-icon-button{align-self:center}.entities-section *{background-color:red}.card-config{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:10px}.config-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.config-header.sub-header{margin-top:24px}ha-icon{padding-bottom:2px;position:relative;top:-4px;right:1px}`}};e([he({attribute:!1})],Na.prototype,"hass",void 0),e([ve()],Na.prototype,"_config",void 0),e([ve()],Na.prototype,"_configEntities",void 0),e([ve()],Na.prototype,"_currentConfigPage",void 0),Na=e([ce("power-flow-card-plus-editor")],Na);var ja=Object.freeze({__proto__:null,get PowerFlowCardPlusEditor(){return Na}});function Ba(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function La(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(o),!0).forEach((function(t){Ha(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ba(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}function Ha(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Ra(){return Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Ra.apply(this,arguments)}function Fa(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Ga=Fa(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ua=Fa(/Edge/i),Va=Fa(/firefox/i),Wa=Fa(/safari/i)&&!Fa(/chrome/i)&&!Fa(/android/i),Za=Fa(/iP(ad|od|hone)/i),Ka=Fa(/chrome/i)&&Fa(/android/i),Ya={capture:!1,passive:!1};function qa(e,t,o){e.addEventListener(t,o,!Ga&&Ya)}function Xa(e,t,o){e.removeEventListener(t,o,!Ga&&Ya)}function Ja(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Qa(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function en(e,t,o,i){if(e){o=o||document;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&Ja(e,t):Ja(e,t))||i&&e===o)return e;if(e===o)break}while(e=Qa(e))}return null}var tn,on=/\s+/g;function an(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(on," ").replace(" "+t+" "," ");e.className=(i+(o?" "+t:"")).replace(on," ")}}function nn(e,t,o){var i=e&&e.style;if(i){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=o+("string"==typeof o?"":"px")}}function rn(e,t){var o="";if("string"==typeof e)o=e;else do{var i=nn(e,"transform");i&&"none"!==i&&(o=i+" "+o)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(o)}function ln(e,t,o){if(e){var i=e.getElementsByTagName(t),a=0,n=i.length;if(o)for(;a<n;a++)o(i[a],a);return i}return[]}function sn(){return document.scrollingElement||document.documentElement}function dn(e,t,o,i,a){if(e.getBoundingClientRect||e===window){var n,r,l,s,d,c,u;if(e!==window&&e.parentNode&&e!==sn()?(r=(n=e.getBoundingClientRect()).top,l=n.left,s=n.bottom,d=n.right,c=n.height,u=n.width):(r=0,l=0,s=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(t||o)&&e!==window&&(a=a||e.parentNode,!Ga))do{if(a&&a.getBoundingClientRect&&("none"!==nn(a,"transform")||o&&"static"!==nn(a,"position"))){var p=a.getBoundingClientRect();r-=p.top+parseInt(nn(a,"border-top-width")),l-=p.left+parseInt(nn(a,"border-left-width")),s=r+n.height,d=l+n.width;break}}while(a=a.parentNode);if(i&&e!==window){var h=rn(a||e),v=h&&h.a,_=h&&h.d;h&&(s=(r/=_)+(c/=_),d=(l/=v)+(u/=v))}return{top:r,left:l,bottom:s,right:d,width:u,height:c}}}function cn(e,t,o){for(var i=_n(e,!0),a=dn(e)[t];i;){var n=dn(i)[o];if(!("top"===o||"left"===o?a>=n:a<=n))return i;if(i===sn())break;i=_n(i,!1)}return!1}function un(e,t,o,i){for(var a=0,n=0,r=e.children;n<r.length;){if("none"!==r[n].style.display&&r[n]!==yr.ghost&&(i||r[n]!==yr.dragged)&&en(r[n],o.draggable,e,!1)){if(a===t)return r[n];a++}n++}return null}function pn(e,t){for(var o=e.lastElementChild;o&&(o===yr.ghost||"none"===nn(o,"display")||t&&!Ja(o,t));)o=o.previousElementSibling;return o||null}function hn(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===yr.clone||t&&!Ja(e,t)||o++;return o}function vn(e){var t=0,o=0,i=sn();if(e)do{var a=rn(e),n=a.a,r=a.d;t+=e.scrollLeft*n,o+=e.scrollTop*r}while(e!==i&&(e=e.parentNode));return[t,o]}function _n(e,t){if(!e||!e.getBoundingClientRect)return sn();var o=e,i=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var a=nn(o);if(o.clientWidth<o.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!o.getBoundingClientRect||o===document.body)return sn();if(i||t)return o;i=!0}}}while(o=o.parentNode);return sn()}function mn(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function fn(e,t){return function(){if(!tn){var o=arguments;1===o.length?e.call(this,o[0]):e.apply(this,o),tn=setTimeout((function(){tn=void 0}),t)}}}function yn(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function gn(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}function bn(e,t,o){var i={};return Array.from(e.children).forEach((function(a){var n,r,l,s;if(en(a,t.draggable,e,!1)&&!a.animated&&a!==o){var d=dn(a);i.left=Math.min(null!==(n=i.left)&&void 0!==n?n:1/0,d.left),i.top=Math.min(null!==(r=i.top)&&void 0!==r?r:1/0,d.top),i.right=Math.max(null!==(l=i.right)&&void 0!==l?l:-1/0,d.right),i.bottom=Math.max(null!==(s=i.bottom)&&void 0!==s?s:-1/0,d.bottom)}})),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var wn="Sortable"+(new Date).getTime();var xn=[],kn={initializeByDefault:!0},Sn={mount:function(e){for(var t in kn)kn.hasOwnProperty(t)&&!(t in e)&&(e[t]=kn[t]);xn.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),xn.push(e)},pluginEvent:function(e,t,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var a=e+"Global";xn.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][a]&&t[i.pluginName][a](La({sortable:t},o)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](La({sortable:t},o)))}))},initializePlugins:function(e,t,o,i){for(var a in xn.forEach((function(i){var a=i.pluginName;if(e.options[a]||i.initializeByDefault){var n=new i(e,t,e.options);n.sortable=e,n.options=e.options,e[a]=n,Ra(o,n.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var n=this.modifyOption(e,a,e.options[a]);void 0!==n&&(e.options[a]=n)}},getEventProperties:function(e,t){var o={};return xn.forEach((function(i){"function"==typeof i.eventProperties&&Ra(o,i.eventProperties.call(t[i.pluginName],e))})),o},modifyOption:function(e,t,o){var i;return xn.forEach((function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(i=a.optionListeners[t].call(e[a.pluginName],o))})),i}},$n=["evt"],Cn=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.evt,a=function(e,t){if(null==e)return{};var o,i,a=function(e,t){if(null==e)return{};var o,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)o=n[i],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)o=n[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}(o,$n);Sn.pluginEvent.bind(yr)(e,t,La({dragEl:An,parentEl:Mn,ghostEl:zn,rootEl:Pn,nextEl:Dn,lastDownEl:Tn,cloneEl:On,cloneHidden:Nn,dragStarted:Kn,putSortable:Rn,activeSortable:yr.active,originalEvent:i,oldIndex:jn,oldDraggableIndex:Ln,newIndex:Bn,newDraggableIndex:In,hideGhostForTarget:vr,unhideGhostForTarget:_r,cloneNowHidden:function(){Nn=!0},cloneNowShown:function(){Nn=!1},dispatchSortableEvent:function(e){En({sortable:t,name:e,originalEvent:i})}},a))};function En(e){!function(e){var t=e.sortable,o=e.rootEl,i=e.name,a=e.targetEl,n=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,h=e.putSortable,v=e.extraEventProperties;if(t=t||o&&o[wn]){var _,m=t.options,f="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||Ga||Ua?(_=document.createEvent("Event")).initEvent(i,!0,!0):_=new CustomEvent(i,{bubbles:!0,cancelable:!0}),_.to=r||o,_.from=l||o,_.item=a||o,_.clone=n,_.oldIndex=s,_.newIndex=d,_.oldDraggableIndex=c,_.newDraggableIndex=u,_.originalEvent=p,_.pullMode=h?h.lastPutMode:void 0;var y=La(La({},v),Sn.getEventProperties(i,t));for(var g in y)_[g]=y[g];o&&o.dispatchEvent(_),m[f]&&m[f].call(t,_)}}(La({putSortable:Rn,cloneEl:On,targetEl:An,rootEl:Pn,oldIndex:jn,oldDraggableIndex:Ln,newIndex:Bn,newDraggableIndex:In},e))}var An,Mn,zn,Pn,Dn,Tn,On,Nn,jn,Bn,Ln,In,Hn,Rn,Fn,Gn,Un,Vn,Wn,Zn,Kn,Yn,qn,Xn,Jn,Qn=!1,er=!1,tr=[],or=!1,ir=!1,ar=[],nr=!1,rr=[],lr="undefined"!=typeof document,sr=Za,dr=Ua||Ga?"cssFloat":"float",cr=lr&&!Ka&&!Za&&"draggable"in document.createElement("div"),ur=function(){if(lr){if(Ga)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),pr=function(e,t){var o=nn(e),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=un(e,0,t),n=un(e,1,t),r=a&&nn(a),l=n&&nn(n),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+dn(a).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+dn(n).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!n||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return a&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=i&&"none"===o[dr]||n&&"none"===o[dr]&&s+d>i)?"vertical":"horizontal"},hr=function(e){function t(e,o){return function(i,a,n,r){var l=i.options.group.name&&a.options.group.name&&i.options.group.name===a.options.group.name;if(null==e&&(o||l))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(i,a,n,r),o)(i,a,n,r);var s=(o?i:a).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},i=e.group;i&&"object"==Ia(i)||(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o},vr=function(){!ur&&zn&&nn(zn,"display","none")},_r=function(){!ur&&zn&&nn(zn,"display","")};lr&&!Ka&&document.addEventListener("click",(function(e){if(er)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),er=!1,!1}),!0);var mr=function(e){if(An){var t=function(e,t){var o;return tr.some((function(i){var a=i[wn].options.emptyInsertThreshold;if(a&&!pn(i)){var n=dn(i),r=e>=n.left-a&&e<=n.right+a,l=t>=n.top-a&&t<=n.bottom+a;return r&&l?o=i:void 0}})),o}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[wn]._onDragOver(o)}}},fr=function(e){An&&An.parentNode[wn]._isOutsideThisEl(e.target)};function yr(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ra({},t),e[wn]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pr(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==yr.supportPointer&&"PointerEvent"in window&&!Wa,emptyInsertThreshold:5};for(var i in Sn.initializePlugins(this,e,o),o)!(i in t)&&(t[i]=o[i]);for(var a in hr(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&cr,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?qa(e,"pointerdown",this._onTapStart):(qa(e,"mousedown",this._onTapStart),qa(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(qa(e,"dragover",this),qa(e,"dragenter",this)),tr.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ra(this,function(){var e,t=[];return{captureAnimationState:function(){t=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==nn(e,"display")&&e!==yr.ghost){t.push({target:e,rect:dn(e)});var o=La({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=rn(e,!0);i&&(o.top-=i.f,o.left-=i.e)}e.fromRect=o}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var o in e)if(e.hasOwnProperty(o))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[o][i])return Number(o);return-1}(t,{target:e}),1)},animateAll:function(o){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof o&&o());var a=!1,n=0;t.forEach((function(e){var t=0,o=e.target,r=o.fromRect,l=dn(o),s=o.prevFromRect,d=o.prevToRect,c=e.rect,u=rn(o,!0);u&&(l.top-=u.f,l.left-=u.e),o.toRect=l,o.thisAnimationDuration&&mn(s,l)&&!mn(r,l)&&(c.top-l.top)/(c.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,o,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*i.animation}(c,s,d,i.options)),mn(l,r)||(o.prevFromRect=r,o.prevToRect=l,t||(t=i.options.animation),i.animate(o,c,l,t)),t&&(a=!0,n=Math.max(n,t),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),t),o.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"==typeof o&&o()}),n):"function"==typeof o&&o(),t=[]},animate:function(e,t,o,i){if(i){nn(e,"transition",""),nn(e,"transform","");var a=rn(this.el),n=a&&a.a,r=a&&a.d,l=(t.left-o.left)/(n||1),s=(t.top-o.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,nn(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),nn(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),nn(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){nn(e,"transition",""),nn(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}())}function gr(e,t,o,i,a,n,r,l){var s,d,c=e[wn],u=c.options.onMove;return!window.CustomEvent||Ga||Ua?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=o,s.draggedRect=i,s.related=a||t,s.relatedRect=n||dn(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),u&&(d=u.call(c,s,r)),d}function br(e){e.draggable=!1}function wr(){nr=!1}function xr(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,i=0;o--;)i+=t.charCodeAt(o);return i.toString(36)}function kr(e){return setTimeout(e,0)}function Sr(e){return clearTimeout(e)}yr.prototype={constructor:yr,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Yn=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,An):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,i=this.options,a=i.preventOnFilter,n=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(function(e){rr.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var i=t[o];i.checked&&rr.push(i)}}(o),!An&&!(/mousedown|pointerdown/.test(n)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Wa||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=en(l,i.draggable,o,!1))&&l.animated||Tn===l)){if(jn=hn(l),Ln=hn(l,i.draggable),"function"==typeof d){if(d.call(this,e,l,this))return En({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:o,fromEl:o}),Cn("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(i){if(i=en(s,i.trim(),o,!1))return En({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:o,toEl:o}),Cn("filter",t,{evt:e}),!0}))))return void(a&&e.cancelable&&e.preventDefault());i.handle&&!en(s,i.handle,o,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,o){var i,a=this,n=a.el,r=a.options,l=n.ownerDocument;if(o&&!An&&o.parentNode===n){var s=dn(o);if(Pn=n,Mn=(An=o).parentNode,Dn=An.nextSibling,Tn=o,Hn=r.group,yr.dragged=An,Fn={target:An,clientX:(t||e).clientX,clientY:(t||e).clientY},Wn=Fn.clientX-s.left,Zn=Fn.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,An.style["will-change"]="all",i=function(){Cn("delayEnded",a,{evt:e}),yr.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!Va&&a.nativeDraggable&&(An.draggable=!0),a._triggerDragStart(e,t),En({sortable:a,name:"choose",originalEvent:e}),an(An,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){ln(An,e.trim(),br)})),qa(l,"dragover",mr),qa(l,"mousemove",mr),qa(l,"touchmove",mr),qa(l,"mouseup",a._onDrop),qa(l,"touchend",a._onDrop),qa(l,"touchcancel",a._onDrop),Va&&this.nativeDraggable&&(this.options.touchStartThreshold=4,An.draggable=!0),Cn("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(Ua||Ga))i();else{if(yr.eventCanceled)return void this._onDrop();qa(l,"mouseup",a._disableDelayedDrag),qa(l,"touchend",a._disableDelayedDrag),qa(l,"touchcancel",a._disableDelayedDrag),qa(l,"mousemove",a._delayedDragTouchMoveHandler),qa(l,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&qa(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){An&&br(An),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Xa(e,"mouseup",this._disableDelayedDrag),Xa(e,"touchend",this._disableDelayedDrag),Xa(e,"touchcancel",this._disableDelayedDrag),Xa(e,"mousemove",this._delayedDragTouchMoveHandler),Xa(e,"touchmove",this._delayedDragTouchMoveHandler),Xa(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?qa(document,"pointermove",this._onTouchMove):qa(document,t?"touchmove":"mousemove",this._onTouchMove):(qa(An,"dragend",this),qa(Pn,"dragstart",this._onDragStart));try{document.selection?kr((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Qn=!1,Pn&&An){Cn("dragStarted",this,{evt:t}),this.nativeDraggable&&qa(document,"dragover",fr);var o=this.options;!e&&an(An,o.dragClass,!1),an(An,o.ghostClass,!0),yr.active=this,e&&this._appendGhost(),En({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Gn){this._lastX=Gn.clientX,this._lastY=Gn.clientY,vr();for(var e=document.elementFromPoint(Gn.clientX,Gn.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Gn.clientX,Gn.clientY))!==t;)t=e;if(An.parentNode[wn]._isOutsideThisEl(e),t)do{if(t[wn]&&t[wn]._onDragOver({clientX:Gn.clientX,clientY:Gn.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);_r()}},_onTouchMove:function(e){if(Fn){var t=this.options,o=t.fallbackTolerance,i=t.fallbackOffset,a=e.touches?e.touches[0]:e,n=zn&&rn(zn,!0),r=zn&&n&&n.a,l=zn&&n&&n.d,s=sr&&Jn&&vn(Jn),d=(a.clientX-Fn.clientX+i.x)/(r||1)+(s?s[0]-ar[0]:0)/(r||1),c=(a.clientY-Fn.clientY+i.y)/(l||1)+(s?s[1]-ar[1]:0)/(l||1);if(!yr.active&&!Qn){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(zn){n?(n.e+=d-(Un||0),n.f+=c-(Vn||0)):n={a:1,b:0,c:0,d:1,e:d,f:c};var u="matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e,",").concat(n.f,")");nn(zn,"webkitTransform",u),nn(zn,"mozTransform",u),nn(zn,"msTransform",u),nn(zn,"transform",u),Un=d,Vn=c,Gn=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!zn){var e=this.options.fallbackOnBody?document.body:Pn,t=dn(An,!0,sr,!0,e),o=this.options;if(sr){for(Jn=e;"static"===nn(Jn,"position")&&"none"===nn(Jn,"transform")&&Jn!==document;)Jn=Jn.parentNode;Jn!==document.body&&Jn!==document.documentElement?(Jn===document&&(Jn=sn()),t.top+=Jn.scrollTop,t.left+=Jn.scrollLeft):Jn=sn(),ar=vn(Jn)}an(zn=An.cloneNode(!0),o.ghostClass,!1),an(zn,o.fallbackClass,!0),an(zn,o.dragClass,!0),nn(zn,"transition",""),nn(zn,"transform",""),nn(zn,"box-sizing","border-box"),nn(zn,"margin",0),nn(zn,"top",t.top),nn(zn,"left",t.left),nn(zn,"width",t.width),nn(zn,"height",t.height),nn(zn,"opacity","0.8"),nn(zn,"position",sr?"absolute":"fixed"),nn(zn,"zIndex","100000"),nn(zn,"pointerEvents","none"),yr.ghost=zn,e.appendChild(zn),nn(zn,"transform-origin",Wn/parseInt(zn.style.width)*100+"% "+Zn/parseInt(zn.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,i=e.dataTransfer,a=o.options;Cn("dragStart",this,{evt:e}),yr.eventCanceled?this._onDrop():(Cn("setupClone",this),yr.eventCanceled||((On=gn(An)).removeAttribute("id"),On.draggable=!1,On.style["will-change"]="",this._hideClone(),an(On,this.options.chosenClass,!1),yr.clone=On),o.cloneId=kr((function(){Cn("clone",o),yr.eventCanceled||(o.options.removeCloneOnHide||Pn.insertBefore(On,An),o._hideClone(),En({sortable:o,name:"clone"}))})),!t&&an(An,a.dragClass,!0),t?(er=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Xa(document,"mouseup",o._onDrop),Xa(document,"touchend",o._onDrop),Xa(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(o,i,An)),qa(document,"drop",o),nn(An,"transform","translateZ(0)")),Qn=!0,o._dragStartId=kr(o._dragStarted.bind(o,t,e)),qa(document,"selectstart",o),Kn=!0,Wa&&nn(document.body,"user-select","none"))},_onDragOver:function(e){var t,o,i,a,n=this.el,r=e.target,l=this.options,s=l.group,d=yr.active,c=Hn===s,u=l.sort,p=Rn||d,h=this,v=!1;if(!nr){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=en(r,l.draggable,n,!0),M("dragOver"),yr.eventCanceled)return v;if(An.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return P(!1);if(er=!1,d&&!l.disabled&&(c?u||(i=Mn!==Pn):Rn===this||(this.lastPutMode=Hn.checkPull(this,d,An,e))&&s.checkPut(this,d,An,e))){if(a="vertical"===this._getDirection(e,r),t=dn(An),M("dragOverValid"),yr.eventCanceled)return v;if(i)return Mn=Pn,z(),this._hideClone(),M("revert"),yr.eventCanceled||(Dn?Pn.insertBefore(An,Dn):Pn.appendChild(An)),P(!0);var _=pn(n,l.draggable);if(!_||function(e,t,o){var i=dn(pn(o.el,o.options.draggable)),a=bn(o.el,o.options,zn);return t?e.clientX>a.right+10||e.clientY>i.bottom&&e.clientX>i.left:e.clientY>a.bottom+10||e.clientX>i.right&&e.clientY>i.top}(e,a,this)&&!_.animated){if(_===An)return P(!1);if(_&&n===e.target&&(r=_),r&&(o=dn(r)),!1!==gr(Pn,n,An,t,r,o,e,!!r))return z(),_&&_.nextSibling?n.insertBefore(An,_.nextSibling):n.appendChild(An),Mn=n,D(),P(!0)}else if(_&&function(e,t,o){var i=dn(un(o.el,0,o.options,!0)),a=bn(o.el,o.options,zn);return t?e.clientX<a.left-10||e.clientY<i.top&&e.clientX<i.right:e.clientY<a.top-10||e.clientY<i.bottom&&e.clientX<i.left}(e,a,this)){var m=un(n,0,l,!0);if(m===An)return P(!1);if(o=dn(r=m),!1!==gr(Pn,n,An,t,r,o,e,!1))return z(),n.insertBefore(An,m),Mn=n,D(),P(!0)}else if(r.parentNode===n){o=dn(r);var f,y,g,b=An.parentNode!==n,w=!function(e,t,o){var i=o?e.left:e.top,a=o?e.right:e.bottom,n=o?e.width:e.height,r=o?t.left:t.top,l=o?t.right:t.bottom,s=o?t.width:t.height;return i===r||a===l||i+n/2===r+s/2}(An.animated&&An.toRect||t,r.animated&&r.toRect||o,a),x=a?"top":"left",k=cn(r,"top","top")||cn(An,"top","top"),S=k?k.scrollTop:void 0;if(Yn!==r&&(y=o[x],or=!1,ir=!w&&l.invertSwap||b),f=function(e,t,o,i,a,n,r,l){var s=i?e.clientY:e.clientX,d=i?o.height:o.width,c=i?o.top:o.left,u=i?o.bottom:o.right,p=!1;if(!r)if(l&&Xn<d*a){if(!or&&(1===qn?s>c+d*n/2:s<u-d*n/2)&&(or=!0),or)p=!0;else if(1===qn?s<c+Xn:s>u-Xn)return-qn}else if(s>c+d*(1-a)/2&&s<u-d*(1-a)/2)return function(e){return hn(An)<hn(e)?1:-1}(t);return(p=p||r)&&(s<c+d*n/2||s>u-d*n/2)?s>c+d/2?1:-1:0}(e,r,o,a,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ir,Yn===r),0!==f){var $=hn(An);do{$-=f,g=Mn.children[$]}while(g&&("none"===nn(g,"display")||g===zn))}if(0===f||g===r)return P(!1);Yn=r,qn=f;var C=r.nextElementSibling,E=!1,A=gr(Pn,n,An,t,r,o,e,E=1===f);if(!1!==A)return 1!==A&&-1!==A||(E=1===A),nr=!0,setTimeout(wr,30),z(),E&&!C?n.appendChild(An):r.parentNode.insertBefore(An,E?C:r),k&&yn(k,0,S-k.scrollTop),Mn=An.parentNode,void 0===y||ir||(Xn=Math.abs(y-dn(r)[x])),D(),P(!0)}if(n.contains(An))return P(!1)}return!1}function M(l,s){Cn(l,h,La({evt:e,isOwner:c,axis:a?"vertical":"horizontal",revert:i,dragRect:t,targetRect:o,canSort:u,fromSortable:p,target:r,completed:P,onMove:function(o,i){return gr(Pn,n,An,t,o,dn(o),e,i)},changed:D},s))}function z(){M("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function P(t){return M("dragOverCompleted",{insertion:t}),t&&(c?d._hideClone():d._showClone(h),h!==p&&(an(An,Rn?Rn.options.ghostClass:d.options.ghostClass,!1),an(An,l.ghostClass,!0)),Rn!==h&&h!==yr.active?Rn=h:h===yr.active&&Rn&&(Rn=null),p===h&&(h._ignoreWhileAnimating=r),h.animateAll((function(){M("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===An&&!An.animated||r===n&&!r.animated)&&(Yn=null),l.dragoverBubble||e.rootEl||r===document||(An.parentNode[wn]._isOutsideThisEl(e.target),!t&&mr(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function D(){Bn=hn(An),In=hn(An,l.draggable),En({sortable:h,name:"change",toEl:n,newIndex:Bn,newDraggableIndex:In,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Xa(document,"mousemove",this._onTouchMove),Xa(document,"touchmove",this._onTouchMove),Xa(document,"pointermove",this._onTouchMove),Xa(document,"dragover",mr),Xa(document,"mousemove",mr),Xa(document,"touchmove",mr)},_offUpEvents:function(){var e=this.el.ownerDocument;Xa(e,"mouseup",this._onDrop),Xa(e,"touchend",this._onDrop),Xa(e,"pointerup",this._onDrop),Xa(e,"touchcancel",this._onDrop),Xa(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;Bn=hn(An),In=hn(An,o.draggable),Cn("drop",this,{evt:e}),Mn=An&&An.parentNode,Bn=hn(An),In=hn(An,o.draggable),yr.eventCanceled||(Qn=!1,ir=!1,or=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Sr(this.cloneId),Sr(this._dragStartId),this.nativeDraggable&&(Xa(document,"drop",this),Xa(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wa&&nn(document.body,"user-select",""),nn(An,"transform",""),e&&(Kn&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),zn&&zn.parentNode&&zn.parentNode.removeChild(zn),(Pn===Mn||Rn&&"clone"!==Rn.lastPutMode)&&On&&On.parentNode&&On.parentNode.removeChild(On),An&&(this.nativeDraggable&&Xa(An,"dragend",this),br(An),An.style["will-change"]="",Kn&&!Qn&&an(An,Rn?Rn.options.ghostClass:this.options.ghostClass,!1),an(An,this.options.chosenClass,!1),En({sortable:this,name:"unchoose",toEl:Mn,newIndex:null,newDraggableIndex:null,originalEvent:e}),Pn!==Mn?(Bn>=0&&(En({rootEl:Mn,name:"add",toEl:Mn,fromEl:Pn,originalEvent:e}),En({sortable:this,name:"remove",toEl:Mn,originalEvent:e}),En({rootEl:Mn,name:"sort",toEl:Mn,fromEl:Pn,originalEvent:e}),En({sortable:this,name:"sort",toEl:Mn,originalEvent:e})),Rn&&Rn.save()):Bn!==jn&&Bn>=0&&(En({sortable:this,name:"update",toEl:Mn,originalEvent:e}),En({sortable:this,name:"sort",toEl:Mn,originalEvent:e})),yr.active&&(null!=Bn&&-1!==Bn||(Bn=jn,In=Ln),En({sortable:this,name:"end",toEl:Mn,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Cn("nulling",this),Pn=An=Mn=zn=Dn=On=Tn=Nn=Fn=Gn=Kn=Bn=In=jn=Ln=Yn=qn=Rn=Hn=yr.dragged=yr.ghost=yr.clone=yr.active=null,rr.forEach((function(e){e.checked=!0})),rr.length=Un=Vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":An&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,i=0,a=o.length,n=this.options;i<a;i++)en(e=o[i],n.draggable,this.el,!1)&&t.push(e.getAttribute(n.dataIdAttr)||xr(e));return t},sort:function(e,t){var o={},i=this.el;this.toArray().forEach((function(e,t){var a=i.children[t];en(a,this.options.draggable,i,!1)&&(o[e]=a)}),this),t&&this.captureAnimationState(),e.forEach((function(e){o[e]&&(i.removeChild(o[e]),i.appendChild(o[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return en(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];var i=Sn.modifyOption(this,e,t);o[e]=void 0!==i?i:t,"group"===e&&hr(o)},destroy:function(){Cn("destroy",this);var e=this.el;e[wn]=null,Xa(e,"mousedown",this._onTapStart),Xa(e,"touchstart",this._onTapStart),Xa(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Xa(e,"dragover",this),Xa(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),tr.splice(tr.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Nn){if(Cn("hideClone",this),yr.eventCanceled)return;nn(On,"display","none"),this.options.removeCloneOnHide&&On.parentNode&&On.parentNode.removeChild(On),Nn=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Nn){if(Cn("showClone",this),yr.eventCanceled)return;An.parentNode!=Pn||this.options.group.revertClone?Dn?Pn.insertBefore(On,Dn):Pn.appendChild(On):Pn.insertBefore(On,An),this.options.group.revertClone&&this.animate(An,On),nn(On,"display",""),Nn=!1}}else this._hideClone()}},lr&&qa(document,"touchmove",(function(e){(yr.active||Qn)&&e.cancelable&&e.preventDefault()})),yr.utils={on:qa,off:Xa,css:nn,find:ln,is:function(e,t){return!!en(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},throttle:fn,closest:en,toggleClass:an,clone:gn,index:hn,nextTick:kr,cancelNextTick:Sr,detectDirection:pr,getChild:un},yr.get=function(e){return e[wn]},yr.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(yr.utils=La(La({},yr.utils),e.utils)),Sn.mount(e)}))},yr.create=function(e,t){return new yr(e,t)},yr.version="1.15.2";var $r,Cr,Er,Ar,Mr,zr,Pr=[],Dr=!1;function Tr(){Pr.forEach((function(e){clearInterval(e.pid)})),Pr=[]}function Or(){clearInterval(zr)}var Nr=fn((function(e,t,o,i){if(t.scroll){var a,n=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,d=sn(),c=!1;Cr!==o&&(Cr=o,Tr(),$r=t.scroll,a=t.scrollFn,!0===$r&&($r=_n(o,!0)));var u=0,p=$r;do{var h=p,v=dn(h),_=v.top,m=v.bottom,f=v.left,y=v.right,g=v.width,b=v.height,w=void 0,x=void 0,k=h.scrollWidth,S=h.scrollHeight,$=nn(h),C=h.scrollLeft,E=h.scrollTop;h===d?(w=g<k&&("auto"===$.overflowX||"scroll"===$.overflowX||"visible"===$.overflowX),x=b<S&&("auto"===$.overflowY||"scroll"===$.overflowY||"visible"===$.overflowY)):(w=g<k&&("auto"===$.overflowX||"scroll"===$.overflowX),x=b<S&&("auto"===$.overflowY||"scroll"===$.overflowY));var A=w&&(Math.abs(y-n)<=l&&C+g<k)-(Math.abs(f-n)<=l&&!!C),M=x&&(Math.abs(m-r)<=l&&E+b<S)-(Math.abs(_-r)<=l&&!!E);if(!Pr[u])for(var z=0;z<=u;z++)Pr[z]||(Pr[z]={});Pr[u].vx==A&&Pr[u].vy==M&&Pr[u].el===h||(Pr[u].el=h,Pr[u].vx=A,Pr[u].vy=M,clearInterval(Pr[u].pid),0==A&&0==M||(c=!0,Pr[u].pid=setInterval(function(){i&&0===this.layer&&yr.active._onTouchMove(Mr);var t=Pr[this.layer].vy?Pr[this.layer].vy*s:0,o=Pr[this.layer].vx?Pr[this.layer].vx*s:0;"function"==typeof a&&"continue"!==a.call(yr.dragged.parentNode[wn],o,t,e,Mr,Pr[this.layer].el)||yn(Pr[this.layer].el,o,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==d&&(p=_n(p,!1)));Dr=c}}),30),jr=function(e){var t=e.originalEvent,o=e.putSortable,i=e.dragEl,a=e.activeSortable,n=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=o||a;r();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);l(),s&&!s.el.contains(c)&&(n("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function Br(){}function Lr(){}Br.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=un(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:jr},Ra(Br,{pluginName:"revertOnSpill"}),Lr.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:jr},Ra(Lr,{pluginName:"removeOnSpill"});var Ir=[Lr,Br];yr.mount(Ir,new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?qa(document,"dragover",this._handleAutoScroll):this.options.supportPointer?qa(document,"pointermove",this._handleFallbackAutoScroll):t.touches?qa(document,"touchmove",this._handleFallbackAutoScroll):qa(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Xa(document,"dragover",this._handleAutoScroll):(Xa(document,"pointermove",this._handleFallbackAutoScroll),Xa(document,"touchmove",this._handleFallbackAutoScroll),Xa(document,"mousemove",this._handleFallbackAutoScroll)),Or(),Tr(),clearTimeout(tn),tn=void 0},nulling:function(){Mr=Cr=$r=Dr=zr=Er=Ar=null,Pr.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var o=this,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,n=document.elementFromPoint(i,a);if(Mr=e,t||this.options.forceAutoScrollFallback||Ua||Ga||Wa){Nr(e,this.options,n,t);var r=_n(n,!0);!Dr||zr&&i===Er&&a===Ar||(zr&&Or(),zr=setInterval((function(){var n=_n(document.elementFromPoint(i,a),!0);n!==r&&(r=n,Tr()),Nr(e,o.options,n,t)}),10),Er=i,Ar=a)}else{if(!this.options.bubbleScroll||_n(n,!0)===sn())return void Tr();Nr(e,this.options,_n(n,!1),!1)}}},Ra(e,{pluginName:"scroll",initializeByDefault:!0})});var Hr=Object.freeze({__proto__:null,default:yr});export{Pt as PowerFlowCardPlus};
